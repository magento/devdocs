<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>The DataSource Component</title>
	<meta name="description" content="Magento 2 Developer Guide.
">

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print"/>
	<link rel="canonical" href="//guides/v2.1/ui_comp_guide/concepts/ui_comp_data_source.html">

	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script>
        var baseUrl = "/";
    </script>

</head>
<body>

<header class="site-header">

	<nav role="navigation">

		<div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div>

		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/">Developer Documentation (2.1)</a>
				</div>
			</div>
            
<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" data-toggle="dropdown">
		Version 2.1
	</button>


	<ul class="dropdown-menu dropdown-menu-left">
	
		<li><a class="dropdown-item" href="/guides/v2.0/ui_comp_guide/concepts/ui_comp_data_source.html">Version 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_data_source.html">Version 2.1</a></li>
	
  </ul>

</div>


		</div><!-- #global-nav -->
	</nav>

	<div class="search-btn">
        <a class="search-trigger search-icon" href="/search.html"></a>
	</div>

</header>

<!--Sub Navigation-->
<div id="subnav-wrap" class="nav-main">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first">
            <a href="#">Get Started</a>
            <ul class="menu nav">
               <li class="leaf"><a href="/guides/v2.1/architecture/bk-architecture.html">Magento Architecture</a></li>
               <li class="first leaf"><a href="/guides/v2.1/release-notes/bk-release-notes.html">Release Information</a></li>

            </ul>
         </li>
         <li class="first">
            <a href="#">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/install-gde/bk-install-guide.html">Installation Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.1/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/migration/bk-migration-guide.html">Migration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/cloud/bk-cloud.html">Magento Enterprise Cloud Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
               
               <li class="first leaf"><a href="/guides/v2.1/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
               
			   
			   
               <li class="first leaf"><a href="/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.1/rest/bk-rest.html">REST Reference</a></li>
               <li class="leaf"><a href="/guides/v2.1/soap/bk-soap.html">SOAP Reference</a></li>
               <li class="leaf"><a href="/guides/v2.1/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
               <li class="leaf"><a href="/guides/v2.1/mrg/intro.html">Module Reference Guide</a></li>
               
                   <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/staging.html">Staging</a></li>
               
            </ul>
         </li>
         <li class="first">
            <a href="#">Designers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
               <li class="leaf"><a href="/guides/v2.1/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
          <li class="first">
              <a href="/guides/v2.1/test/testing.html">Testing</a>
              <ul class="menu nav">
                  <li class="leaf"><a href="/guides/v2.1/mtf/mtf_introduction.html">Functional Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/integration/integration_test_execution.html">Integration Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/test/test_js-unit.html">JavaScript Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
              </ul>
          </li>
         <li class="first">
            <a href="/guides/v2.1/howdoi/bk-how-do-i.html">How Do I...?</a>
         </li>
      </ul>

      <div class ="search">
         <div class="search-icon"></div>
         <form id="searchbox" name="gs" method="GET" action="/search.html">
            <input type="text" name="q" id="searchtext" value="" placeholder="Search" autofocus>
         </form>
      </div><!-- END searchbox-->

      <a href="#" class="nav-close">&times;</a>

   </div> <!--End subnav -->
</div><!--End subnav-wrap -->
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">


<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">The DataSource Component</h1>

        

        <div class="topic-info">

            
               <div class="github-link"><a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.1/ui_comp_guide/concepts/ui_comp_data_source.md" target="_blank">Edit this page on GitHub</a></div>
            
            
                <a class="contributor" href="https://swiftotter.com/" target="_blank">Thanks to SwiftOtter Studios for contributing this topic</a>
            

        </div> 
		        
		
        <div class="float-break"></div>
	</div>
</section>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>UI Components Guide</h4>






		<ul role="navigation">

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							

								<li class="q "><a href="/guides/v2.1/ui_comp_guide/bk-ui_comps.html">Overview of UI components</a></li>

							

								<li class="q "><a href="/guides/v2.1/ui_comp_guide/ui_comp_list_concept.html">A list of Magento UI components</a></li>

							

								<li class="q "><a href="/guides/v2.1/ui_comp_guide/ui_comp_outline_proposed.html">UI Components Guide outline (proposed)</a></li>

							

						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">components</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/components/ui-form.html">Form component</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/components/ui-listing-grid.html">Listing/Grid component</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/components/ui-modal.html">Modal component</a></li>

									

								




						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">concepts</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_architecture_concept.html">Architecture structure of UI components</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_config_flow_concept.html">Configuration flow of UI components</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_data_source.html">Providing Data to UI Components</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_xmldeclaration_concept.html">About XML сonfiguration of UI сomponents</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_modifier_concept.html">About PHP modifiers in UI components</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_uiclass_concept.html">About the uiClass library</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_uielement_concept.html">About the uiElement class</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_uicollection_concept.html">About the uiCollection class</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_uilayout_concept.html">About the uiLayout service module</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_requirejs_concept.html">About AMD modules and RequireJS</a></li>

									

								




						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">troubleshoot</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/ui_comp_guide/troubleshoot/ui_comp_troubleshoot_js.html">Debug UI components JavaScript</a></li>

									

								




						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
            <div class="updated">Updated: 25 October 2016 (PDT)</div>
            <h2 class="no_toc" id="the-datasource-component">The DataSource Component</h2>

<h2 id="overview">Overview</h2>
<p>Magento provides the DataSource object, which is designed to interact with data in your UI component. Many of the core UI components use this DataSource component. Many UI components require that this object is included. However, there are specific requirements it has in order for it to work correctly.</p>

<p>In this topic, we will explain how to take advantage of the powerful functionality of the data provider in a UI Component.</p>

<h3 id="declaring-the-xml">Declaring the XML</h3>

<p>The DataSource UI component can be included with the <code>&lt;dataSource /&gt;</code> node in the component’s top-level configuration file. The <code>name</code> attribute is recommended and should follow the <code>%instance_name%_data_source</code> pattern where <code>%instance_name%</code> is the name of the component.</p>

<p>The component’s data provider class is declared inside <code>&lt;dataSource /&gt;</code>. The following provides an example and demonstrates what nodes are required.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;dataProvider&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;configurableObject&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;class&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>[YourNameSpace]\[YourModule]\Ui\DataProvider\[YourComponentName]DataProvider<span class="nt">&lt;/argument&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;name&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>[YourComponentName]_data_source<span class="nt">&lt;/argument&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;primaryFieldName&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>entity_id<span class="nt">&lt;/argument&gt;</span>
    <span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;requestFieldName&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>id<span class="nt">&lt;/argument&gt;</span>
<span class="nt">&lt;/argument&gt;</span></code></pre></figure>

<p>In the block of code above, [YourNameSpace][YourModule] would the directory that contains all of the module’s files and directories. [YourComponentName] is the name of this instance of a component, which should be the file name as well.</p>

<p>The main node of interest is <code>&lt;argument name="class" /&gt;.</code> This references a PHP class that must implement <code>\Magento\Framework\View\Element\UiComponent\DataProvider\DataProviderInterface</code>. To meet that requirement, it can extend <code>\Magento\Ui\DataProvider\AbstractDataProvider</code>. The <code>AbstractDataProvider</code> class implements all of the required methods in the <code>DataProviderInterface</code>. The DataProvider class is the primary source of any data or metadata that the component needs or will use.</p>

<p>While the XML tells Magento about the component’s data provider, Magento doesn’t do anything in particular with that unless you hook it up to the component’s main PHP class. To make the data available in javascript, add a <code>getDataSourceData()</code> method to the UI component’s PHP class and return <code>$this-&gt;getContext()-&gt;getDataProvider()-&gt;getData()</code>. This will output the result of the data provider’s <code>getData()</code> method into the JSON that is sent to the browser along with the rest of the UI component’s configuration.</p>

<p>Declare a <code>getData()</code> method in the data provider class that was referenced in the XML and return a value. Since that output will be part of the JSON rendered on the page, it is accessible via the javascript class that is associated with the UI component and handles its behavior. Magento’s Form Provider javascript class is often a good place to start.</p>

<div class="bs-callout bs-callout-info" id="info">
    <p>A Javascript "component" is actually a Javascript file loaded through RequireJS. It should return a Javascript object that defines a module or function. Do not confuse Javascript components with UI components.</p>
</div>

<p>Include the Form Provider Javascript component by adding this inside the <code>&lt;dataSource /&gt;</code> node:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;argument</span> <span class="na">name=</span><span class="s">&quot;data&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;js_config&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;component&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>Magento_Ui/js/form/provider<span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/argument&gt;</span></code></pre></figure>

<p>This will include <code>Magento/Ui/view/base/web/js/form/provider.js</code> on the page as part of this DataSource component. The Form Provider javascript can also be extended if the functionality doesn’t do what is necessary in your case.</p>

<p>Remember that this data provider is still, technically speaking, a completely separate UI Component. To fully link it to the “base” component, there are a few things that need to happen so that the “base” UI component’s javascript can use the data provided by the data provider.</p>

<p>A good way to keep configuration data out of the javascript is to declare a “provider” in the base component’s XML so it will be able to find that data provider component. Under the <code>&lt;argument name="data" /&gt;</code> node, add a node like this (where <code>[ComponentName]</code> is the name of the component):</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;config&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;array&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;item</span> <span class="na">name=</span><span class="s">&quot;provider&quot;</span> <span class="na">xsi:type=</span><span class="s">&quot;string&quot;</span><span class="nt">&gt;</span>[ComponentName].[ComponentName]_data_source<span class="nt">&lt;/item&gt;</span>
<span class="nt">&lt;/item&gt;</span></code></pre></figure>

<p>This example declares the name of the data provider class and will be output in the JSON that contains the UI component’s configuration. It can then be used to locate the data source component. This is essentially declaring a variable that will be available to a javascript class.</p>

<h1 id="javascript-template-literals">Javascript Template Literals</h1>

<p>Throughout Magento’s core Javascript components there are strings like this: <code>'${ $.provider }:data.totalRecords'</code>. These are ES2015 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals">template literals</a>. The <code>${ }</code> surrounds an expression that will be parsed as Javascript. <code>$.provider</code> is the expression, in this example.</p>

<p>The template literal is in a single-quote string, however, not the back-ticks which are standard for ES2015. As a result, they would normally be treated as a string. Since Magento needs to support browsers that don’t recognize template literals a special interpreter was built for them. If the browser does support standard back-tick template literals, Magento will use that, and if not, it evaluates the value manually.</p>

<p>When the component is initialized, it will automatically evaluate all string literals in properties. In the example above, <code>$.provider</code> will become  <code>[ComponentName].[ComponentName]_data_source</code>. The value of this <code>provider</code> was declared in the <code>js_config</code> block in the XML above. It is possible to pass nearly any configuration value this way and access it using template literals.</p>

<p>But, XML is static and while that gets us the name of the data provider component, it still doesn’t actually provide data. There is one more important step in providing data to Javascript components.</p>

<h1 id="javascript-component-linking">Javascript Component Linking</h1>

<p>Every Javascript component should extend the core Element class in some way (mapped to <a href="/guides/v2.1/ui_comp_guide/concepts/ui_comp_uielement_concept.html"><code>uiElement</code></a> with RequireJS and located in <code>Magento/Ui/view/base/web/js/lib/core/element/element.js</code>.  When this class initializes it runs an <code>initLinks()</code> method. That method, in turn, passes a few class properties into a method that handles linking components together. This file (<code>lib/core/element/link.js</code>) binds the values of those parameters to actual components.</p>

<p>The properties Magento will parse are: 
- <code>imports</code>
- <code>exports</code>
-  <code>links</code></p>

<p>The <code>links</code> property is the same as duplicating a value in both <code>imports</code> and <code>exports</code>. Each of those properties expect an object that contains key/value pairs to bind the expression to. In the example above, it would appear in the <code>defaults</code> property like this:</p>

<pre><code>imports: {
    totalRecords: '${ $.provider }:data.totalRecords'
}
</code></pre>

<p>When the Element class initializes, it will process the link that was declared in <code>imports</code>. Remember that one of the first things Magento does is process string literals, though, so it is actually working with something that looks more like the following (where <code>example</code> is the Component Name for clarity):</p>

<pre><code>imports: {
    totalRecords: 'example.example_data_source:data.totalRecords'
}
</code></pre>

<p>The <code>:</code> is a special separator that is used to divide the component name that it is to link to and the values it should access in the returned value. No <code>:</code> is necessary, though, and the expression, <code>$.provider</code> could be any key that was passed into the javascript configuration.</p>

<p>In the example above, it will return the <code>totalRecords</code> property of the <code>data</code> object in the <code>example.example_data_source</code> component. As a result of these connections, `` will display the output of <code>DataProvider::getData()</code>.</p>

		</div>
	</section>
<!-- /main content -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
    <div id="copyright">
        <div class="container">
            <div class="copyright-date">&copy; 2016 Magento, Inc. All rights reserved.</div>
            <div class="copyright-links">
                <ul class="nav">
                    <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                    <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                    <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark FAQ</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>
<script src="/common/js/jquery-ui.min.js"></script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<script src="/js/app.js"></script>

<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>

