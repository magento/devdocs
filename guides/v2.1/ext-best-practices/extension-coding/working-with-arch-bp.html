<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Working with the Architecture</title>
	<meta name="description" content="Magento 2 Developer Guide.
">

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print"/>
	<link rel="canonical" href="//guides/v2.1/ext-best-practices/extension-coding/working-with-arch-bp.html">

	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

</head>
<body>

<header class="site-header">

	<nav role="navigation">

		<div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div>

		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/">Developer Documentation (2.1)</a>
				</div>
			</div>
			
<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" data-toggle="dropdown">
		Version 2.1
	</button>


	<ul class="dropdown-menu dropdown-menu-right">
	
		<li><a class="dropdown-item" href="/guides/v2.0/">Version 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/">Version 2.1</a></li>
	
  </ul>

</div>


		</div><!-- #global-nav -->
	</nav>

	<div class="search-btn">
        <a class="search-trigger search-icon" href="/guides/v2.1/search.html"></a>
	</div>

</header>

<!--Sub Navigation-->
<div id="subnav-wrap" class="nav-main">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first">
            <a href="#">Get Started</a>
            <ul class="menu nav">
               <li class="leaf"><a href="/guides/v2.1/architecture/bk-architecture.html">Magento Architecture</a></li>
               <li class="first leaf"><a href="/guides/v2.1/release-notes/bk-release-notes.html">Release Information</a></li>

            </ul>
         </li>
         <li class="first">
            <a href="#">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/install-gde/bk-install-guide.html">Installation Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.1/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/migration/bk-migration-guide.html">Migration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/cloud/bk-cloud.html">Magento Enterprise Cloud Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices Guide</a></li>
               <li class="leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Magento Admin Pattern Library</a></li>
               <li class="leaf"><a href="/guides/v2.1/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.1/rest/bk-rest.html">REST Reference</a></li>
               <li class="leaf"><a href="/guides/v2.1/soap/bk-soap.html">SOAP Reference</a></li>
               <li class="leaf"><a href="/guides/v2.1/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
               <li class="leaf"><a href="/guides/v2.1/mrg/intro.html">Module Reference Guide</a></li>
               
                   <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/staging.html">Staging</a></li>
               
            </ul>
         </li>
         <li class="first">
            <a href="#">Designers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
               <li class="leaf"><a href="/guides/v2.1/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.1/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
          <li class="first">
              <a href="/guides/v2.1/test/testing.html">Testing</a>
              <ul class="menu nav">
                  <li class="leaf"><a href="/guides/v2.1/mtf/mtf_introduction.html">Functional Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/integration/integration_test_execution.html">Integration Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/test/test_js-unit.html">JavaScript Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.1/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
              </ul>
          </li>
         <li class="first">
            <a href="/guides/v2.1/howdoi/bk-how-do-i.html">How Do I...?</a>
         </li>
      </ul>

      <div class ="search">
         <div class="search-icon"></div>
         <form id="searchbox" name="gs" method="GET" action="/search.html">
            <input type="text" name="q" id="searchtext" value="" placeholder="Search">
         </form>
      </div><!-- END searchbox-->

      <a href="#" class="nav-close">&times;</a>

   </div> <!--End subnav -->
</div><!--End subnav-wrap -->
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">


<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">Working with the Architecture</h1>
		
			<a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/ext-best-practices/extension-coding/working-with-arch-bp.md" target="_blank">Edit this page on GitHub</a>
		
		
        

	</div>
</section>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Extension Best Practices</h4>






		<ul role="navigation">

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							

								<li class="q "><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Introduction</a></li>

							

						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/ext-best-practices/admin/admin-best-practices.html">Admin</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/admin/placement-and-design.html">Admin Panel Placement and Design</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/admin/ext-best-practices_admin_FAQ.html">Admin FAQ</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/ext-best-practices/extension-coding/coding-best-practices.html">Extension Coding</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/extension-coding/common-programming-bp.html">Programming best practices</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.1/ext-best-practices/extension-coding/working-with-arch-bp.html">Working with the Architecture</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/extension-coding/security-performance-data-bp.html">Security, performance, and data handling</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/extension-coding/observers-bp.html">Observers best practices</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/extension-coding/coding-faq.html">Coding FAQ</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/ext-best-practices/extension-coding/example-module-adminpage.html">Creating a Magento admin page</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/ext-best-practices/storefront/storefront-best-practices.html">Storefront</a></li>
									
								

									


								




						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<p align="right"><i>Updated: 22 June 2016 (PDT)</i></p>
		<h2 class="no_toc" id="working-with-the-architecture">Working with the Architecture</h2>

<p>In addition to understanding fundamental programming designs/concepts, you are encouraged to learn how the MVC architecture works in our code and how to work with Magento’s generated code and factories.</p>

<h3 class="no_toc" id="content">Content</h3>

<ul id="markdown-toc">
  <li><a href="#avoid-modification-of-the-magento-core" id="markdown-toc-avoid-modification-of-the-magento-core">Avoid modification of the Magento Core</a></li>
  <li><a href="#learn-the-architecture" id="markdown-toc-learn-the-architecture">Learn the architecture</a></li>
  <li><a href="#check-your-extension-configurations" id="markdown-toc-check-your-extension-configurations">Check your extension configurations</a></li>
  <li><a href="#know-and-leverage-the-magento-2-framework" id="markdown-toc-know-and-leverage-the-magento-2-framework">Know and leverage the Magento 2 framework</a></li>
  <li><a href="#use-dependency-injection" id="markdown-toc-use-dependency-injection">Use dependency injection</a></li>
  <li><a href="#follow-model-view-control-mvc-pattern" id="markdown-toc-follow-model-view-control-mvc-pattern">Follow Model-View-Control (MVC) pattern</a></li>
  <li><a href="#use-the-phpcodesniffer-tool" id="markdown-toc-use-the-phpcodesniffer-tool">Use the PHP_CodeSniffer tool</a></li>
</ul>

<hr />

<h3 id="avoid-modification-of-the-magento-core">Avoid modification of the Magento Core</h3>
<p>The core code is the default Magento code that comes with the application. You should never edit the core code because code changes occur between version upgrades and any changes you make will get overwritten. Try achieving your desired behavior with plugins, overriding interface preferences, and event observers.</p>

<p>If you feel that Magento can be improved with your core code changes, please consider <a href="/guides/v2.1/contributor-guide/contributing.html">contributing via Git</a>.</p>

<h3 id="learn-the-architecture">Learn the architecture</h3>
<p>To create the optimum module, you should get to know the Magento 2 architecture. Start off by familiarizing yourself with the <a href="/guides/v2.1/pattern-library/bk-pattern.html">Admin Pattern Library</a>, the core <a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">Magento Components</a>, and our <a href="/guides/v2.1/extension-dev-guide/service-contracts/service-contracts.html">service contracts</a> and <a href="/guides/v2.1/get-started/bk-get-started-api.html">APIs</a>.</p>

<h3 id="check-your-extension-configurations">Check your extension configurations</h3>
<p>Make sure your extension is configured correctly in each of your extension’s configuration files. Invalid or unexpected values will cause your extension to behave incorrectly within Magento.</p>

<h3 id="know-and-leverage-the-magento-2-framework">Know and leverage the Magento 2 framework</h3>
<p>There have been some significant changes from Magento 1. Be sure to study the capabilities and standards of the Magento 2 Framework.</p>

<p>For example:</p>

<ul>
  <li>Instead of creating custom validators from scratch, implement the <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/Validator/ValidatorInterface.php" target="_blank"><code>\Magento\Framework\Validator\ValidatorInterface</code></a>.</li>
  <li>Instantiating a database connection can be expensive and unneccessary. Magento provides resource models for performing SQL commands. (See <a href="/guides/v2.1/architecture/archi_perspectives/persist_layer.html">Persistence Layer</a>)</li>
  <li>Consider using Magento framework conventions instead of low-level or PHP functionality.</li>
  <li>Use the  <a href="https://github.com/magento/magento2/blob/2.0/lib/internal/Magento/Framework/Data/Collection.php" target="_blank"><code>Magento\Framework\Data\Collection</code></a> class to retrieve a collection of filtered objects instead of directly querying the database.</li>
</ul>

<h3 id="use-dependency-injection">Use dependency injection</h3>
<p>Direct class instantiation is not recommended because the class can be rewritten. If the class is created directly, any rewrites will not be applied and it breaks Magento’s class rewrite capability. We encourage you to become familiar with how we use <a href="/guides/v2.1/extension-dev-guide/depend-inj.html">dependency injection</a> to get an instance of a class.</p>

<h3 id="follow-model-view-control-mvc-pattern">Follow Model-View-Control (MVC) pattern</h3>
<p>Make sure your extension adheres to the MVC Pattern, and that it does not violate any of its principles.</p>

<p>Some important things to check in your extensions:</p>

<ul>
  <li>Make sure your Business Logic, Configuration, and SQL are implemented in the correct places.</li>
  <li>Make sure that CSS, JavaScript, HTML, and XML code are all in the appropriate files (i.e. they should not be inline).</li>
  <li>Use appropriate logic in a Block, Helper, Template, Controller, or Model.</li>
  <li>Ensure correct module design.</li>
</ul>

<h3 id="use-the-phpcodesniffer-tool">Use the PHP_CodeSniffer tool</h3>

<p><a href="https://github.com/squizlabs/PHP_CodeSniffer" target="_blank">PHP_CodeSniffer</a> is a set of PHP scripts that checks your code for violations of a particular coding standard. It can be used in conjunction with the <a href="https://github.com/magento-ecg/coding-standard" target="_blank">ECG Magento Code Sniffer Coding Standard</a> to check your code for some of the more common Magento and PHP problems. Using these two tools will ensure that your extension code meets many of <a href="/guides/v2.1/coding-standards/bk-coding-standards.html">Magento’s coding standards</a>. It also has the added benefits of keeping your code clean and maintainable.</p>


		</div>
	</section>
<!-- /main content -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
    <div class="footer">
        <div id="magento-com">
            <div class="container">
                <div id="f-col-1">
                    <a href="http://www.magento.com/">
                        <img src="/i/magento_logo_footer.svg" alt="Magento Commerce" style="width: 190px;" />
                    </a>
                    <ul class="nav">
                        <li><a href="http://magento.com/company/about-us" title="Company">About Us</a></li>
                        <li><a href="http://magento.com/company/careers" title="Careers">Careers</a></li>
                        <li><a href="http://magento.com/company/press-room" title="Press Room">Press Room</a></li>
                        <li><a href="http://magento.com/company/leadership" title="Leadership">Leadership</a></li>
                    </ul>
                </div>
                <div id="f-col-2">
                    <div id="f-col-2-1">
                        <div class="contact-us">
                            <h4>Get in touch</h4>
                            <p>We'd like to hear from you! Call us, <br />send us an email or talk to sales.</p>
                            <a href="http://magento.com/company/contact-us" class="btn large copper">Contact Us</a>
                        </div>
                    </div>
                    <div id="f-col-2-2">
                        <div id="social-network">
                            <h4>Stay Connected</h4>
                            <ul>
                                <li><a class="btn-facebook" target="_blank" href="http://www.facebook.com/magento">Magento Facebook</a>
                                </li>
                                <li><a class="btn-twitter" target="_blank" href="https://twitter.com/magento">Magento Twitter</a></li>
                                <li><a class="btn-lnkdn" target="_blank" href="http://www.linkedin.com/groups?home=&amp;gid=146360&amp;trk=anet_ug_hm">Magento Linkedin</a></li>
                                <li><a class="btn-gplus" target="_blank" href="https://plus.google.com/+magento/posts">Magento Google+</a></li>
                                <li><a class="btn-youtube" target="_blank" href="http://www.youtube.com/user/magentocommerce/featured">Magento
                                    Youtube</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div id="f-col-3">
                    <div id="newsletter">
                        <h4>GET THE LATEST NEWS</h4>
                        <p>See Magento in the news, find press<br/> releases and resources for media.</p>
                        <div class="hold-form">
                            <div id="nws-notsubscribed">
                                <div id="sb-email" class="sb-email">
                                    <form method="post" enctype="application/x-www-form-urlencoded"
                                          action="//info2.magento.com/index.php/leadCapture/save" id="mktForm_1182" class="mktform"
                                          name="mktForm_1182" onsubmit="return validateForm();">
                                        <input class="fValidate['email'] input-topbg sb-email-input" name="Email" id="Email"
                                               placeholder="email address">
                                        <input type="hidden" name="formid" value="1182" />
                                        <button type="submit" class="sb-icon-submit btn outline">
                                            Sign Up
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="clearfix"></div>
                        <div class="email-invalid hide">
                            <p>Please submit a valid email.</p>
                        </div>
                        <div class="email-ty hide">
                            <p>Thank you for submitting your email.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="copyright">
        <div class="container">
            <div class="copyright-date">&copy; 2016 Magento, Inc. All rights reserved.</div>
            <div class="copyright-links">
                <ul class="nav">
                    <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                    <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                    <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark FAQ</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>
<script src="/common/js/jquery-ui.min.js"></script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<script src="/js/app.js"></script>

<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>

