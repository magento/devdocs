<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Configure Solr and Magento</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.1/config-guide/solr/solr-magento.html">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" data-toggle="dropdown">
		Magento 2.1
	</button>

	<ul class="dropdown-menu dropdown-menu-left">
	
		<li><a class="dropdown-item" href="/guides/v2.0/config-guide/solr/solr-magento.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/config-guide/solr/solr-magento.html">Magento 2.1</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
            <li><a href="/guides/v2.1/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.1/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.1/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/cloud/bk-cloud.html">Magento Enterprise Cloud Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.1/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.1/architecture/bk-architecture.html">Magento Architecture</a></li>
          <li class="leaf"><a href="/guides/v2.1/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="leaf"><a href="/guides/v2.1/extension-dev-guide/staging.html">Staging</a></li>
          
          <li class="first leaf"><a href="/guides/v2.1/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.1/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.1/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.1/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.1/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.1/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.1/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.1/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.1/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.1/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.1/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.1/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.1/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.1/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.1/howdoi/bk-how-do-i.html">How Tos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>





		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Configuration Guide</h4>






		<ul>

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/bk-config-guide.html">Introduction</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/secy/secy.html">Security settings</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/secy/secy-cron.html">Secure cron.php to run in a browser</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/secy/secy-xframe.html">X-Frame-Options header</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/secy/secy-headers.html">Prevent cache poisoning</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/bootstrap/magento-bootstrap.html">Magento application initialization and bootstrap</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/bootstrap/magento-how-to-set.html">Set the value of bootstrap parameters</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/bootstrap/magento-modes.html">About Magento modes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/bootstrap/mage-dirs.html">Customize base directory paths (MAGE_DIRS)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/bootstrap/mage-profiler.html">Enable profiling (MAGE_PROFILER)</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/cli/config-cli.html">Command line configuration</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands.html">Get started with command-line configuration</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-cache.html">Manage the cache</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-index.html">Manage the indexers</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-cron.html">Configure and run cron</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-compiler.html">Code compiler</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-mode.html">Set the Magento mode</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-urn.html">URN highlighter</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-depen.html">Dependency reports</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-i18n.html">Translation dictionaries and language packages</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-static-view.html">Deploy static view files</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-less-sass.html">Create symlinks to LESS files</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-test.html">Run unit tests</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-layout-xml.html">Convert layout XML files</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-perf-data.html">Generate data for performance testing</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-spt-util.html">Run the support utilities (Enterprise Edition only)</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/log/log-intro.html">Custom logging</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/log/log-magento.html">Magento logging in more detail</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/log/log-db.html">Example&mdash;logging database activity</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/config/config-magento.html">Magento configuration files</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/config/config-php.html">Magento's deployment configuration</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/config/config-files.html">Module configuration files</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/config/config-create.html">Create or extend configuration types</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/cache/caching.html">Caching</a></li>
									
								

									


								

									

										<li class="level3Parent " id="cache-types"><a href="#">Cache types</a>


									

								

									


											<li class="level3Child cache-types " data-menunode="cache-types"><a href="/guides/v2.1/config-guide/cache/caching_frontend-cache-types.html">Associate cache frontends with cache types</a>


									

								

									


											<li class="level3Child cache-types " data-menunode="cache-types"><a href="/guides/v2.1/config-guide/cache/caching_low-level.html">Low-level cache options</a>


									

								

									


											<li class="level3Child cache-types " data-menunode="cache-types"><a href="/guides/v2.1/config-guide/cache/caching-database.html">Database caching</a>


									

								

									


											<li class="level3Child cache-types " data-menunode="cache-types"><a href="/guides/v2.1/config-guide/cache/caching-cache-type.html">Create a cache type</a>


									

								

									

										<li class="level3Parent " id="cache-priv"><a href="#">Magento page caching</a>


									

								

									


											<li class="level3Child cache-priv " data-menunode="cache-priv"><a href="/guides/v2.1/config-guide/cache/cache-priv-over.html">Page caching overview</a>


									

								

									


											<li class="level3Child cache-priv " data-menunode="cache-priv"><a href="/guides/v2.1/config-guide/cache/cache-priv-priv.html">Public and private content</a>


									

								

									


											<li class="level3Child cache-priv " data-menunode="cache-priv"><a href="/guides/v2.1/config-guide/cache/cache-priv-context.html">HTTP context</a>


									

								

									


											<li class="level3Child cache-priv " data-menunode="cache-priv"><a href="/guides/v2.1/config-guide/cache/cache-priv-inval.html">Cache invalidation and private content versioning</a>


									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/redis/config-redis.html">Configure Redis</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/redis/redis-pg-cache.html">Use Redis for page caching</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/redis/redis-session.html">Use Redis for session storage</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/varnish/config-varnish.html">Configure and use Varnish</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/config-varnish-install.html">Install Varnish</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/config-varnish-configure.html">Configure Varnish and your web server</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/config-varnish-magento.html">Configure Magento to use Varnish</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/config-varnish-final.html">Final verification</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/use-varnish-cache.html">How Magento cache clearing works with Varnish</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/use-varnish-cache-how.html">How Varnish caching works</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/varnish/tshoot-varnish-503.html">Troubleshooting 503 (Backend Fetch Failed) errors</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/memcache/memcache.html">Use memcached for session storage</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/memcache/memcache_ubuntu.html">Install, configure, verify memcached on Ubuntu</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/memcache/memcache_centos.html">Install, configure, verify memcached on CentOS</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/memcache/memcache_magento.html">Configure Magento to use memcached</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/cron/custom-cron.html">Set up a custom cron job and cron group</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cron/custom-cron-ref.html">Custom cron job and cron group reference</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/cron/custom-cron-tut.html">Configure a custom cron job and cron group (tutorial)</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/db-profiler/db-profiler.html">Configure the database profiler</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/elasticsearch/es-overview.html">Install and configure Elasticsearch (Enterprise Edition only)</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/elasticsearch/es-config-nginx.html">Configure nginx and Elasticsearch</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/elasticsearch/es-config-apache.html">Configure Apache and Elasticsearch</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/elasticsearch/es-config-stopwords.html">Configure Elasticsearch stopwords</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/mq/rabbitmq-overview.html">Message Queues (Enterprise Edition only)</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/mq/config-mq.html">Configure message queues</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/mq/manage-mysql.html">MySQL message queues</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/mq/queue-migration.html">Migrate message queue configuration</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/solr/solr-overview.html">Install and configure Solr (Enterprise Edition only)</a></li>
									
								

									


								

									

									<li class="level-2  active "><a href="/guides/v2.1/config-guide/solr/solr-magento.html">Configure Solr and Magento</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/solr/solr-script.html">Prepare Solr for production</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/multi-master/multi-master.html">Split database performance solution (Enterprise Edition only)</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-master/multi-master_masterdb.html">Automatically configure master databases</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-master/multi-master_manual.html">Manually configure master databases</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-master/multi-master_verify.html">Verify split databases</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-master/multi-master_slavedb.html">Set up optional database replication</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/multi-site/ms_over.html">Multiple websites or stores</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-site/ms_websites.html">Set up multiple websites, stores, and store views in the Admin</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-site/ms_nginx.html">Set up multiple websites or stores with nginx (tutorial)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/multi-site/ms_apache.html">Set up multiple websites with Apache (tutorial)</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/sessions.html">How to locate your session files</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.1/config-guide/prod/prod.html">Deploy Magento to production</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/prod/prod_file-sys-perms.html">Magento ownership and permissions in development and production</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.1/config-guide/prod/prod_deploy.html">Deployment steps</a></li>

									

								




						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    
    

      <!-- Skip if root -->
      


      <!-- Get breadcrumb title. Insert snippet from configuration description to translates breadcrumb if language plugin is installed and YAML subset is set -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">
        <a property="item" typeof="WebPage" href="/guides/v2.1/config-guide/bk-config-guide.html"><span property="name">Configuration Guide</span></a>
        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      


      <!-- Get breadcrumb title. Insert snippet from configuration description to translates breadcrumb if language plugin is installed and YAML subset is set -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">
        <span property="name">Configure Solr and Magento</span>
        <meta property="position" content="2" />
      </li>

    

    </ol>

  </nav>


	
	<h1 class="page-heading">Configure Solr and Magento</h1>

  


</section>

			<p><img src="/common/images/ee-only_large.png" alt="This topic applies to Enterprise Edition only" /></p>

<p>The following topics discuss how to configure Solr to work with Magento EE:</p>

<ul>
  <li><a href="#config-solr-copy-config-files">Copy the Magento Solr configuration and start Solr</a></li>
  <li><a href="#config-solr-magento">Configure Magento to work with Solr</a></li>
</ul>

<h3 id="config-solr-copy-config-files">Copy the Magento Solr configuration and start Solr</h3>
<p>Magento comes packaged with a sample Solr configuration you can use and customize. To get started, you’ll copy the Magento configuration to Solr, replacing any existing files. After that you can start Solr and begin configuring Magento to work with it.</p>

<div class="bs-callout bs-callout-info" id="info">
	<p>The example Solr configuration is <em>not</em> intended to be used in a production site. It's for testing and development only. It's simple to use which makes it a great way for you to learn more about Solr.</p>
</div>

<ol>
  <li>
    <p>As a user with <code>root</code> privileges, enter the following commands in the order shown to copy over the Solr configuration with the one packaged with Magento EE:</p>

    <pre><code>cd &lt;your Solr install dir&gt;/example/solr
cp -R collection1 magento2
cd magento2
cp -R &lt;your Magento EE install dir&gt;/vendor/magento/module-solr/conf/* ./conf/
</code></pre>

    <p>For example, if Solr is installed in <code>/opt/solr/solr-4.10.4</code> and Magento EE is installed in <code>/var/www/magento/html/magento2ee</code>, enter:</p>

    <pre><code>cd /opt/solr/solr/solr-4.10.4/example/solr
cp -R collection1 magento2
cd magento2
cp -R /var/www/html/magento2ee/vendor/magento/module-solr/conf/* ./conf/
</code></pre>

    <div class="bs-callout bs-callout-info" id="info">
 <p>If you're prompted to overwrite files, try the command <code>\cp -R &lt;your Magento EE install dir&gt;/vendor/magento/module-solr/conf/* .</code></p>
</div>
  </li>
  <li>
    <p>After copying files, open the <code>&lt;your Solr install dir&gt;/example/solr/magento2/core.properties</code> file in a text editor and change:</p>

    <pre><code>name=collection1
</code></pre>

    <p>to</p>

    <pre><code>name=magento2
</code></pre>

    <p><a href="https://wiki.apache.org/solr/Core%20Discovery%20%284.4%20and%20beyond%29?action=show&amp;redirect=Core+Discovery+%284.3+and+beyond%29" target="_blank">More information about core.properties</a></p>
  </li>
  <li>
    <p>Save your changes to <code>core.properties</code> and exit the text editor.</p>
  </li>
  <li>
    <p><em>Task for Tomcat 6 with CentOS only</em></p>

    <p>If you’re using Tomcat 6 on CentOS, you must modify <code>&lt;your Solr install dir&gt;/example/solr/conf/solrconfig.xml</code></p>

    <p>Locate the following line:</p>

    <pre><code>&lt;dataDir&gt;${solr.data.dir:./solr/data}&lt;/dataDir&gt;
</code></pre>

    <p>Change it to:</p>

    <pre><code>&lt;dataDir&gt;${solr.data.dir:}&lt;/dataDir&gt;
</code></pre>
  </li>
  <li>
    <p>Start Solr.</p>

    <p>As a user with <code>root</code> privileges, enter the following command to start Solr:</p>

    <pre><code>cd &lt;your Solr install dir&gt;/example
java -jar start.jar
</code></pre>

    <div class="bs-callout bs-callout-warning">
        <p>This method for starting Solr is for convenience and testing purposes only. In a production environment, you should start and stop Solr using a script as discussed in <a href="/guides/v2.1/config-guide/solr/solr-script.html#solr-script">Script Solr startup and shutdown</a>.</p>
</div>
  </li>
</ol>

<h3 id="config-solr-magento">Configure Magento to work with Solr</h3>
<p>This section discusses how to configure Magento EE to use the Solr search engine.</p>

<p>To configure Magento to work with Solr:</p>

<ol>
  <li>Log in to the Magento Admin as an administrator.</li>
  <li>Click <strong>STORES</strong> &gt; <strong>Configuration</strong> &gt; CATALOG &gt; <strong>Catalog</strong> &gt; <strong>Catalog Search</strong>.</li>
  <li>In the right pane, expand <strong>Catalog Search</strong>.</li>
  <li>The following table shows the minimum amount of information to enter to test the connection to your Solr search engine. Leave all other values at their defaults.<br /></li>
</ol>
<table>
<col width="30%" />
<col width="70%" />
<tbody>
	<tr><th>Option</th>
	<th>Description</th>
</tr>
<tr>
	<td>Search Engine</td>
	<td>Click <strong>Solr</strong></td>
</tr>
<tr>
	<td>Solr Server Hostname</td>
	<td>Enter the fully qualified host name or IP address of the machine running Solr. (If Solr is running on the same host as Magento, you can optionally use <code>localhost</code>.)</td>
</tr>
<tr>
	<td>Solr Server Port</td>
	<td>Enter Solr's listen port. (The example Jetty servlet container uses 8983. The default for Tomcat is usually 8080.)</td>
</tr>
<tr>
	<td>Solr Server Username</td>
	<td><em>Optional.</em> Enter a user name for <a href="http://wiki.apache.org/solr/SolrSecurity" target="_blank">Solr authentication</a>, if desired.</td>
</tr>
<tr>
	<td>Solr Server Password</td>
	<td><em>Optional.</em> Enter the user's password, if required.</td>
</tr>
<tr>
	<td>Solr Server Timeout</td>
	<td>Enter a connection timeout value, in seconds.</td>
</tr>
<tr>
	<td>Solr Server Path</td>
	<td><p>Specifies the path and name of the Solr web application. The path used by the example Solr configuration is <code>solr/magento2</code>.</p>
	<p>If you customized Solr, the value you enter in this field must exactly match the value of <code>webapp_name=&lt;value&gt;</code> in <code>&lt;your Solr install dir&gt;/example/solr/magento2/conf/conf/scripts.conf</code></p>.
</td>
</tr>
</tbody>
</table>

<p>The following figure shows an example.
<img src="/common/images/solr_config-admin.png" alt="Configure Magento to use Solr" /></p>

<p>Click <strong>Test Connection</strong>.</p>

<p>The button changes as follows.</p>

<table>
<col width="20%" />
<col width="80%" />
<tbody>
<tr>
	<th>Button state</th>
	<th>Meaning</th>
</tr>
<tr>
	<td><img src="/common/images/solr_test-success.png" width="140px" height="17px" /></td>
	<td>The test connection succeeded. Click <strong>Save Config</strong> and continue with the next section.</td>
</tr>
<tr>
 <td><img src="/common/images/solr_test-fail.png" width="160px" height="16px" /></td>
 <td><p>The test connection failed. Try the following:</p>
	<ul><li>Examine the command window in which you started Solr for stack traces and exceptions. You must resolve those before you continue.<br />
	In particular, make sure you started Solr as a user with <code>root</code> privileges.</li>
	<li>Verify that <a href="http://php.net/manual/en/filesystem.configuration.php" target="_blank"><code>allow_url_fopen = On</code></a> is present in your server's <code>php.ini</code>.<br />
	If you are not sure where <code>php.ini</code> is located, you can <a href="http://kb.mediatemple.net/questions/764/How+can+I+create+a+phpinfo.php+page%3F#gs" target="_blank">create a <code>phpinfo.php</code> page</a> to locate it.</li>
	<li>Make sure that <a href="/guides/v2.1/config-guide/solr/solr-overview.html#prereq-secy">UNIX firewall and SELinux</a> are both disabled, or set up rules to enable Solr and Magento to communicate with each other.</li>
	<li>Verify the value of the <strong>Solr Server Hostname</strong> field. Make sure the server is available. You can try the server's IP address instead.</li>
	<li>Use the command <code>netstat -an | grep <em>listen-port</em></code> command to verify that the port specified in the <strong>Solr Server Port</strong> field is not being used by another process.<br />
	For example, to see if Solr is running on its default port, use the following command:
	<pre>netstat -an | grep 8983</pre>
	If Solr is running on port 8983, it displays similar to the following:
	<pre>tcp        0      0 :::8983            :::*          LISTEN</pre></li>
	<li>If Solr is installed on a remote machine, use the <code>ping</code> command to verify that machine is reachable from your Magento server.</li></ul>
	</td>
</tr>
</tbody>
</table>

<p>Only after the test connection succeeds, click <strong>Save Config</strong> and continue with the next section.</p>

<h2 id="solr-reindex">Reindexing catalog search and refreshing the full page cache</h2>
<p>After you change Magento’s Solr configuration, you must reindex the catalog search index and refresh the full page using the Admin or command line.</p>

<p>To refresh the cache using the Admin:</p>

<ol>
  <li>In the Admin, click <strong>System</strong> &gt; <strong>Cache Management</strong>.</li>
  <li>Select the check box next to <strong>Page Cache</strong>.</li>
  <li>From the <strong>Actions</strong> list in the upper right, click <strong>Refresh</strong>.<br />
    The following figure shows an example.<br />
    <img src="/common/images/solr_refresh-cache.png" width="600px" /></li>
</ol>

<p>To clean the cache using the command line, use the <a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-cache.html#config-cli-subcommands-cache-clean"><code>magento cache:clean</code></a> command.</p>

<p>To reindex using the command line:</p>

<ol>
  <li>Log in to your Magento server as, or switch to, the <a href="/guides/v2.1/install-gde/prereq/file-sys-perms-over.html">Magento file system owner</a>.</li>
  <li>
    <p>Enter the following command to reindex all indexers:</p>

    <pre><code>php &lt;your Magento install dir&gt;/bin magento indexer:reindex
</code></pre>

    <p>Enter the following command to reindex the catalog search index only:</p>

    <pre><code>php &lt;your Magento install dir&gt;/bin magento indexer:reindex catalogsearch_fulltext
</code></pre>
  </li>
  <li>Wait while the indexers are reindexed.</li>
</ol>

<div class="bs-callout bs-callout-info" id="info">
	<p>Unlike the cache, indexers are updated by a cron job. Make sure <a href="/guides/v2.1/config-guide/cli/config-cli-subcommands-cron.html">cron is enabled</a> before you start using Solr.</p>
</div>

<h2 id="solr-verify">Verify Solr is working</h2>
<p>To verify Solr works, go to the storefront and search for any term (including one that won’t return results) and look for the search in the Solr command window.</p>

<p>The following figure shows an example of a storefront search.</p>

<p><img src="/common/images/solr_verify.png" width="750px" alt="Verify Solr works by searching the storefront" /></p>

<p>The following excerpt from the Solr command window shows the same search:</p>

<pre><code>497008 [qtp2032251042-13] INFO  org.apache.solr.core.SolrCore  – [magento2] webapp=/solr path=/select params={facet.field={!key%3Dcategory_bucket}category_ids&amp;json.nl=flat&amp;fl=id,score&amp;start=0&amp;fq=store_id:1&amp;rows=10000&amp;q=sku:((hello*+hello))+OR+fulltext_en:((hello*+hello))+OR+attr_color_en:((hello*+hello))+OR+attr_description_en:((hello*+hello))+OR+attr_manufacturer_en:((hello*+hello))+OR+attr_name_en:((hello*+hello))+OR+attr_short_description_en:((hello*+hello))+OR+attr_status_en:((hello*+hello))+OR+attr_tax_class_id_en:((hello*+hello))&amp;f.category_ids.facet.mincount=1&amp;omitHeader=true&amp;stats=true&amp;wt=json&amp;facet=true&amp;stats.field=price_0_1} hits=0 status=0 QTime=58
</code></pre>

<h4 id="next-step">Next step</h4>
<p><a href="/guides/v2.1/config-guide/solr/solr-script.html">Prepare Solr for production</a></p>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

			

			
			 <div class="github-link">
				 <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/config-guide/solr/solr-magento.md" target="_blank">
					 Edit this page on GitHub
				 </a>
			 </div>
			

			<div class="new-issue">
				<a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.1/config-guide/solr/solr-magento.html" target="_blank">Give us feedback</a>
			</div>

		</div>

	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
				<li><a href="/guides/v2.1/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.1/release-notes/bk-release-notes.html">Release Notes</a></li>
				<li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
      </ul>
    </div>

		<div class="copyright-date">&copy; 2016 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

