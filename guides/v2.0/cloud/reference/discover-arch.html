<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Pro architecture | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.0/cloud/reference/discover-arch.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.0/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/reference/discover-arch.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/reference/discover-arch.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/reference/discover-arch.html">Magento 2.2 RC</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.0/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Magento Commerce (Cloud) Guide</h4>





		<ul>

		

		

				

			

				

			

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/bk-cloud.html">Welcome to Magento Commerce (Cloud)</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/basic-information/starter-architecture.html">Starter architecture</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.0/cloud/reference/discover-arch.html">Pro architecture</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/welcome/discover-workflow.html">Pro develop and deploy workflow</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-project-owner.html">Prepare project environments</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/requirements/cloud-requirements.html">Technologies and requirements</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/cloud-composer.html">Composer</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-integrate-github.html">GitHub</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/basic-information/cloud-fastly.html">Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/new-relic.html">New Relic APM</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Blackfire Profiler</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes.html">Magento Enterprise Cloud Edition Release Notes</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes101.4.html">magento-cloud-configuration release 101.4.x Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes2.1.4.html">Magento Enterprise Cloud Edition 2.1.4 and 2.0.12 Release Notes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes2.1.3.html">Magento Enterprise Cloud Edition 2.1.3 and 2.0.11 Release Notes</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/access-acct/first-time-setup.html">First-time development setup</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-workspace.html">Set up a project and dev workspace</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-workspace-ssh.html">Enable SSH keys</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-setup-env-2_clone.html">Clone the project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-setup-env-keys.html">Set up Magento authentication keys</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-setup-env-env.html">Branch an environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-setup-env-install.html">Install Magento</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/first-time-deploy.html">First time deployment</a></li>

									

								

									

										<li class="level3Parent " id="import"><a href="#">Import an existing Magento project</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>


									

								

									


											<li class="level3Child import " data-menunode="import"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/configure/configuration-overview.html">Configure Magento Commerce</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/fastly.html">Set up Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/configure/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-multi-sites.html">Set up multiple websites or stores</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a></li>

									

								

									

										<li class="level3Parent " id="routes"><a href="#">Configure routes</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-conf-files_routes.html">routes.yaml</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-cache.html">Caching</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-redir.html">Redirects</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-ssi.html">Server side includes</a>


									

								

									

										<li class="level3Parent " id="services"><a href="#">Configure services</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services.html">services.yaml</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-mysql.html">Set up the MySQL service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-redis.html">Set up the Redis service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-rabbit.html">Set up the RabbitMQ service</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/project/projects.html">Manage your project</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-start.html">Get started with a project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/user-admin.html">Manage users</a></li>

									

								

									

										<li class="level3Parent " id="patch-upgrade"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade " data-menunode="patch-upgrade"><a href="/guides/v2.0/cloud/project/project-upgrade.html">Upgrade and test Magento Commerce</a>


									

								

									


											<li class="level3Child patch-upgrade " data-menunode="patch-upgrade"><a href="/guides/v2.0/cloud/project/project-patch.html">Patch and test Magento Commerce</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-basic.html">Basic project information</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-branch.html">Manage branches</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-webint-snap.html">Snapshots and Backup management</a></li>

									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-solr.html">Set up the solr service</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-priv-repos.html">Pull code from a private Git repository</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/env/environments.html">Manage your environments</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-start.html">Get started with an environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH into your environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a></li>

									

								

									

										<li class="level3Parent " id="vars"><a href="#">Environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_over.html">Overview of environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_magento.html">Magento application environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_cloud.html">Magento Enterprise Cloud Edition environment variables</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/live/stage-prod-live.html">Deploy your store</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/reference/discover-deploy.html">Deployment process</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/deploy/continuous-deployment.html">Continuous integration</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-prot.html">Protective block</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-sanity-check.html">Build and deploy on local</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/stage-prod-migrate.html">Migrate and deploy</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/stage-prod-test.html">Test deployment</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/live/live.html">Go live and launch</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/go-live-checklist.html">Go live checklist</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/launch-steps.html">Launch steps</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/trouble/trouble.html">Troubleshooting</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/trouble.html">Troubleshoot deployment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/environments-logs.html">View logs for troubleshooting</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_fastly.html">Troubleshoot Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-error-HTML-minification.html">Resolve issues with HTML minification</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/robots-sitemap.html">Add sitemap and robots.txt</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble-broken-branch.html">Resolve a broken branch</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">How To</span></li>

									


								

									

										<li class="level3Parent " id="patch-upgrade2"><a href="#">Test a Magento patch or upgrade</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.0/cloud/howtos/upgrade-magento.html">Upgrade and test Magento Commerce</a>


									

								

									


											<li class="level3Child patch-upgrade2 " data-menunode="patch-upgrade2"><a href="/guides/v2.0/cloud/howtos/patch-magento.html">Patch and test Magento Commerce</a>


									

								

									

										<li class="level3Parent " id="update-extensions"><a href="#">Install and update extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/install-components.html">Install extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/update-components.html">Update extensions</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/custom-theme.html">Install a theme</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/sample-data.html">Install optional sample data</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/debug.html">Run a PHP debugger</a></li>

									

								

								
								



						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.0/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.0/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Commerce (Cloud)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Pro architecture</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Pro architecture</h1>

  


</section>


			<p>Magento Commerce (Cloud) Pro <em>projects</em> provide three complete environments to develop, test, and launch your store. These environments are read-only, accepting deployed code changes from Git branches pushed from your local workspace. You can use any development and branching methodology you like.</p>

<p>All of your code is contained in the Magento Commerce (Cloud) Starter project. The project is your Magento store code, extensions, and integrations in a <code class="highlighter-rouge">master</code> Git branch. Each project supports up to eight active Integration <em>environments</em> including <code class="highlighter-rouge">master</code> with an associated active Git branch in PAAS (Platform as a Service) containers. These containers are deployed inside highly restricted containers on a grid of servers.</p>

<p>Pro also provides a dedicated Infrastructure-as-a-Service (IaaS) for Production and Staging. You deploy the Integration <code class="highlighter-rouge">master</code> Git branch to these dedicated environments. Production includes a three-node high availability infrastructure to ensure your site is always available. When the project is deployed into Production, monitoring and failover happen automatically behind the scenes.</p>

<p>All environments are read-only, accepting deployed code changes from Git branches pushed from your local workspace.</p>

<p>You can use any development and branching methodology you like.</p>

<p><img src="/common/images/cloud_pro-branch-architecture.png" alt="High-level view of Pro architecture flow" /></p>

<h2 id="cloud-arch-int">Integration environment</h2>
<p>Developers use the Integration environment to develop, deploy, and test the Magento application, custom code, extensions, and services. This environment is a Platform-as-a-Servie (PaaS) providing up to eight active environments on a grid for eight active Git branches. Each Integration environment matches the name of the branch and includes a web server, database, and configured services to fully test your site.</p>

<p>The Integration environments run in a Linux container (LXC) on a grid of servers as a PAAS (Platform as a Service). You can have up to eight active Git branches with an associated environments to development and test code. You can have an unlimited number of inactive Git branches to store code. To access, view, and test inactive branches, you must activate them.</p>

<p>This environment does not support all services. For example, Fastly is not accessible in Integration.</p>

<p>The process for developing in Integration requires the following process:</p>

<ul>
  <li>Clone the <code class="highlighter-rouge">master</code> branch from the Project to your local</li>
  <li>Branch and develop in a new Git branch on your local workspace</li>
  <li>Push code to Git that builds and deploys to an Integration environment for testing</li>
</ul>

<p>Additional sections in this guide provide instructions and walk-throughs for setting up your <a href="/guides/v2.0/cloud/before/before-workspace.html">local workspace</a>, working with Git branches, and <a href="/guides/v2.0/cloud/live/stage-prod-live.html">deploying code</a>.</p>

<h2 id="cloud-arch-stage">Staging environment</h2>
<p>The Staging environment provides a near-Production environment to test your site. This environment includes all services used in Production including Fastly, New Relic, Blackfire, and search. All code in Staging is read-only, requiring deploys of Git repositories. This environment shares the same dedicated server with Production.</p>

<p>Additional sections in this guide provide instructions and walk-throughs for final code deployments and testing production level interactions in a safe Staging environment. For best performance and feature testing, replicate your Production database into Staging.</p>

<p>We walk you through <a href="/guides/v2.0/cloud/live/stage-prod-live.html">deploying to Staging</a> and <a href="/guides/v2.0/cloud/live/stage-prod-test.html">testing your store(s)</a> requirements and processes.</p>

<p>We highly recommend fully testing every merchant and customer interaction in Staging prior to pushing to Production.</p>

<h2 id="cloud-arch-prod">Production environment</h2>
<p>The Production environment runs your public-facing Magento single and multisite storefronts. This environment include triple-redundant High Availability nodes for continuous access and failover protection for your customers. This system is read-only, requiring deployment across the architecture from Integration to Staging and finally Production.</p>

<p>We walk you through <a href="/guides/v2.0/cloud/live/stage-prod-live.html">deploying to Production</a> and <a href="/guides/v2.0/cloud/live/live.html">Go Live</a> requirements and processes.</p>

<p>We highly recommend fully testing in Staging prior to pushing to Production.</p>

<h3 id="advantage-of-redundant-hardware">Advantage of redundant hardware</h3>
<p>Rather than running a traditional active-passive master or master-slave setup, Magento Commerce (Cloud) runs a triple-redundant multimaster where all three instances accept reads and writes. This architecture offers zero downtime when scaling, and also provides guaranteed transactional integrity.</p>

<p>Because of our unique triple-redundant hardware, we can provide you with a set of three gateway servers. Most external services enable you to <span term-uuid="34f8f61d-2b48-4628-be06-aaa6e32ddc1f" class="glossary-term" data-toggle="popover">whitelist</span> multiple IPs, so having more than one fixed IP isnâ€™t usually a problem.</p>

<p>These three gateways map to the three servers in your Production cluster and retain permanent addresses. It is fully redundant and highly available at every level:</p>

<ul>
  <li>DNS</li>
  <li>Content Delivery Network (CDN)</li>
  <li>Elastic load balancer (ELB)</li>
  <li>Three-server cluster comprising all Magento services, including the database and web server.</li>
</ul>

<h3 id="backup-and-disaster-recovery">Backup and disaster recovery</h3>
<p>We automatically back up your production system every six hours. Each production system cluster is designed to withstand the loss of an entire server and all of the services running on it.</p>

<p>The coordinating agent that monitors your production system:</p>

<ul>
  <li>Detects failures at the service level (for example, MySQL)</li>
  <li>Fully automaties and coordinates recovery where an automated recovery is possible</li>
</ul>

<h3 id="production-technology-stack">Production technology stack</h3>
<p>The Production environment has three VMs behind an Elastic Load Balancer managed by an HAProxy per VM. Each VM includes the following technologies:</p>

<ul>
  <li>Fastly for http caching and CDN</li>
  <li>Nginx web server speaking to PHP-FPM, one instance with multiple workers</li>
  <li>GlusterFS file server for managing all static file deployments and syncs with four directories mounted: <code class="highlighter-rouge">var</code>, <code class="highlighter-rouge">pub/media</code>, <code class="highlighter-rouge">pub/static</code>, and <code class="highlighter-rouge">app/etc</code></li>
  <li>Redis server, one per VM with only one active and the other two as replicas</li>
  <li>Elasticsearch for searching for Magento Commerce (Cloud) 2.1 and later</li>
  <li>Solr search is supported for Magento Commerce (Cloud) 2.0</li>
  <li>Galera database cluster with a MariaDB MySQL database per node with an auto-increment setting of 3 for unique IDs across every database</li>
</ul>

<p>The following figure shows the technology used in the Production environment:</p>

<p><img src="/common/images/cloud_stack-diagram.png" alt="Production technology stack" /></p>

<p>Magento Commerce seamlessly scales from the smallest six CPU cluster with 11.25GB of RAM to the largest 96 CPU cluster with 180GB of RAM. Our triple-redundant architecture means that upscaling can be conducted swiftly and without downtime. When upscaling, we rotate each of the three instances to upgrade without downtime of your site.</p>

<p>In addition, extra web servers can be added to an existing cluster should the constriction be at the <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span> level rather than the database level. This provides <a href="https://en.wikipedia.org/wiki/Scalability#Horizontal_and_vertical_scaling" target="_blank"><em>horizontal scaling</em></a> to complement the vertical scaling provided by extra CPUs on the database level.</p>

<h2 id="differences-in-environments">Differences in environments</h2>
<p>The following table details the differences:</p>

<table>
    <tbody>

    <tr>
        <td class="blank"></td>
        <th>Integration</th>
        <th>Staging</th>
        <th>Production</th>
    </tr>
    <tr><td>Managed by a UI</td>
    <td>Yes</td>
    <td>No</td>
    <td>No</td>
    </tr>
    <tr><td>Uses <code>.yaml</code> files for configuration</td>
    <td>Yes</td>
    <td>Requires support ticket for deployment settings</td>
    <td>Requires support ticket for deployment settings</td>
    </tr>
    <tr><td>Multiple environments</td>
    <td>Yes</td>
    <td>No (master only)</td>
    <td>No (master only)</td>
    </tr>
    <tr><td>Runs on dedicated hardware</td>
    <td>No</td>
    <td>Yes</td>
    <td>Yes</td>
    </tr>

</tbody>
</table>

<h2 id="cloud-arch-services">Services</h2>
<p>Magento Commerce (Cloud) currently supports the following services: PHP, MySQL (MariaDB), Solr (Magento 2.0.x), Elasticsearch (Magento 2.1.x and later), Redis, and RabbitMQ.</p>

<p>Each service runs in its own secure container. containers are managed together in the project. Some services are built-in, such as the following:</p>

<ul>
  <li>HTTP router (handling incoming requests, but also caching and redirects)</li>
  <li>PHP application server</li>
  <li>Git</li>
  <li>Secure Shell (SSH)</li>
</ul>

<p>You can even have multiple applications running in the same project. Building a microservice oriented architecture with Magento Commerce is as easy as managing a monolithic application.</p>

<h2 id="cloud-arch-software">Software versions</h2>
<p>Magento Commerce (Cloud) uses:</p>

<ul>
  <li>Operating system: Debian GNU/Linux 8 (jessie)</li>
  <li>Web server: <span term-uuid="b14ef3d8-51fd-48fe-94df-ed069afb2cdc" class="glossary-term" data-toggle="popover">nginx</span> 1.8</li>
</ul>

<p>This software is <em>not</em> upgradable but versions for the following software is configurable:</p>

<ul>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">PHP</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services-mysql.html">MySQL</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services-solr.html">Solr</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services-redis.html">Redis</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services-rabbit.html">RabbitMQ</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services-elastic.html">Elasticsearch</a></li>
</ul>

<p>For Staging and Production, you will use Fastly for CDN and caching. We recommend installing Fastly module 1.2.27 or later. For details, see <a href="/guides/v2.0/cloud/basic-information/cloud-fastly.html">Fastly in Cloud</a>.</p>

<h2 id="develop">Prepare for development</h2>
<p>To branch and develop your Magento store:</p>

<ul>
  <li>Set up your local environment</li>
  <li>Clone the <code class="highlighter-rouge">master</code> branch from the Project to your local</li>
  <li>Branch and develop in a new Git branch on your local workspace</li>
  <li>Push code to Git that builds and deploys to an environment for testing</li>
</ul>

<p>Additional sections in this guide provide instructions and walk-throughs for setting up your <a href="/guides/v2.0/cloud/before/before-workspace.html">local workspace</a>, working with Git branches, and <a href="/guides/v2.0/cloud/live/stage-prod-live.html">deploying code</a>.</p>

<p>We walk you through the entire process from <a href="/guides/v2.0/cloud/live/stage-prod-live.html">deployment</a> to <a href="/guides/v2.0/cloud/live/live.html">going live</a> requirements and processes.</p>

<h4 id="related-topics">Related topics</h4>
<ul>
  <li><a href="/guides/v2.0/cloud/welcome/discover-workflow.html">Pro Develop and Deploy Workflow</a></li>
  <li><a href="/guides/v2.0/cloud/reference/discover-deploy.html">Deployment process</a></li>
  <li><a href="/guides/v2.0/cloud/requirements/cloud-requirements.html">Magento Commerce requirements</a></li>
</ul>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/cloud/reference/discover-arch.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.0/cloud/reference/discover-arch.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

