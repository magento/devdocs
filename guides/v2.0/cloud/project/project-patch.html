<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Patch Magento Commerce (Cloud) | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>



<!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-ML6GZCH':true});</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66243208-1', 'auto');
    ga('require', 'GTM-ML6GZCH');
    ga('send', 'pageview');
</script>

<!-- Hotjar Tracking Code for http://devdocs.magento.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:806243,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<!-- heap analytics -->
<script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("2619540280");
</script>

<script src="//assets.adobedtm.com/98fab992275ef6366cc65f57f86b1e895a66c912/satelliteLib-f90f1129109ea4b2101512675a2769865aa7ea5b.js"></script>




	<link rel="canonical" href="https://devdocs.magento.com/guides/v2.0/cloud/project/project-patch.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <button id="menu-btn" class="menu-trigger menu-icon" aria-haspopup="true" aria-controls="nav-main"></button>
  </div>

  <div class="nav-container">

    <a class="logo" href="/guides/v2.0/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
		
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/cloud/project/project-patch.html">Magento 2.0</a></li>
		
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/cloud/project/project-patch.html">Magento 2.1</a></li>
		
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/cloud/project/project-patch.html">Magento 2.2</a></li>
		
		<li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/cloud/project/project-patch.html">Magento 2.3 Beta</a></li>
		
  </ul>
</div>


      <!-- Main Navigation -->


<ul class="nav-main" role="menubar">




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Cloud</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        <ul>
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/bk-cloud.html">Cloud Guide</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/architecture/cloud-architecture.html">Cloud Architecture</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/setup/first-time-setup.html">Local Development</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/env/environments.html">Configure Environments</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a>
  </li>



          
        
          
          
            





          
        
      </ul>
      

      </div>
    

  </li>
  




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        <ul>
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a>
  </li>



          
        
          
          
            





          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a>
  </li>



          
        
          
          
            





          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/magento-release-information.html">Release Information</a>
  </li>



          
        
      </ul>
      

      </div>
    

  </li>
  




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        
        
          
          
            <div class="nav-section">
              <div class="nav-section-title">Backend</div>
              <ul>
              
                





  
  
  
  <li>
    <a href="/guides/v2.0/architecture/bk-architecture.html">Architecture</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a>
  </li>



              
              </ul>
            </div>
          
        
          
          
            <div class="nav-section">
              <div class="nav-section-title">Frontend</div>
              <ul>
              
                





  
  
  
  <li>
    <a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a>
  </li>



              
                





              
                





  
  
  
  <li>
    <a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a>
  </li>



              
                







              
              </ul>
            </div>
          
        
          
          
            <div class="nav-section">
              <div class="nav-section-title">API</div>
              <ul>
              
                





  
  
  
  <li>
    <a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a>
  </li>



              
                





  
  
  
  <li>
    <a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a>
  </li>



              
                







              
                





              
                





              
              </ul>
            </div>
          
        
      
      

      </div>
    

  </li>
  




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        <ul>
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a>
  </li>



          
        
          
          
            







          
        
          
          
            







          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a>
  </li>



          
        
      </ul>
      

      </div>
    

  </li>
  




  
  <li class="nav-main-separator"></li>
  




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        <ul>
        
          
          
            





          
        
          
          
            





          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Checkout</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="http://omsdocs.magento.com/en/">Order Management</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payment Integrations</a>
  </li>



          
        
          
          
            





          
        
      </ul>
      

      </div>
    

  </li>
  




  
  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span>

    
      <div class="nav-popup" role="menu" aria-hidden="true">

      

      
        <ul>
        
          
          
            





          
        
          
          
            





          
        
          
          
            





  
  
  
  <li>
    <a href="/guides/v2.0/howdoi/checkout/checkout_overview.html">Customize Checkout</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/community/resources/support.html">Magento Support</a>
  </li>



          
        
          
          
            





  
  
  
  <li>
    <a href="/videos/">Video Tutorials</a>
  </li>



          
        
      </ul>
      

      </div>
    

  </li>
  



</ul><!-- /.nav-main -->
    </div>

    <div class="search-btn">
      <button class="search-trigger search-icon"></button>
    </div>

    <form class="quick-search" action="/guides/v2.0/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <button class="quick-search-close">&times;</button>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		
<div class="message-banner">
  <a href="http://devdocs.magento.com/guides/v2.0/release-notes/ReleaseNotes2.0.18CE.html" target="_blank">Magento 2.0.18</a> is the final 2.0.x release. After March 2018, Magento 2.0.x will no longer receive security patches, quality fixes, or documentation updates.</br> To maintain your site's performance, security, and PCI compliance, upgrade to the latest version of Magento.
</div>





		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">

		
		
		<h4 class="guide-title"></h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce Cloud guide</a>
  

  
    <ul>
      
         





      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/architecture/cloud-architecture.html">Architecture</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/basic-information/starter-architecture.html">Starter architecture</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/architecture/pro-architecture.html">Pro architecture</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/architecture/pro-architecture-legacy.html">Pro architecture (legacy)</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/requirements/cloud-requirements.html">Technologies and requirements</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/reference/cloud-composer.html">Composer</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/reference/git-integration.html">Git</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/bitbucket-integration.html">Bitbucket integration</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-integrate-github.html">GitHub integration</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH and sFTP</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/new-relic.html">New Relic APM</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Blackfire.io</a>
  

  
</li>



      
         





      
    </ul>
  
</li>



		    
		    	





		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/setup/first-time-setup.html">Local development setup</a>
  

  
    <ul>
      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-workspace.html">Prepare for manual setup</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-setup-env-2_clone.html">Clone and branch the project</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/before/before-setup-env-install.html">Install Magento</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/setup/first-time-deploy.html">First time deployment</a>
  

  
</li>



      
    </ul>
  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/howtos/sample-data.html">Optional - Install sample data</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/howtos/debug.html">Optional - Configure Xdebug</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/setup/first-time-setup-import-first-steps.html">Import existing code into a project</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/setup/first-time-setup-import-prepare.html">Prepare your existing Magento Commerce system</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/setup/first-time-setup-import-import.html">Import Magento Commerce into Magento Commerce (Cloud)</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/configure/configuration-overview.html">Configure your store</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/configure/configure-best-practices.html">Best practices for store configuration</a>
  

  
</li>



      
         





      
         







      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/howtos/install-components.html">Install, manage, and upgrade modules</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/howtos/custom-theme.html">Install a theme</a>
  

  
</li>



      
         







      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/cloud-fastly.html">Configure Fastly</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/configure-fastly.html">Set up Fastly</a>
  

  
</li>



      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/fastly-vcl-whitelist.html">Custom whitelist VCL</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/fastly-vcl-blacklist.html">Custom blacklist VCL</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/fastly-vcl-wordpress.html">Custom redirect to WordPress VCL</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/fastly-vcl-badreferer.html">Custom block bad referer VCL</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/cdn/trouble-fastly.html">Fastly troubleshooting</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/env/environments.html">Configure environments</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">Application</a>
  

  
</li>



      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/env/variables-intro.html">Environment variables</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/env/environment-vars_magento.html">ADMIN variables</a>
  

  
</li>



      
         





      
         







      
         





      
         





      
         





      
    </ul>
  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_routes.html">Routes</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-routes-more-cache.html">Caching</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-routes-more-redir.html">Redirects</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-routes-more-ssi.html">Server side includes</a>
  

  
</li>



      
    </ul>
  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_services.html">Services</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_services-solr.html">Set up Solr service</a>
  

  
</li>



      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a>
  

  
</li>



      
    </ul>
  
</li>



      
    </ul>
  
</li>



		    
		    	







		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/projects.html">Manage your project</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-webint-basic.html">Configure your project</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-start.html">Project structure</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/user-admin.html">Create and manage users</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/env/environments-start.html">Manage branches with the CLI</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-webint-snap.html">Snapshots and backup management</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/stage-prod-live.html">Deploy your store</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/reference/discover-deploy.html">Deployment process</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/live-prot.html">Protective block</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/live-sanity-check.html">Build and deploy on local</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/stage-prod-migrate.html">Deploy code and migrate static files and data</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/stage-prod-test.html">Test deployment</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/live.html">Go live and launch</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/go-live-checklist.html">Go live checklist</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/live/launch-steps.html">Launch steps</a>
  

  
</li>



      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble.html">Troubleshooting</a>
  

  
    <ul>
      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/troubleshoot-deployment.html">Troubleshoot deployment</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/environments-logs.html">View logs for troubleshooting</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/redis-troubleshooting.html">Redis troubleshooting</a>
  

  
</li>



      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a>
  

  
</li>



      
         





      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/site-availability.html">Site availability</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/robots-sitemap.html">Add site map and search engine robots</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/trouble/theme-troubleshooting.html">Theme troubleshooting</a>
  

  
</li>



      
         





      
    </ul>
  
</li>



		    
		    	





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-upgrade-parent.html">Upgrades and patches</a>
  

  
    <ul>
      
         





      
         





      
         





      
         





  
  
  

  
  
<li class="active ">
  
    <a href="/guides/v2.0/cloud/project/project-patch.html">Apply custom patches</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <a href="/guides/v2.0/cloud/project/project-upgrade.html">Upgrade Magento version</a>
  

  
</li>



      
         





  
  
  

  
  
<li class=" ">
  
    <span>Upgrade from 2.0.4 (Cloud)</span>
  

  
</li>



      
    </ul>
  
</li>



		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->

	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

	

	

	<h1 class="page-heading">Patch Magento Commerce (Cloud)</h1>

  


</section>

			<p>You can apply patches as they are available to update Magento Commerce Cloud. We recommend using a new active branch and Integration environment for applying and testing the patch prior to fully deploying across all environments. We strongly recommend you test patches locally so you can identify and resolve any issues.</p>

<p>When you perform a Magento Commerce Cloud upgrade, you automatically upgrade with patches and hotfixes through the <code class="highlighter-rouge">composer update</code> command. To upgrade and test Magento Commerce Cloud (including patches and hotfixes), see <a href="/guides/v2.0/cloud/project/project-upgrade.html">Upgrade Magento Commerce (Cloud)</a>.</p>

<p>To check for patches, you can check the <code class="highlighter-rouge">vendor/magento/magento-cloud-configuration/patches</code> folder.</p>

<p class="bs-callout bs-callout-info">We recommend installing full Magento Commerce Cloud upgrades for important security updates. Full upgrades include all associated patches and hotfixes.</p>

<p>There are two types of patches:</p>

<ul>
  <li>
    <p><a href="#cloud-patch-gen">General patches</a></p>

    <p>These patches are provided for all Magento Commerce customers in a GitHub repository that’s referenced in your <code class="highlighter-rouge">composer.json</code>. We apply these patches automatically during the build phase.</p>

    <p>To install general patches, use <code class="highlighter-rouge">composer update</code>, test your system, and push the patches to the remote server.</p>
  </li>
  <li>
    <p><a href="#cloud-patch-custom">Custom patches</a></p>

    <p>Custom patches can be provided by Magento to address a specific issue you raised in a Support ticket. Third-party extension developers can also provide a custom patch.</p>

    <p>Copy custom patches to the <code class="highlighter-rouge">m2-hotfixes</code> directory and test them on your locally. After successfully testing them, push the patches to the remote server.</p>
  </li>
</ul>

<p class="bs-callout bs-callout-warning">Always apply and test a patch your local system in an active branch. You can push and test in an Integration environment prior to deploying across all environments. All environments are read-only. You must update locally and push the Git branch to deploy across all environments.</p>

<p>Our patches are Composer driven. For more information on Composer, see <a href="/guides/v2.0/cloud/reference/cloud-composer.html">Composer in Cloud</a>. When you perform a Magento Commerce Cloud upgrade, you automatically upgrade with patches and hotfixes through the <code class="highlighter-rouge">composer update</code> command.</p>

<h2 id="variable">Verify or set the ADMIN_EMAIL variable</h2>

<p>The environment variable <code class="highlighter-rouge">ADMIN_EMAIL</code> is required for upgrading and patching. This email is used for sending password reset requests and verified during when updating Magento Commerce Cloud. See <a href="/guides/v2.0/cloud/project/project-webint-basic.html#project-conf-env-var">Set environment and project variables</a>.</p>

<h2 id="backup-db">Back up the database</h2>

<p>Back up your Integration environment database and code:</p>

<ol>
  <li>
    <p>Enter the following command to make a local backup of the remote database:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud db:dump
</code></pre></div>    </div>
  </li>
  <li>
    <p>Enter the following command to back up code and media:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php bin/magento setup:backup --code [--media]
</code></pre></div>    </div>

    <p>You can optionally omit <code class="highlighter-rouge">[--media]</code> if you have a large number of static files that are already in source control.</p>
  </li>
</ol>

<p>Back up your Staging or Production environment database before deploying to those environments:</p>

<ol>
  <li><a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH to the server</a>.</li>
  <li>
    <p>Find the database login information:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php -r 'print_r(json_decode(base64_decode($_ENV["MAGENTO_CLOUD_RELATIONSHIPS"]))-&gt;database);'
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a database dump:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump -h &lt;database host&gt; --user=&lt;database username&gt; --password=&lt;password&gt; --single-transaction &lt;database name&gt; | gzip - &gt; /tmp/database.sql.gz
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="verify-changes">Verify other changes</h2>

<p>Verify other changes you’re going to submit to source control before you start the upgrade:</p>

<ol>
  <li>If you haven’t done so already, change to your project root directory.</li>
  <li>
    <p>Enter the following command:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
</code></pre></div>    </div>
  </li>
  <li>If there are changes you do <em>not</em> want to submit to source control, branch or stash them now.</li>
</ol>

<h2 id="patch">Apply the patch</h2>

<p>To apply the patch, you run the <code class="highlighter-rouge">composer update</code> command. The command uses <code class="highlighter-rouge">composer.json</code> to pull and install the patch to your local. When complete, you will add the files to the Git branch and push to build and deploy.</p>

<p>If multiple patches are installed, they are applied in order by name. The name of the patches include the version number.</p>

<ol>
  <li>
    <p>Change to your Magento base directory and enter the following command:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer update
</code></pre></div>    </div>

    <p>This command automatically upgrades for patches associated to the installed Magento Commerce version.</p>
  </li>
  <li>
    <p>Add, commit, and push your changes to initiate a deployment:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A
git commit -m "Upgrade patch"
git push origin &lt;branch name&gt;
</code></pre></div>    </div>

    <p><code class="highlighter-rouge">git add -A</code> is required to add all changed files to source control because of the way Composer marshals base packages.</p>

    <p>The files Composer marshals belong to the new version of Magento, to overwrite the outdated version of those same files. Currently, marshaling is disabled in Magento Commerce, so you must add the marshaled files to source control.</p>
  </li>
  <li>
    <p>Wait for deployment to complete.</p>
  </li>
</ol>

<h2 id="cloud-patch-gen">Test general patches</h2>

<p><em>General patches</em> are provided for all Magento Commerce customers in a repository referenced in your <code class="highlighter-rouge">composer.json</code>. We apply patches automatically during the build phase when a patch is available. The procedure discussed in this section enables to you test a patch locally anytime you choose.</p>

<h3 id="gen-getstarted">Get started</h3>

<p>We recommend testing patches in an active branch, prior to deploying to Staging and Production environments.</p>

<ol>
  <li>Log in to your local development system, or switch to, the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
  <li>Change to a directory to which the Magento file system owner has write access.</li>
  <li>
    <p>Enter the following command in a terminal to log in to your project:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud login
</code></pre></div>    </div>
  </li>
  <li>
    <p>List your projects. With the project ID, you can complete additional commands.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:list
</code></pre></div>    </div>
  </li>
  <li>
    <p>If necessary, clone the project to your local. You should have cloned when setting up your local development workspace.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:get &lt;project ID&gt;
</code></pre></div>    </div>
  </li>
  <li>Change to a project directory. For example, <code class="highlighter-rouge">cd /var/www/html/magento2</code></li>
  <li>
    <p>List environments in the project. Every environment includes an active Git branch of your code, database, environment variables, configurations, and services.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:list
</code></pre></div>    </div>

  	<code class="highlighter-rouge">magento-cloud environment:list</code>—displays environment hierarchies whereas the <code class="highlighter-rouge">git branch</code> command does not.
  </li>
  <li>
    <p>Fetch origin branches to get the latest code:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch origin
</code></pre></div>    </div>
  </li>
  <li>
    <p>Check out, or switch to, a specific branch and environment. Git commands only checkout the Git branch. The Magento Cloud command also switches to the active environment.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre></div>    </div>

    <p>To create a new environment, use <code class="highlighter-rouge">magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
  </li>
  <li>
    <p>Pull any updated code to your local for the environment ID (which is the Git branch):</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull origin &lt;environment ID&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a <a href="/guides/v2.0/cloud/project/project-webint-snap.html">snapshot</a> of the environment as a backup:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="gen-testlocal">Test a general patch on your local system</h3>

<p>To test a general patch on your local system, you create a branch from the Pro Integration <code class="highlighter-rouge">master</code> branch or Starter plan <code class="highlighter-rouge">staging</code> branch. The commands used in the instructions are for Pro plan using the <code class="highlighter-rouge">master</code> branch.</p>

<ol>
  <li>
    <p>On your local system, enter the following commands as the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;project root dir&gt;
magento-cloud environment:checkout master
git pull origin master
composer update
</code></pre></div>    </div>
  </li>
  <li>
    <p>Apply the patch locally:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git apply vendor/magento/magento-cloud-configuration/patches/&lt;patch file name&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clean the Magento cache:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre></div>    </div>

    <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
  </li>
  <li>Thoroughly test your local system to make sure the patch doesn’t have unexpected side-affects.</li>
  <li>
    <p>After testing the patch, push it to the remote server and deploy it:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="gen-pushpatch">Push a general patch to Staging or Production environments</h3>

<p>After you’ve successfully tested a patch locally and on your integration environment, you can push the patch to Staging or Production environment:</p>

<ol>
  <li>
    <p>Open an SSH connection to your Staging or Production environment. For Starter, see the Project Web Interface for the SSH links. Your Production environment is the Master. For Pro, the SSH access is one of the following:</p>

    <ul>
      <li>Staging: <code class="highlighter-rouge">ssh -A &lt;project ID&gt;_stg@&lt;project ID&gt;.ent.magento.cloud</code></li>
      <li>Production: <code class="highlighter-rouge">ssh -A &lt;project ID&gt;@&lt;project ID&gt;.ent.magento.cloud</code></li>
    </ul>
  </li>
  <li>
    <p>Enter the following commands:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Magento project root dir&gt;/composer update
</code></pre></div>    </div>
  </li>
  <li>
    <p>Apply the patch locally:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git apply vendor/magento/magento-cloud-configuration/patches/&lt;patch file name&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clean the Magento cache:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre></div>    </div>

    <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
  </li>
  <li>Thoroughly test your local system to make sure the patch doesn’t have unexpected side-affects.</li>
  <li>
    <p>After testing the patch, push it to the remote server and deploy it:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin master
</code></pre></div>    </div>
  </li>
</ol>

<h2 id="cloud-patch-custom">Test custom patches</h2>

<p><em>Custom patches</em> are provided to specific customers in a Support ticket. Before you continue, make sure the patch file we provided you is available.</p>

<h3 id="custom-getstarted">Get started</h3>

<p>We recommend you test a patch locally in an active branch. After completing testing, you can push the branch to Staging and Production.</p>

<ol>
  <li>Log in to your local development system, or switch to, the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>.</li>
  <li>Change to a directory to which the Magento file system owner has write access.</li>
  <li>
    <p>Enter the following command in a terminal to log in to your project:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud login
</code></pre></div>    </div>
  </li>
  <li>
    <p>List your projects. With the project ID, you can complete additional commands.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:list
</code></pre></div>    </div>
  </li>
  <li>
    <p>If necessary, clone the project to your local. You should have cloned when setting up your local development workspace.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:get &lt;project ID&gt;
</code></pre></div>    </div>
  </li>
  <li>Change to a project directory. For example, <code class="highlighter-rouge">cd /var/www/html/magento2</code></li>
  <li>
    <p>List environments in the project. Every environment includes an active Git branch of your code, database, environment variables, configurations, and services.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:list
</code></pre></div>    </div>

  	<code class="highlighter-rouge">magento-cloud environment:list</code>—displays environment hierarchies whereas the <code class="highlighter-rouge">git branch</code> command does not.
  </li>
  <li>
    <p>Fetch origin branches to get the latest code:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch origin
</code></pre></div>    </div>
  </li>
  <li>
    <p>Check out, or switch to, a specific branch and environment. Git commands only checkout the Git branch. The Magento Cloud command also switches to the active environment.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment ID&gt;
</code></pre></div>    </div>

    <p>To create a new environment, use <code class="highlighter-rouge">magento-cloud environment:branch &lt;environment name&gt; &lt;parent environment ID&gt;</code></p>
  </li>
  <li>
    <p>Pull any updated code to your local for the environment ID (which is the Git branch):</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git pull origin &lt;environment ID&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a <a href="/guides/v2.0/cloud/project/project-webint-snap.html">snapshot</a> of the environment as a backup:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud snapshot:create -e &lt;environment ID&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="custom-testlocal">Test a custom patch on your local system</h3>

<p>To test a custom patch on your local system:</p>

<ol>
  <li>
    <p>On your local system, enter the following command as the <a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a> if you haven’t done so already:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir &lt;Magento project root dir&gt;/m2-hotfixes
</code></pre></div>    </div>
  </li>
  <li>Copy the patch file to that directory.</li>
  <li>
    <p>Apply the patch locally:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;Magento project root dir&gt;
magento-cloud environment:checkout master
git pull origin master
git apply &lt;Magento project root dir&gt;/m2-hotfixes/&lt;patch file name&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clean the Magento cache:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre></div>    </div>

    <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
  </li>
  <li>
    <p>After testing the patch, push it to the remote server and deploy it:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="custom-pushpatch">Push a custom patch to Staging or Production environments</h3>

<p>After you’ve successfully tested a custom patch locally and on your Integration environment, you can push the patch to Staging or Production for Starter and Pro.</p>

<ol>
  <li>
    <p>Open an SSH connection to your Staging or Production environment. For Starter, see the Project Web Interface for the SSH links. Your Production environment is the Master. For Pro, the SSH access is one of the following:</p>

    <ul>
      <li>Staging: <code class="highlighter-rouge">ssh -A &lt;project ID&gt;_stg@&lt;project ID&gt;.ent.magento.cloud</code></li>
      <li>Production: <code class="highlighter-rouge">ssh -A &lt;project ID&gt;@&lt;project ID&gt;.ent.magento.cloud</code></li>
    </ul>
  </li>
  <li>
    <p>On your staging or production system, enter the following command if you haven’t done so already:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir &lt;Magento project root dir&gt;/m2-hotfixes
</code></pre></div>    </div>
  </li>
  <li>
    <p>Copy the patch file to that directory.</p>

    <p>We suggest using the following command:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rsync -azvP &lt;source&gt; &lt;destination&gt;
</code></pre></div>    </div>

    <p>Options:</p>

    <p><code class="highlighter-rouge">a</code> archive</p>

    <p><code class="highlighter-rouge">z</code> compress</p>

    <p><code class="highlighter-rouge">v</code> verbose</p>

    <p><code class="highlighter-rouge">P</code> partial progress</p>

    <p>For additional options, see the <a href="http://linux.die.net/man/1/rsync" target="_blank">rsync man page</a>.</p>
  </li>
  <li>
    <p>Apply the patch:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git apply &lt;Magento project root dir&gt;/m2-hotfixes/&lt;patch file name&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Clean the Magento cache:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php &lt;Magento project root dir&gt;/bin/magento cache:clean
</code></pre></div>    </div>

    <p>You can also clean the cache using the <a href="http://docs.magento.com/m2/ee/user_guide/system/cache-management.html" target="_blank">Magento Admin</a>.</p>
  </li>
  <li>
    <p>After testing the patch, push it to the remote server and deploy it:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add -A &amp;&amp; git commit -m "Apply patch"
git push origin &lt;branch name&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="related-topic">Related topic</h4>

<ul>
  <li><a href="/guides/v2.0/cloud/reference/cloud-composer.html">Composer</a></li>
</ul>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  


  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="https://github.com/magento/devdocs/blob/master/.github/CONTRIBUTING.md">Become a Contributor</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
  <!-- If the page is in the root, the link points to the default version of release notes.
       The default version is set in the config.yaml.-->
  <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
  <li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>





<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<script type="text/javascript">_satellite.pageBottom();</script>




</body>
</html>

