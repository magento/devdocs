<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Deployment process</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print"/>
	<link rel="canonical" href="//guides/v2.0/cloud/discover-deploy.html">

	<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script>
        var baseUrl = "/";
    </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

</head>
<body>

<header class="site-header">

	<nav role="navigation">

		<div class="menu-btn">
			<a class="menu-trigger menu-icon" href="#"></a>
		</div>

		<div id="global-nav">
			<div class="main-site-name">
				<a class="logo pull-left" href="/"> </a>
				<div class="sub-site-name">
					<a href="/">Developer Documentation (2.0)</a>
				</div>
			</div>
            
<div class="version-switcher dropdown">
	<button class="btn dropdown-toggle" data-toggle="dropdown">
		Version 2.0
	</button>


	<ul class="dropdown-menu dropdown-menu-left">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/discover-deploy.html">Version 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/discover-deploy.html">Version 2.1</a></li>
	
  </ul>

</div>


		</div><!-- #global-nav -->
	</nav>

	<div class="search-btn">
        <a class="search-trigger search-icon" href="/search.html"></a>
	</div>

</header>

<!--Sub Navigation-->
<div id="subnav-wrap" class="nav-main">
   <div id="subnav">
      <ul class="menu nav">
         <li class="first">
            <a href="#">Get Started</a>
            <ul class="menu nav">
               <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Magento Architecture</a></li>
               <li class="first leaf"><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Information</a></li>

            </ul>
         </li>
         <li class="first">
            <a href="#">System Administrator</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
               
               <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/cloud/bk-cloud.html">Magento Enterprise Cloud Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Developers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
               
               <li class="first leaf"><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
               

               <li class="first leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices Guide</a></li>
               <li class="leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
               <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST Reference</a></li>
               <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP Reference</a></li>
               <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
               <li class="leaf"><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
               <li class="first leaf"><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
               
            </ul>
         </li>
         <li class="first">
            <a href="#">Designers</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
               <li class="leaf"><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
            </ul>
         </li>
         <li class="first">
            <a href="#">Contributor</a>
            <ul class="menu nav">
               <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
            </ul>
         </li>
          <li class="first">
              <a href="/guides/v2.0/test/testing.html">Testing</a>
              <ul class="menu nav">
                  <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
                  <li class="leaf"><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
              </ul>
          </li>
         <li class="first">
            <a href="/guides/v2.0/howdoi/bk-how-do-i.html">How Do I...?</a>
         </li>
      </ul>

      <div class ="search">
         <div class="search-icon"></div>
         <form id="searchbox" name="gs" method="GET" action="/search.html">
            <input type="text" name="q" id="searchtext" value="" placeholder="Search" autofocus>
         </form>
      </div><!-- END searchbox-->

      <a href="#" class="nav-close">&times;</a>

   </div> <!--End subnav -->
</div><!--End subnav-wrap -->
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- /.main-container -->
	<div id="gl-container" class="main-container">
		<a id="main-content"></a>
		<div class="pane-content">
			<div class="node node-panel">


<!-- page-header -->
<section class="page-intro">
	<div class="container">
		<h1 class="page-heading">Deployment process</h1>

        

        <div class="topic-info">

            
               <div class="github-link"><a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/cloud/discover-deploy.md" target="_blank">Edit this page on GitHub</a></div>
            
            

        </div> 
		        
		
        <div class="float-break"></div>
	</div>
</section>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>Magento Enterprise Cloud Guide</h4>








		<ul role="navigation">

		

		

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/bk-cloud.html">Welcome to Magento Enterprise Cloud Edition</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/discover-arch.html">Architecture</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/discover-workflow.html">Workflow</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.0/cloud/discover-deploy.html">Deployment process</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/discover-tools.html">Tooling</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/get-help.html">Get help with your deployment</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/cloud-requirements.html">Magento Enterprise Cloud Edition requirements</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/cloud-requirements-license.html">License and authentication requirements</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/cloud-requirements-git.html">Git requirements</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes.html">Magento Enterprise Cloud Edition Release Notes</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/release-notes/CloudReleaseNotes2.1.2.html">Magento Enterprise Cloud Edition 2.1.2 and 2.0.10 Release Notes</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/before/before.html">Before you get started</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/terms.html">Common terms</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/before-repos.html">Magento Enterprise Cloud Edition repositories</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/before/before-project-owner.html">Account owner tasks</a></li>
									
								

									


								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/access-acct/first-time-setup.html">First-time setup (developers)</a></li>
									
								

									


								

									

										<li class="level3Parent " id="workspace"><a href="#">Set up a Magento workspace</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace.html">Overview of a Magento workspace</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-cloud-account.html">Step 1, Set up an account</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-file-sys-owner.html">Step 2, Set up the Magento file system owner</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-cli.html">Step 3, Install the CLI</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-ssh.html">Step 4, Enable Secure Shell (SSH)</a>


									

								

									


											<li class="level3Child workspace " data-menunode="workspace"><a href="/guides/v2.0/cloud/before/before-workspace-php.html">Step 5, Set up PHP and MySQL</a>


									

								

									

										<li class="level3Parent " id="newproj"><a href="#">Deploy the Magento software to the cloud (create a new project)</a>


									

								

									


											<li class="level3Child newproj " data-menunode="newproj"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_template.html">Create a sample Magento project from a template</a>


									

								

									


											<li class="level3Child newproj " data-menunode="newproj"><a href="/guides/v2.0/cloud/access-acct/first-time-setup_import.html">Import an existing Magento project</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/set-up-env.html">Set up an environment and install the Magento software locally</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/fastly.html">Set up Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/first-time-setup_dir-structure.html">Project directory structure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/resources.html">Magento 2 resources</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/access-acct/trouble.html">Troubleshoot deployment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/before/integration-ip-addr.html">Public IP addresses for integration environments</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/project/projects.html">Manage your projects</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-start.html">Get started with a project</a></li>

									

								

									

										<li class="level3Parent " id="project"><a href="#">Use the project Web Interface</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.0/cloud/project/project-webint-basic.html">Basic project information</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.0/cloud/project/project-webint-branch.html">Manage environments (branches)</a>


									

								

									


											<li class="level3Child project " data-menunode="project"><a href="/guides/v2.0/cloud/project/project-webint-snap.html">Project backup and restore (snapshot)</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a></li>

									

								

									

										<li class="level3Parent " id="routes"><a href="#">Configure routes</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-conf-files_routes.html">routes.yaml</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-cache.html">Caching</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-redir.html">Redirects</a>


									

								

									


											<li class="level3Child routes " data-menunode="routes"><a href="/guides/v2.0/cloud/project/project-routes-more-ssi.html">Server side includes</a>


									

								

									

										<li class="level3Parent " id="services"><a href="#">Configure services</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services.html">services.yaml</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-mysql.html">Set up the mysql service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-redis.html">Set up the redis service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-solr.html">Set up the solr service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-elastic.html">Set up the elasticsearch service</a>


									

								

									


											<li class="level3Child services " data-menunode="services"><a href="/guides/v2.0/cloud/project/project-conf-files_services-rabbit.html">Set up the rabbitmq service</a>


									

								

									

										<li class="level3Parent " id="integrate"><a href="#">Integrations</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Blackfire integration</a>


									

								

									


											<li class="level3Child integrate " data-menunode="integrate"><a href="/guides/v2.0/cloud/project/project-integrate-github.html">GitHub integration</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/project/project-priv-repos.html">Pull code from a private Git repository</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/env/environments.html">Manage your environments</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-start.html">Get started with an environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-ssh.html">SSH into your environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/env/environments-logs.html">Viewing logs from your environment</a></li>

									

								

									

										<li class="level3Parent " id="vars"><a href="#">Environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_over.html">Overview of environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_cloud.html">Magento Cloud environment variables</a>


									

								

									


											<li class="level3Child vars " data-menunode="vars"><a href="/guides/v2.0/cloud/env/environment-vars_magento.html">Magento application environment variables</a>


									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/howtos/how-to.html">Tutorials</a></li>
									
								

									


								

									

										<li class="level3Parent " id="update-magento"><a href="#">Upgrade and patch the Magento application</a>


									

								

									


											<li class="level3Child update-magento " data-menunode="update-magento"><a href="/guides/v2.0/cloud/howtos/upgrade-magento.html">Upgrade the Magento application</a>


									

								

									


											<li class="level3Child update-magento " data-menunode="update-magento"><a href="/guides/v2.0/cloud/howtos/patch-magento.html">Patch the Magento application</a>


									

								

									

										<li class="level3Parent " id="update-extensions"><a href="#">Install and update extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/install-components.html">Install extensions</a>


									

								

									


											<li class="level3Child update-extensions " data-menunode="update-extensions"><a href="/guides/v2.0/cloud/howtos/update-components.html">Update extensions</a>


									

								

									

										<li class="level3Parent " id="env-tut"><a href="#">Environment tutorials</a>


									

								

									


											<li class="level3Child env-tut " data-menunode="env-tut"><a href="/guides/v2.0/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/custom-theme.html">Install a theme</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/sample-data.html">Install optional sample data</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/howtos/debug.html">Run a PHP debugger</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/admin/administer.html">Other administrative tasks</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/admin/admin-user-admin.html">Manage users</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/admin/admin-snap.html">Snapshot and restore</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/live/stage-prod-live.html">From integration to live</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-sanity-check.html">Build and deploy before pushing to staging or production</a></li>

									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-over.html">Overview of staging and production</a>


									

								

									

										<li class="level3Parent " id="stage-prod"><a href="#">Staging and production</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-migrate-prereq.html">Prepare to migrate data</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-migrate.html">Migrate data</a>


									

								

									


											<li class="level3Child stage-prod " data-menunode="stage-prod"><a href="/guides/v2.0/cloud/live/stage-prod-test.html">Testing</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live-prot.html">Protective block</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/live/live.html">Go live</a></li>

									

								




						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.0/cloud/trouble/trouble.html">Troubleshooting</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_fastly.html">Troubleshoot Fastly</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.0/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a></li>

									

								




						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
            <h4 id="contents">Contents</h4>
<ul>
  <li><a href="#cloud-deploy-over">Deployment process</a></li>
  <li><a href="#cloud-deploy-over-gh">GitHub and Bitbucket</a></li>
  <li><a href="#cloud-deploy-conf">Project configuration</a></li>
  <li><a href="#cloud-deploy-over-phases">Five phases of deployment</a></li>
  <li><a href="#cloud-deploy-over-phases-route">Post-deployment: configure routing</a></li>
</ul>

<h2 id="cloud-deploy-over">Deployment process</h2>
<p>Deploying Magento means simply pushing the source code to your Git repository. The Git repository is part of your projects cluster so it is totally isolated from
other clients.</p>

<p>The built-in Git repository is at the same time “just a normal Git repository” and a very smart piece of software. When you push to it, it will parse the configuration files you committed to your repository so it knows what it needs to deploy.</p>

<p>If you are pushing directly to the Magento Enterprise Cloud Edition Git repository, you will see in your terminal
what is happening in real-time. The same information is going to get streamed in real-time to the Web Interface.</p>

<h2 id="cloud-deploy-over-gh">GitHub and Bitbucket</h2>
<p>If you are using external Bitbucket or GitHub repositories, the log
of the operations does not display in the GitHub session. You can still follow what’s happening in their interface and in the Magento Enterprise Cloud Edition’s Web Interface.</p>

<h2 id="cloud-deploy-conf">Project configuration</h2>
<p>What makes it all work is a set of YAML configuration files located in the project root directory. These files define your Magento installation and describe its dependencies. Configuration files specify, for
example, that Magento uses MySQL, some PHP extensions, and Elasticsearch. (These are referred to as <em>services</em>.)</p>

<h2 id="cloud-deploy-over-phases">Five phases of deployment</h2>
<p>Deployment consists of the following phases:</p>

<ol>
  <li><a href="#cloud-deploy-over-phases-conf">Phase 1: Configuration validation and code retrieval</a></li>
  <li><a href="#cloud-deploy-over-phases-build">Phase 2: Build</a></li>
  <li><a href="#cloud-deploy-over-phases-slug">Phase 3: Prepare slug</a></li>
  <li><a href="#cloud-deploy-over-phases-slugclus">Phase 4: Deploy slugs and cluster</a></li>
  <li><a href="#cloud-deploy-over-phases-hook">Phase 5: Deployment hooks</a></li>
  <li><a href="#cloud-deploy-over-phases-route">Post-deployment: configure routing</a></li>
</ol>

<h3 id="cloud-deploy-over-phases-conf">Phase 1: Configuration validation and code retrieval</h3>
<p>The remote server gets your code using Git. When you initially set up a project from a template, we retrieve the code from the <a href="https://github.com/magento/magento-cloud" target="_blank">the Magento ECE template</a>.</p>

<p>The built-in Git server checks what you are pushing: if you have a syntax error in a configuration file, our Git server refuses the push.</p>

<p>Suppose you had a single MySQL database in your cluster and now you want two of those, or maybe you want to add an Elasticsearch instance. The built-in Git server detects this and verifies that the topology of your cluster is modified to your new needs.</p>

<p>This phase also runs <code>composer install</code> to retrieve dependencies.</p>

<h3 id="cloud-deploy-over-phases-build">Phase 2: Build</h3>
<p>We build only what has changed since the last build. This is one of the things that
make Magento Enterprise Cloud Edition so fast in deployment.</p>

<p>Magento Enterprise Cloud Edition builds the codebase. It runs hooks in the <code>build</code> section of <code>.magento.app.yaml</code>.</p>

<p>The default Magento build hook is a CLI command called <code>magento-cloud:build</code>. It does the following:</p>

<ul>
  <li>Applies patches located in vendor/magento/magento-cloud-configuration/patches, as well as optional project-specific patches in m2-hotfixes</li>
  <li>Enables all modules</li>
  <li>Regenerates code and the dependency injection configuration (that is, the Magento <code>var/generation</code> and <code>var/di</code> directories) using <code>bin/magento setup:di:compile</code>.</li>
</ul>

<p>It is important to note that at this point the cluster has not been
created yet. So you should not try to connect to a database or imagine
anything was daemonized.</p>

<p>But also know that once the application has been built it is going to be
mounted on a read-only file system (you will be able to configure specific
mount points that are going to be read/write).</p>

<p>This means you cannot FTP to the server and add modules. Instead, you must add code to your git repo and run <code>git push</code>, which builds and deploys the environment.</p>

<h3 id="cloud-deploy-over-phases-slug">Phase 3: Prepare the slug</h3>
<p>The result of the build phase is a read-only file system we refer to as a <em>slug</em>. In this phase, we create an archive and put it in permanent storage. The next time
you push code, if a service did not change, you can use a slug from the archive.</p>

<p>It also means that reverting a deployment is basically
instantaneous.</p>

<h3 id="cloud-deploy-over-phases-slugclus">Phase 4: Deploy slugs and cluster</h3>
<p>Now we provision your applications and all the backend services you
need:</p>

<ul>
  <li>Mounts each service in its own container</li>
  <li>Mounts the read-write file system is mounted on a highly available distributed storage grid</li>
  <li>Configures the network so Magento’s services can “see” each other (and only each other)</li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>The main file system is <em>read-only</em>. This
is what guarantees we can do deterministic deployments. The read-only file system also dramatically improves your site's security because no process can write to the file system.</p>
</div>

<h3 id="cloud-deploy-over-phases-hook">Phase 5: Deployment hooks</h3>
<p>The last step runs a deployment script. You can use this for example to anonymize data in development environments, clear caches, ping external continuous integration tools, and so on.</p>

<p>When this script runs, you have access to all the services in your environment (Redis, database, and so on).</p>

<p>There are two default deploy hooks. One is <code>pre-deploy.php</code>, which does some necessary cleanup and retrieval of 
resources that were generated in the build hook. The second is <code>bin/magento magento-cloud:deploy</code>, which does the following</p>

<ul>
  <li>
    <p>If Magento is not installed, it installs Magento with <code>bin/magento setup:install</code>, updates the deployment configuration, <code>app/etc/env.php</code>, and the database for your specified environment (for example, Redis and website URLs).</p>
  </li>
  <li>
    <p>If Magento is installed, performs any necessary upgrades.</p>

    <p>The deployment script runs <a href="/guides/v2.0/install-gde/install/cli/install-cli-subcommands-db-upgr.html"><code>bin/magento setup:upgrade</code></a> to update the database schema and data (which is necessary after extension or core code updates), and also updates the <a href="/guides/v2.0/config-guide/config/config-php.html">deployment configuration</a>, <code>app/etc/env.php</code>, and the database for your environment.</p>

    <p>Finally, the deployment script and clears the Magento cache.</p>
  </li>
  <li>
    <p>Sets the mode to either <a href="/guides/v2.0/config-guide/bootstrap/magento-modes.html#mode-developer}}"><code>developer</code></a> or <a href="/guides/v2.0/config-guide/bootstrap/magento-modes.html#mode-production"><code>production</code></a> based on the environment variable <a href="/guides/v2.0/cloud/env/environment-vars_magento.html"><code>APPLICATION_MODE</code></a>.</p>

    <p>In <code>production</code> mode, the script optionally generates static web content using the command
<a href="/guides/v2.0/config-guide/cli/config-cli-subcommands-static-view.html"><code>magento setup:static-content:deploy</code></a>.</p>
  </li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>Our deploy script uses the values defined by configuration files in the <code>.magento</code> directory, then the script deletes the directory and its contents. Your local development environment isn't affected.</p>
</div>

<h3 id="cloud-deploy-over-phases-route">Post-deployment: configure routing</h3>
<p>While the deployment is running, we freeze the incoming traffic at the entry point
for 60 seconds. We are now ready to configure routing so your
web traffic will arrive at your newly created cluster.</p>

<h4 id="related-topics">Related topics</h4>
<ul>
  <li><a href="/guides/v2.0/cloud/project/project-start.html">Get started with a project</a></li>
  <li><a href="/guides/v2.0/cloud/env/environments-start.html">Get started with an environment</a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html"><code>.magento.app.yaml</code></a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_routes.html"><code>routes.yaml</code></a></li>
  <li><a href="/guides/v2.0/cloud/project/project-conf-files_services.html"><code>services.yaml</code></a></li>
</ul>

		</div>
	</section>
<!-- /main content -->


</div> <!-- container -->


		</div>
		</div>
	</div>


</div>
<!-- -->
<!--Global footer-->
<div id="footer-wrap">
    <div id="copyright">
        <div class="container">
            <div class="copyright-date">&copy; 2016 Magento, Inc. All rights reserved.</div>
            <div class="copyright-links">
                <ul class="nav">
                    <li><a title="Privacy Policy" href="http://magento.com/legal/terms/privacy">Privacy Policy</a></li>
                    <li><a title="Terms of Service" href="http://magento.com/legal/terms">Terms of Service</a></li>
                    <li><a title="License/Trademark FAQ" href="http://magento.com/legal/licensing">License/Trademark FAQ</a></li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="/common/js/jsCookie.js"></script>
<script src="/common/js/devdocs.js"></script>
<script src="/common/js/jquery-ui.min.js"></script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>

<script src="/js/app.js"></script>

<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>

</body>
</html>

