<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Backward compatible development | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.0/contributor-guide/backward-compatible-development/">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.0/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown" data-version="2.0">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.0
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/contributor-guide/backward-compatible-development/index.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/contributor-guide/backward-compatible-development/index.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/contributor-guide/backward-compatible-development/index.html">Magento 2.2</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.0/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/comp-mgr/bk-compman-upgrade-guide.html">Component Manager and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          
          <li><a href="/guides/v2.0/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.0/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.0/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.0/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/ui-components/ui-component.html">UI Components</a></li>
          
          <li class="leaf"><a href="/guides/v2.0/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.0/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.0/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.0/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.0/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.0/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.0/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.0/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" autocomplete="off" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">



<h4>Contribution Guide</h4>
<div class="left-navigation">
    <ul>
    
    
<li class="nav-level1  " id="code-contributions">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.0/contributor-guide/contributing.html">Code Contributions</a>
    

    
    <ul>
        
        
        <li class="nav-level2 active " id="backward-compatible-development">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/backward-compatible-development">Backward compatible development</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    
<li class="nav-level1  " id="devdocs-contributions">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.0/contributor-guide/contributing_docs.html">DevDocs Contributions</a>
    

    
    <ul>
        
        
        <li class="nav-level2  " id="magento-definition-of-done">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/contributing_dod.html">Magento Definition of Done</a>
            

            
        </li>
        
        
        
        <li class="nav-level2  " id="suggested-topics-for-contribution">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/contributing_docs_suggested.html">Suggested topics for contribution</a>
            

            
        </li>
        
        
        
        <li class="nav-level2  " id="quarterly-contributors">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/quarterly-contributors.html">Quarterly Contributors</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    
<li class="nav-level1  " id="templates">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <span>Templates</span>
    

    
    <ul>
        
        
        <li class="nav-level2  " id="basic-template">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/templates/basic_template.html">Basic template</a>
            

            
        </li>
        
        
        
        <li class="nav-level2  tutorial" id="sample-template-tutorial">
            
            
        
            
            <a href="/guides/v2.0/contributor-guide/templates/tutorial-template-first.html">Sample template tutorial</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    </ul>
</div>

	</div>

</aside>


<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.0/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Backward compatible development</span>

        

        <meta property="position" content="1" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Backward compatible development</h1>

  


</section>


			<p>This page describes rules and best practices for backward compatible development.</p>

<h2 id="backward-ompatibility-policy">Backward Сompatibility Policy</h2>

<p>See the <a href="/guides/v2.0/extension-dev-guide/versioning/index.html">versioning</a> documentation for the definitions of MAJOR and MINOR changes and how it impacts <span term-uuid="55774db9-bf9d-40f3-83db-b10cc5ae3b68" class="glossary-term" data-toggle="popover">extension</span> developers.</p>

<p>The core Magento team and contributing developers work in two release types</p>

<ol>
  <li>New and significant release (product’s MINOR release)
    <ul>
      <li>Necessary MAJOR and MINOR changes are allowed, but the Magento architecture team ultimately decides what is allowed.</li>
    </ul>
  </li>
  <li>New patch release (product’s PATCH release)
    <ul>
      <li>PATCH changes are allowed, but MAJOR and MINOR changes are not allowed.</li>
    </ul>
  </li>
</ol>

<div class="bs-callout bs-callout-info">
  <p>Backward Сompatibility Policy is not applied to Plugins, Observers and Setup Scripts.</p>
</div>

<h2 id="prohibited-code-changes">Prohibited code changes</h2>

<p>The following code modifications are forbidden for all code (both <code class="highlighter-rouge">@api</code> and non <code class="highlighter-rouge">@api</code>) without approval of a Magento architect.</p>

<div class="bs-callout bs-callout-info">
  <p>The rules listed do not apply to customization code (e.g. Plugins, Observers, JS Mixins, etc.).</p>
</div>

<h3 id="php">PHP</h3>

<p>The following is a list of prohibited <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span> code changes and possible alternative implementations.</p>

<h4 id="interfaceclass-removal">Interface/class removal</h4>

<p>Mark the class with the <code class="highlighter-rouge">@deprecated</code> tag instead of removing it, and mark all of its methods as deprecated so an IDE can highlight them as deprecated.</p>

<h4 id="public-and-protected-method-removal">Public and protected method removal </h4>

<p>Mark the method with the <code class="highlighter-rouge">@deprecated</code> tag instead of removing it.</p>

<p>Continue returning the same results from the method if possible, so the old functionality is preserved.</p>

<h4 id="introduction-of-a-method-to-a-class-or-interface">Introduction of a method to a class or interface</h4>

<p>Create a new interface with a new method instead of introducing a method to a class or interface.</p>

<p>The new interface may take over existing methods from the class if it makes sense to group them together.
In this case, you must deprecate corresponding methods in the old interface/class with the <code class="highlighter-rouge">@see</code> annotation.
The old methods should proxy the calls to the new interface instead of duplicating the logic.</p>

<p>For an example of an interface with an extracted method see the <code class="highlighter-rouge">Magento\Catalog\Api\CategoryListInterface</code>.
This interface is responsible for the <code class="highlighter-rouge">getList()</code> method, but <code class="highlighter-rouge">Magento\Catalog\Api\CategoryRepositoryInterface</code> does not have that method.</p>

<ul>
  <li>For a <strong>PATCH</strong> product release, do NOT mark the new interface with <code class="highlighter-rouge">@api</code>.</li>
  <li>For a <strong>MINOR</strong> product release, an architect marks, or approves, the new interface with <code class="highlighter-rouge">@api</code> if applicable.</li>
</ul>

<h4 id="removing-static-functions">Removing static functions</h4>

<p>Do not remove static functions.</p>

<h4 id="adding-parameters-in-public-methods">Adding parameters in public methods </h4>

<p>Deprecate the method and add a new method with the new parameter(s) instead of adding them to a public method.</p>

<p>Follow the alternative implementation described earlier for introducing a new method to a class or interface.</p>

<p>Reference the new method in a <code class="highlighter-rouge">@see</code> tag as a recommended replacement.
Explain the reasons for replacing the old method with the new one (e.g., there is a bug in the old method). </p>

<h4 id="adding-parameters-in-protected-methods">Adding parameters in protected methods </h4>

<p>Instead of adding parameters to protected methods, Create a new method with a new signature and deprecate the old method without changing it.</p>

<p>Declare the new method as private if possible.</p>

<div class="collapsible"><b class="collapsible-title">Example Code </b><div class="collapsible-content"><figure class="highlight"><pre><code class="language-php" data-lang="php">/**
 * @deprecated This method is not intended for usage in child classes
 * @see updateScopedPrice($price, $storeId)
 */
protected function updatePrice($price)
{
    $this-&gt;updateScopedPrice($price);
} 

private function updateScopedPrice($price, $storeId)
{
    // Updated logic that takes into account $storeId
} </code></pre></figure>
</div></div>

<h4 id="modifying-the-default-values-of-optional-arguments-in-public-and-protected-methods">Modifying the default values of optional arguments in public and protected methods </h4>

<p>This is forbidden because the default argument values of public or protected methods are part of the <span term-uuid="786086f2-622b-4007-97fe-2c19e5283035" class="glossary-term" data-toggle="popover">API</span> of the class/interface.</p>

<p>As an alternative, Create a new method with new interface following the alternative implementation for creating a new method for a class or interface.</p>

<p>Create multiple methods to cover all use cases to avoid using optional parameters.</p>

<h4 id="modifying-the-method-argument-type">Modifying the method argument type</h4>

<p>Do not modify a method argument type.</p>

<h4 id="modifying-the-types-of-thrown-exceptions">Modifying the types of thrown exceptions</h4>

<p>Do not modify the types of thrown exceptions unless a new <span term-uuid="53da11f1-d0b8-4a7e-b078-1e099462b409" class="glossary-term" data-toggle="popover">exception</span> is a sub-type of the old one.</p>

<h4 id="adding-a-constructor-parameter">Adding a constructor parameter</h4>

<p>Add a new optional parameter to the constructor at the end of the arguments list instead of modifying the constructor.</p>

<p>In the constructor body, if the new dependency is not provided (i.e. the value of the introduced argument is <code class="highlighter-rouge">null</code>), fetch the dependency using <code class="highlighter-rouge">Magento\Framework\App\ObjectionManager::getInstance()</code>.</p>

<div class="collapsible"><b class="collapsible-title">Example Code </b><div class="collapsible-content"><figure class="highlight"><pre><code class="language-php" data-lang="php">class ExistingClass
{
    /** @var \New\Dependency\Interface */
    private $newDependency;

    public function __construct(
        \Old\Dependency\Intreface $oldDependency,
        $oldRequiredConstructorParameter,
        $oldOptinalConstructorParameter = null,
        \New\Dependency\Interface $newDependency = null
    ) {
        ...
        $this-&gt;newDependency = $newDependency ?: \Magento\Framework\App\ObjectManager::getInstance()-&gt;get(\New\Dependency\Interface::class);
    }

    public function existingFunction()
    {
        // Existing functionality
        ...
        ...

        // Use $this-&gt;newDependency wherever the new dependency is needed
        ...
        ...
    }
}

// Sample unit test code snippet follows
class ExistingClassTest extends \PHPUnit_Framework_TestCase
{
    private $existingClassObject;

    protected function setUp()
    {
        ...
        // Create dependency mocks with $this-&gt;getMock() or $this-&gt;getMockBuilder()
        $newDependencyMock = $this-&gt;getMock(\New\Dependency\Interface::class);

        $objectManager = new \Magento\Framework\TestFramework\Unit\Helper\ObjectManager($this);
        $this-&gt;existingClassObject = $objectManager-&gt;getObject(
            ExistingClass::class,
            [
                'oldDependency' =&gt; $oldDependencyMock,
                'oldRequiredConstructorParameter' =&gt; 'foo',
                'oldOptinalConstructorParameter' =&gt; 'bar',
                'newDependency' =&gt; $newDependencyMock,
            ]
        );
    }

    public function testExistingFunction()
    {
        ...
        ...
    }
}</code></pre></figure>
</div></div>

<h4 id="removing-or-renaming-public-and-protected-properties">Removing or renaming public and protected properties</h4>

<p>Mark properties with the <code class="highlighter-rouge">@deprecated</code> tag instead of removing or renaming them.
Continue storing the value in the property to preserve the old functionality.</p>

<h4 id="removing-or-renaming-constants">Removing or renaming constants</h4>

<p>Do not remove or rename constants.</p>

<h4 id="removing-renaming-or-changing-the-type-of-event-arguments">Removing, renaming, or changing the type of event arguments</h4>

<p>Do not remove or rename <span term-uuid="c57aef7c-97b4-4b2b-a999-8001accef1fe" class="glossary-term" data-toggle="popover">event</span> arguments.
Do not change argument types. 
Instead of changing argument name or type, introduce new event argument with new name or type and deprecate the old argument by adding <code class="highlighter-rouge">@deprecated</code> annotation before dispatching the event.</p>

<h3 id="js">JS</h3>

<p>The following is a list of prohibited JS code changes:</p>

<ul>
  <li>Removing or renaming an interface or class</li>
  <li>Removing or renaming public or protected methods</li>
  <li>Introducing a method to an interface</li>
  <li>Introducing an abstract method to a class</li>
  <li>Removing or renaming static functions</li>
  <li>Adding non-optional arguments in public and protected methods</li>
  <li>Modifying the default value for optional arguments in public and protected methods</li>
  <li>Removing or renaming public or protected properties</li>
  <li>Removing or renaming constants</li>
</ul>

<h3 id="xml-schema">XML Schema</h3>

<p>The following is a list of prohibited <span term-uuid="8c0645c5-aa6b-4a52-8266-5659a8b9d079" class="glossary-term" data-toggle="popover">XML</span> Schema changes:</p>

<ul>
  <li>Adding an obligatory node</li>
  <li>Adding an obligatory attribute</li>
  <li>Removing or renaming an attribute or node type</li>
  <li>Removing or renaming a configuration file</li>
</ul>

<h3 id="db-schema">DB Schema</h3>

<p>The following is a list of prohibited DB Schema changes:</p>

<ul>
  <li>Modifying field type, default value, or property</li>
  <li>Removing or renaming a table</li>
  <li>Introducing a required field</li>
</ul>

<h3 id="cssless">CSS/LESS</h3>

<p>The following is a list of prohibited CSS/LESS changes:</p>

<ul>
  <li>Removing or renaming a class</li>
  <li>Removing or renaming a mix-in</li>
  <li>Removing or renaming a variable</li>
</ul>

<h3 id="magento-apis">Magento APIs</h3>

<p>The following is a list of prohibited Magento API changes:</p>

<ul>
  <li>Removing or renaming an event</li>
  <li>Removing or renaming a <span term-uuid="73ab5daa-5857-4039-97df-11269b626134" class="glossary-term" data-toggle="popover">layout</span> handle</li>
  <li>Removing or renaming a store configuration path</li>
  <li>Modifying the directory structure</li>
  <li>Removing an @api annotation</li>
  <li>Modifying the Magento tool command argument list</li>
  <li>Modifying or removing the Magento tool command</li>
</ul>

<h3 id="translatable-phrases">Translatable phrases</h3>

<p>Do not modify any translatable phrase.</p>

<h3 id="magento-functional-and-integration-tests">Magento functional and integration tests</h3>

<p>The following is a list of prohibited changes to Magento functional and integration tests:</p>

<ul>
  <li>Changing a fixture format</li>
  <li>Changing a fixture content (except changes forced by new functionality)</li>
</ul>

<h2 id="allowed-code-changes">Allowed Code Changes</h2>

<h3 id="php-1">PHP</h3>

<h4 id="changing-the-value-of-a-constant">Changing the value of a constant </h4>

<p>Changing the value of a constant is itself a backward compatible change.</p>

<p>Even if client code saves the value in permanent storage or use it as input or output of a method, it is the responsibility of that code to ensure that it is a reliable implementation.</p>

<p>The client code should have enough control over the constant’s value.
Do not rely on a value of a constant from another <span term-uuid="c1e4242b-1f1a-44c3-9d72-1d5b1435e142" class="glossary-term" data-toggle="popover">module</span> or another vendor.</p>

<h4 id="stop-setting-a-value-to-the-registry">Stop setting a value to the Registry</h4>

<p>Setting a value to the Registry is backward compatible.
However, Magento discourages usage of the Registry, so third-party extensions should not depend on values in the Registry.</p>

<h4 id="adding-an-argument-to-an-event">Adding an argument to an event</h4>

<p>Adding an argument to an event is allowed.</p>

<h2 id="version-changing-rules-for-module-setup">Version changing rules for module setup</h2>

<ol>
  <li>
    <p>The module data/schema version must not increase in a patch version release if the next minor version is already released.</p>

    <p>For example, the module data/schema version for all patch releases of Magento 2.0 can change prior to the release of Magento 2.1.
After 2.1 releases, the version cannot change for 2.0 patch releases, but it can change for 2.1 patch releases until Magento 2.2.</p>
  </li>
  <li>
    <p>Deliver fixes that bump the module setup/data version in the current, unpublished version before delivering it to previous minor versions.
In cases where an urgent fix was delivered in a previous minor version, treat the fix for the current unpublished version as a high priority task.</p>

    <p>For example, issue fixes that change the setup/upgrade version in the unreleased <code class="highlighter-rouge">develop</code> branch are delivered first before being ported into the released branches.
If the fix was made for a released branch, a pull request for porting it into the <code class="highlighter-rouge">develop</code> branch must be created with a high priority and delivered as soon as possible.</p>
  </li>
  <li>
    <p>The setup version of a module must be higher than previous releases of the same module.</p>

    <p>For example, the setup version for a fix for the Magento_Catalog module is higher in the <code class="highlighter-rouge">develop</code> branch (2.1.3) than previous branch versions (2.0.2 and 2.1.2 for versions 2.0 and 2.1).</p>
  </li>
</ol>

<h2 id="backport-fixes-with-breaking-changes-to-patch-branches">Backport fixes with breaking changes to patch branches</h2>

<p>Backward compatibility is more important than niceness and implementation effort, but a Magento architect must be involved in making a decision.</p>

<p>Potential drawbacks:</p>

<ul>
  <li>It is double the work when it is necessary to implement different solutions for the <code class="highlighter-rouge">develop</code> branch (upcoming minor release) and patch release branches.</li>
  <li>Inability to refactor code in patch releases</li>
  <li>Effort for implementing fixes in patch releases may be higher due to necessary implementation workarounds.</li>
</ul>

<h2 id="refactoring-classes-that-reach-limit-of-coupling-between-objects">Refactoring classes that reach limit of coupling between objects</h2>

<p>Poorly designed classes with too many responsibilities and dependencies should be refactored to prevent them from reaching the limit of coupling between objects, but removing excessing dependencies and/or breaking the class down into smaller classes is a backward incompatible implementation.</p>

<p>Preserve public and protected class interfaces to maintain backward compatibility.
Review and refactor the class such that parts of the logic go into smaller specialized classes without breaking backward compatibility.</p>

<ul>
  <li>Turn the existing class into a facade to prevent existing usages of the refactored methods from breaking.</li>
  <li>The old public/protected methods should be marked as deprecated with the <code class="highlighter-rouge">@see</code> tag to suggest the new implementation for new usages.</li>
  <li>Remove all unused private properties/methods.</li>
  <li>Mark as deprecated unused protected properties.
Remove the variable type indicated in the DocBlock to remove the dependency.</li>
  <li>To preserve the constructor signature:
    <ul>
      <li>Remove type hinting for unused parameters to remove dependency on their type.</li>
      <li>Add <code class="highlighter-rouge">@SuppressWarnings(PHPMD.UnusedFormalParameter)</code> for unused parameters.</li>
    </ul>
  </li>
</ul>

<h2 id="deprecation">Deprecation</h2>

<p>Magento 2 must not have alternative APIs.
Whenever you introduce a new implementation of some behavior, mark the old implementation as deprecated and specify the reason.</p>

<h3 id="php-js-and-xml">PHP, JS and XML</h3>

<p>Use the <code class="highlighter-rouge">@deprecated</code> tag to mark methods as deprecated and follow it up with an explanation.</p>

<p>Use the  <code class="highlighter-rouge">@see</code> tag to recommend the new API to use instead of the old one.</p>

<h4 id="deprecated-tag-in-php">Deprecated tag in PHP</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>/**
 * @deprecated because new api was introduced
 * @see \New\Api
 */
</code></pre>
</div>

<h4 id="deprecated-tag-in-xmlhtml">Deprecated tag in XML/HTML</h4>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;!--
@deprecated because new api was introduced
@see NewApi
--&gt;
</code></pre>
</div>

<h3 id="webapi">WebAPI</h3>

<p>When replacing a WebAPI method with a new implementation that has a different signature, make sure it remains accessible on the same resource but with the next sequential version.</p>

<h3 id="deprecation-testing">Deprecation testing</h3>

<p>Every piece of code that is deprecated MUST be covered by a static test that will fail if some code uses the deprecated piece of code.</p>

<h3 id="removal-of-deprecated-code">Removal of deprecated code</h3>

<p>Deprecated code is preserved for the following time frames:</p>

<ul>
  <li><code class="highlighter-rouge">@api</code> code: Until the next major version of the component</li>
  <li>non-<code class="highlighter-rouge">@api</code> code: The next 2 minor releases or until a major release</li>
</ul>

<h2 id="documentation-of-backward-incompatible-changes">Documentation of Backward Incompatible Changes</h2>

<p>Backward incompatible changes must be approved by an architect and documented in the scope of the task that introduces those changes.</p>

<p>Examples of these tasks include:</p>

<ul>
  <li>Changing the input/output values format of a method</li>
  <li>Changing a value format in the DB</li>
  <li>Changing XML files (layouts, configuration files, etc.)</li>
</ul>

<p>Some changes are detected and documented by an automated tool.
These backward incompatible changes do not need manual documentation:</p>

<ul>
  <li>Adding/removing a class/interface</li>
  <li>Adding/removing a method</li>
  <li>Modifying a method signature</li>
  <li>Adding/removing a class/interface constant</li>
  <li>Adding removing a class property</li>
</ul>

<p>Auto-generated <a href="https://htmlpreview.github.io/?https://github.com/magento/devdocs/blob/develop/_includes/changes/ce/216-develop.html">CE changes</a></p>

<p>Auto-generated <a href="https://htmlpreview.github.io/?https://github.com/magento/devdocs/blob/develop/_includes/changes/ee/216-develop.html">EE changes</a></p>

<h3 id="where-to-document">Where to document</h3>

<p>In the <a href="https://github.com/magento/devdocs">DevDocs repository</a>, manually add backward incompatible changes to the following file:</p>

<p><code class="highlighter-rouge">https://github.com/magento/devdocs/blob/develop/guides/v&lt;version&gt;/release-notes/backward-incompatible-changes.md</code></p>

<p>Where: <code class="highlighter-rouge">&lt;version&gt;</code> is the MINOR version of the product (2.1, 2.2, 2.3, etc).</p>

<p>Example: <a href="https://github.com/magento/devdocs/blob/develop/guides/v2.2/release-notes/backward-incompatible-changes.md"><code class="highlighter-rouge">https://github.com/magento/devdocs/blob/develop/guides/v2.2/release-notes/backward-incompatible-changes.md</code></a>.</p>

<p>Update the page for the <em>next</em> MINOR product release when working in the <code class="highlighter-rouge">develop</code> branch of Magento.</p>

<p>For example, when 2.2 is released, a new <code class="highlighter-rouge">backward-incompatible-changes.md</code> for 2.3 becomes available for editing.</p>

<p>In order to update the page, create a PR to the DevDocs repository with your changes.</p>


		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/contributor-guide/backward-compatible-development/index.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.0/contributor-guide/backward-compatible-development/" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.0/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.0/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

