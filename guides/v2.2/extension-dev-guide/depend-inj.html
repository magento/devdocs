<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Dependency injection | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/extension-dev-guide/depend-inj.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.2/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.2 RC
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/extension-dev-guide/depend-inj.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/extension-dev-guide/depend-inj.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/extension-dev-guide/depend-inj.html">Magento 2.2 RC</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Enterprise Cloud Edition Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

    
    <div class="message-banner">
        <strong>Review our 2.2 release candidate!</strong> This beta version documentation includes B2B and more. <a href="/guides/v2.2/release-notes/release-candidate/quick-start.html">See the Quickstart Guide</a><br/>
        Stay tuned — We'll roll out more 2.2 documentation updates in the coming weeks.
    </div> 
    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">


<h4>PHP Developer Guide</h4>






		<ul>

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">Introduction</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/intro/developers_roadmap.html">Developer roadmap</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/intro/intro-composer.html">Introduction to Composer</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/intro/intro-composer-gloss.html">Glossary of common terms</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/prepare/prepare.html">Prepare (development quick start)</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/prepare/dev-modtypes.html">Component types and versioning</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/prepare/prepare_file-str.html">About component file structure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/prepare/dev-summary.html">Roadmap for developing and packaging components</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/prepare/lifecycle.html">Extension lifecycle</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/build/build.html">Build</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/di-xml-file.html">The di.xml file</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/optimal-dev-environment.html">Optimal development environment</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/composer-integration.html">The composer.json file</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/required-configuration-files.html">Define your configuration files</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/module-file-structure.html">Create your component file structure</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/component-registration.html">Register your component</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/XSD-XML-validation.html">URN schema validation</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/create_component.html">Name your component</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/module-load-order.html">Component load order</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/build/enable-module.html">Enable or disable your component</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/package/package.html">Package</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/package/package_module.html">Package a component</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/package/package_mktpl.html">Upload your component to the Magento Marketplace</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/validate/validate.html">Validate</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/validate/test-module.html">Test your component</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/cache/partial-caching.html">Partial caching</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cache/partial-caching/database-caching.html">Create custom cache engines</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cache/partial-caching/create-cache-type.html">Create a cache type</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/cache/page-caching.html">Full page caching</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cache/page-caching/public-content.html">Public content</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cache/page-caching/private-content.html">Private content</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/cli-cmds/cli-add.html">Add CLI commands</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cli-cmds/cli-naming-guidelines.html">Command naming guidelines</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/cli-cmds/cli-howto.html">How to add CLI commands</a></li>

									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/staging.html">Staging (Enterprise Edition only)</a></li>
									
								

									


								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/extension-dev-guide/module-development.html">Component development</a></li>
									
								

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/service-contracts/service-contracts.html">Service contracts</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/api-concepts.html">Public interfaces & APIs</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/service-contracts/design-patterns.html">Service contract design patterns</a></li>

									

								

									

									<li class="level-2  active "><a href="/guides/v2.2/extension-dev-guide/depend-inj.html">Dependency injection</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/object-manager.html">ObjectManager</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/events-and-observers.html">Events and observers</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/factories.html">Factories</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/proxies.html">Proxies</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/code-generation.html">Code generation</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/attributes.html">EAV and extension attributes</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/plugins.html">Plugins (Interceptors)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/routing.html">Routing</a></li>

									

								

									

										<li class="level3Parent " id="index"><a href="#">Indexing</a>


									

								

									


											<li class="level3Child index " data-menunode="index"><a href="/guides/v2.2/extension-dev-guide/indexing.html">Indexing overview</a>


									

								

									


											<li class="level3Child index " data-menunode="index"><a href="/guides/v2.2/extension-dev-guide/indexer-batch.html">Indexer optimization</a>


									

								

									


											<li class="level3Child index " data-menunode="index"><a href="/guides/v2.2/extension-dev-guide/indexing-custom.html">Adding a custom indexer</a>


									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/message-queues.html">Message Queues (Enterprise Edition Only)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/extension_attributes/adding-attributes.html">Adding extension attributes to entity</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/bulk-operations.html">Bulk Operations (Enterprise Edition Only)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/service-contracts/service-to-web-service.html">Configure services as web APIs</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/backward-compatibility.html">Backward compatibility</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/implement-bulk.html">Example bulk operations implementation (Enterprise Edition Only)</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/searching-with-repositories.html">Searching with Repositories</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/howdoi/php/php_clear-dirs.html">Clear directories during development</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/adapters.html">Adapters</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/versioning/">Versioning and compatibility</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">Configuration</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/configuration/sensitive-and-environment-settings.html">Sensitive and environment settings</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/configuration/importers.html">Configuration importers</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">Framework</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/framework/serializer.html">Serialize Library</a></li>

									

								

								
								



						

					

						

						

							


								


								

									

										<li class="levela1"><span class="nav-header">Security</span></li>

									


								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/xss-protection.html">XSS prevention strategies</a></li>

									

								

									

									<li class="level-2 "><a href="/guides/v2.2/extension-dev-guide/security/non-secure-functions.html">Non-secure functions</a></li>

									

								

								
								



						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.2/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">
            <span property="name">PHP Developer Guide</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Dependency injection</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Dependency injection</h1>

  


</section>


			<h2 id="dependency-injection-overview">Dependency injection overview</h2>

<p>Magento 2 uses <em>dependency injection</em> as an alternative to the Magento 1.x <code class="highlighter-rouge">Mage</code> class.
<a href="https://en.wikipedia.org/wiki/Dependency_injection" target="_blank">Dependency injection</a> is the concept of the external environment injecting dependencies for an object instead of that object manually creating them internally.</p>

<p>In simple terms, when object A requires object or value B to fulfill a function, then B is a dependency of A.</p>

<h2 id="dependency-inversion-principle">Dependency inversion principle</h2>

<p>When using dependency injection, we encourage you to follow the  <a href="http://www.oodesign.com/dependency-inversion-principle.html" target="_blank">dependency inversion principle</a>, a coding principle that stipulates you use abstractions to reduce code dependencies.
This means that high level classes should use the interface of a low level class instead of working with it directly.</p>

<p>The <a href="/guides/v2.2/extension-dev-guide/build/di-xml-file.html"><code class="highlighter-rouge">di.xml</code></a> file maps an interface dependency to a preferred implementation class.</p>

<h2 id="object-manager">Object manager</h2>

<p>The <a href="/guides/v2.2/extension-dev-guide/object-manager.html">object manager</a> is a Magento service class that helps instantiate objects at the beginning of the bootstrapping process.</p>

<p>During class construction, the object manager injects the appropriate dependency as defined in the <a href="/guides/v2.2/extension-dev-guide/build/di-xml-file.html"><code class="highlighter-rouge">di.xml</code></a> file.</p>

<h2 id="constructor-signature-dependencies">Constructor signature dependencies</h2>

<p>Magento uses class constructor signatures, not <a href="/guides/v2.2/coding-standards/docblock-standard-general.html">DocBlock</a> annotations, to retrieve information about what dependencies to pass to an object’s constructor.
If your code follows the dependency inversion principle and uses interfaces instead of specific implementations, you do not have to worry about class definitions.</p>

<h2 id="compiling-dependencies">Compiling dependencies</h2>
<p>A <a href="/guides/v2.2/config-guide/cli/config-cli-subcommands-compiler.html">code compiler tool</a> collects all the dependency information in a class and stores that information in files.
During class creation, the <code class="highlighter-rouge">ObjectManager</code> uses this information to create concrete objects in the application.</p>

<p>In other words, the compiler helps generate all non-existing <span term-uuid="2be50595-c5c7-4b9d-911c-3bf2cd3f7beb" class="glossary-term" data-toggle="popover">dependency injection</span> service classes (<a href="/guides/v2.2/extension-dev-guide/proxies.html">proxies</a>, <a href="/guides/v2.2/extension-dev-guide/factories">factories</a> and <a href="/guides/v2.2/extension-dev-guide/plugins.html">interceptors</a>) declared in code or configuration.</p>

<h2 id="injection-types-used-in-magento">Injection types used in Magento</h2>

<p>This section explains the two dependency injection types used in Magento using the following example:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php">namespace Magento\Backend\Model\Menu;
class Builder
{
    /**
     * @param \Magento\Backend\Model\Menu\Item\Factory $menuItemFactory
     * @param \Magento\Backend\Model\Menu $menu
     */
    public function __construct(
        Magento\Backend\Model\Menu\Item\Factory $menuItemFactory,  // Service dependency
        Magento\Backend\Model\Menu $menu  // Service dependency
    ) {
        $this-&gt;_itemFactory = $menuItemFactory;
        $this-&gt;_menu = $menu;
    }

    public function processCommand(\Magento\Backend\Model\Menu\Builder\CommandAbstract $command) // API param
    {
        // processCommand Code
    }
}</code></pre></figure>

<h3 id="constructor-injection">Constructor injection</h3>

<p>Magento uses constructor injection to provide dependencies through an object’s class constructor.
In the preceding example, <code class="highlighter-rouge">$menuItemFactory</code> and <code class="highlighter-rouge">$menu</code> are the dependencies provided to the class through its constructor.</p>

<p>You must use constructor dependency injection for all optional and required dependencies of an object.</p>

<div class="bs-callout bs-callout-info" id="proxy-info">
  <p><strong>Optional dependencies</strong><br />
  Optional dependencies are the objects that your class uses for specific methods and scenarios.
  If your class does not always use these classes and instantiating them is expensive, consider using a <a href="/guides/v2.2/extension-dev-guide/proxies.html">proxy</a>.</p>
</div>

<h3 id="method-injection">Method injection</h3>

<p>Method injection is when an object specifies a dependency in one of its methods instead of its constructor.
In the example, above <code class="highlighter-rouge">$command</code> is the dependency passed into the class through the <code class="highlighter-rouge">processCommand</code> method.</p>

<p>When an object needs to act on a dependency, you can use method injection.</p>

<h2 id="injectable-and-newable-objects">Injectable and newable objects</h2>

<p><strong>Injectable:</strong> Service objects that are singletons obtained through dependency injection.
The object manager uses the configuration in the <code class="highlighter-rouge">di.xml</code> file to create these objects and inject them into constructors.</p>

<p><strong>Newable/non-injectable:</strong> Objects obtained by creating a new class instance every time.
Transient objects, such as those that require external input from the user or database, fall into this <span term-uuid="50e49338-1e6c-4473-8527-9e401d67ea2b" class="glossary-term" data-toggle="popover">category</span>.
Attempts to inject these objects produce either an error that the object could not be created or an incorrect object that is incomplete.</p>

<p>For example, you cannot use a model object such as <a href="https://github.com/magento/magento2/blob/2.0/app/code/Magento/Catalog/Model/Product.php" target="_blank"><code class="highlighter-rouge">app/code/Magento/Catalog/Model/Product.php</code></a> for dependency injection.
You need to provide a product id or explicitly request a new, empty instance of that object, and since you cannot specify this in the constructor signature, Magento cannot inject the object.</p>

<h2 id="rules-for-using-dependency-injection">Rules for using dependency injection</h2>

<ul>
  <li>Injectable objects may request other dependencies in their constructors if those objects are also injectable, but make sure you are not introducing circular dependencies.</li>
  <li>If an injectable object needs to produce newable objects, it must ask for a <a href="/guides/v2.2/extension-dev-guide/factories.html">factory</a> in its constructor since factories are injectable.</li>
  <li>If an injectable object needs to perform some actions on newable object, it must receive that object as a function method argument.</li>
  <li>You can create newable objects in services with object <a href="/guides/v2.2/extension-dev-guide/factories.html">factories</a> or you can pass them in as method parameters.</li>
  <li>Newable objects should not hold a field reference to an injectable object nor should they request one in their constructor.</li>
  <li>Classes must not ask for the ObjectManager itself to be passed as a constructor dependency. The only <span term-uuid="53da11f1-d0b8-4a7e-b078-1e099462b409" class="glossary-term" data-toggle="popover">exception</span> to this rule are custom factories with more elaborate needs than the autogenerated factories can provide.</li>
  <li>The ObjectManager may be used in integration tests to arrange the test environment.</li>
</ul>

<p><strong>Related topics</strong></p>

<ul>
  <li><a href="/guides/v2.2/extension-dev-guide/build/di-xml-file.html">The <code class="highlighter-rouge">di.xml</code> file</a></li>
  <li><a href="/guides/v2.2/extension-dev-guide/object-manager.html">ObjectManager</a></li>
  <li><a href="/guides/v2.2/extension-dev-guide/plugins.html">Plugins</a></li>
  <li><a href="/guides/v2.2/extension-dev-guide/routing.html">Routing</a></li>
  <li><a href="/guides/v2.2/config-guide/bootstrap/magento-bootstrap.html">Magento application initialization and bootstrap</a></li>
  <li><a href="/guides/v2.2/architecture/archi_perspectives/components/modules/mod_depend.html">Module Dependencies</a></li>
  <li><a href="/guides/v2.2/extension-dev-guide/api-concepts.html">Programming concepts</a></li>
</ul>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.0/extension-dev-guide/depend-inj.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/extension-dev-guide/depend-inj.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

