<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Upgrade Magento Commerce (Cloud) | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/cloud/project/project-upgrade.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown" data-version="2.2">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/project/project-upgrade.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/project/project-upgrade.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/project/project-upgrade.html">Magento 2.2</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/b2b/bk-b2b.html">B2B Developer Guide</a></li>
          
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" autocomplete="off" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">



<h4></h4>
<div class="left-navigation">
    <ul>
    
    

<li class="nav-level1  " id="welcome-to-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/bk-cloud.html">Welcome to Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="starter-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-architecture.html">Starter architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="starter-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-arch.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/welcome/discover-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="onboarding-tasks">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-project-environments">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-project-owner.html">Prepare project environments</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="technologies-and-requirements">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/requirements/cloud-requirements.html">Technologies and requirements</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-github.html">GitHub</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/cloud-fastly.html">Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh-and-sftp">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH and sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="blackfire-profiler">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Blackfire Profiler</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="first-time-local-environment-setup">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/access-acct/first-time-setup.html">First-time local environment setup</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-for-local-environment-setup">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace.html">Prepare for local environment setup</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento-prerequisites">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="enable-ssh-keys">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-the-magento-file-system-owner">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="clone-and-branch-the-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-2_clone.html">Clone and branch the project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-install.html">Install Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="first-time-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/first-time-deploy.html">First time deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-an-existing-magento-project">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Import an existing Magento project</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="first-steps-for-importing-magento-ee">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="find-the-information-you-need-for-your-import">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="prepare-your-existing-magento-ee-system">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="import-magento-ee-into-magento-enterprise-cloud-edition">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="configure-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/configure/configuration-overview.html">Configure Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="set-up-fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/fastly.html">Set up Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-fastly-vcl-snippets">
            
            
        
            
            <a href="/guides/v2.2/cloud/configure/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-cron-jobs">
            
            
        
            
            <a href="/guides/v2.2/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id=".magento.app.yaml">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-routes">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure routes</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="routes.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_routes.html">routes.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="server-side-includes">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-services">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure services</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="services.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services.html">services.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-mysql-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-redis-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="set-up-elasticsearch-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-rabbitmq-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-project">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/projects.html">Manage your project</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="configure-your-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-basic.html">Configure your project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="project-structure">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-start.html">Project structure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="create-and-manage-users">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/user-admin.html">Create and manage users</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-cli">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-start.html">Manage branches with the CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="snapshots-and-backup-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-snap.html">Snapshots and backup management</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-environments">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/env/environments.html">Manage your environments</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-over.html">Configuration management</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="example-of-managing-system-specific-settings">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="environment-variables">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Environment variables</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="overview-of-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_over.html">Overview of environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-application-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_magento.html">Magento application environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-commerce-(cloud)-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_cloud.html">Magento Commerce (Cloud) environment variables</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-reference">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configuration reference</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="all-configuration-paths-except-payments-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-most.html">All configuration paths except payments reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="payment-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-payment.html">Payment configuration paths reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="sensitive-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-sens.html">Sensitive configuration paths reference</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="upgrades-and-patches">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2 active " id="upgrade-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-upgrade.html">Upgrade Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="patch-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-patch.html">Patch Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="deploy-your-store">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/stage-prod-live.html">Deploy your store</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="deployment-process">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-deploy.html">Deployment process</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="protective-block">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-prot.html">Protective block</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="build-and-deploy-on-local">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="prepare-to-deploy-to-staging-and-production">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="migrate-and-deploy-static-files-and-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate.html">Migrate and deploy static files and data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="test-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-test.html">Test deployment</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="go-live-and-launch">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/live.html">Go live and launch</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="go-live-checklist">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/go-live-checklist.html">Go live checklist</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="launch-steps">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/launch-steps.html">Launch steps</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="troubleshooting">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/trouble/trouble.html">Troubleshooting</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="troubleshoot-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/trouble.html">Troubleshoot deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="view-logs-for-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/environments-logs.html">View logs for troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="incorrect-credentials">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-a-new-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-deployment-failure">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_fastly.html">Fastly troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/redis-troubleshooting.html">Redis troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-encryption-key">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-html-minification">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-google-analytics-during-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-sitemap-and-robots.txt">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/robots-sitemap.html">Add sitemap and robots.txt</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="how-to">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <span>How To</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="install-and-update-extensions">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Install and update extensions</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="install-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/install-components.html">Install extensions</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="update-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/update-components.html">Update extensions</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="merge-and-delete-an-environment-(tutorial)">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-a-theme">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/custom-theme.html">Install a theme</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-optional-sample-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/sample-data.html">Install optional sample data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="run-a-php-debugger">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/debug.html">Run a PHP debugger</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    </ul>
</div>

	</div>

</aside>


<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Commerce (Cloud)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Upgrade Magento Commerce (Cloud)</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">Upgrade Magento Commerce (Cloud)</h1>

  


</section>


			<p>This information details how to upgrade Magento Commerce (Cloud) to 2.2.X from any version, and upgrading to new 2.2.X versions.</p>

<p>When you upgrade Magento Commerce (Cloud), you also upgrade with patches and available hotfixes as part of the <code class="highlighter-rouge">magento-cloud-metapackage</code>. Make sure you have <code class="highlighter-rouge">auth.json</code> in your project root folder if there isnâ€™t one already.</p>

<p>Our upgrades are Composer driven. For more information on Composer, see <a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer in Cloud</a>.</p>

<p>When upgrading from 2.0.X or 2.1.X to 2.2.X, please see <a href="#old-version">Upgrade from 2.0.X or 2.1.X</a>. For additional information on the release, see the [Magento Commerce (Cloud) 2.2 Release Notes].</p>

<div class="bs-callout bs-callout-warning">
  <p>Always apply and test a patch your local system in an active branch. You can push and test in an Integration environment prior to deploying across all environments.</p>
</div>

<h2 id="upgradepaths">Supported upgrade paths to 2.2</h2>
<p>You can directly upgrade to Magento Commerce (Cloud) 2.2 from the following versions:</p>

<ul>
  <li>2.0.X versions: 2.0.14, 2.0.15, 2.0.16</li>
  <li>2.1.X versions: 2.1.7, 2.1.8, 2.1.9</li>
</ul>

<p>We have heavily tested and verified upgrades to 2.2 from the latest three versions of 2.0.X and 2.1.X.</p>

<p>You can attempt to upgrade from any version directly to Magento Commerce (Cloud) 2.2. We cannot guarantee the results. For example, you should be able to upgrade from 2.0.10 or 2.1.4 directly to 2.2.</p>

<p>If you prefer a secured and verified upgrade path, you can upgrade to one of the verified and tested versions, then directly upgrade to 2.2. For example, you could upgrade from 2.0.10 to 2.0.14, then upgrade to 2.2.</p>

<p>When upgrading from any version to 2.2, please review the following sections to update your settings, make changes, and upgrade required software prior to upgrading Magento.</p>

<h2 id="old-version">Upgrade from 2.0.X or 2.1.X</h2>
<p>To upgrade from <strong>2.0.X</strong>:</p>

<ul>
  <li><a href="#php">Upgrade your PHP version</a>: v2.2 supports PHP 7.0 and later</li>
  <li><a href="#magento-app-yaml">.magento.app.yaml</a>: Update the file with new settings and required changes for hooks and environment variables</li>
  <li><a href="variable">Verify or set the ADMIN_EMAIL variable</a>: This variable is required for upgrades and patch to 2.2 and later</li>
</ul>

<p>To upgrade from <strong>2.1.X</strong>:</p>

<ul>
  <li><a href="#php">Upgrade your PHP version</a>: v2.2 supports PHP 7.0 and later</li>
  <li><a href="#config">Configuration Management</a>: Create a new <code class="highlighter-rouge">config.php</code> using the <code class="highlighter-rouge">config.local.php</code> to properly upgrade</li>
  <li><a href="#magento-app-yaml">.magento.app.yaml</a>: Update the file with new settings and required changes for hooks and environment variables</li>
  <li><a href="variable">Verify or set the ADMIN_EMAIL variable</a>: This variable is required for upgrades and patch to 2.2 and later</li>
</ul>

<p>After completing your upgrade, you may also want to <a href="#extensions">Verify and upgrade your extensions</a>.</p>

<h3 id="php">Upgrade your PHP version</h3>
<p>With v2.2, we only support PHP 7.0 and later. Make sure to upgrade your local development workspace PHP version. For more information, see the following:</p>

<ul>
  <li><a href="http://devdocs.magento.com/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html#php">PHP</a> information for your local Magento workspace</li>
  <li><a href="http://php.net/manual/en/migration70.php" target="_blank">Migrating from PHP 5.6 to PHP 7.0.x</a></li>
  <li><a href="http://devdocs.magento.com/guides/v2.2/install-gde/system-requirements-tech.html#php">Magento 2.2.x technology stack requirements</a></li>
</ul>

<h3 id="config">Configuration Management and upgrading</h3>
<p>If you are upgrading from 2.1.4 or later to 2.2.X and use Configuration Management, you need to migrate <code class="highlighter-rouge">config.local.php</code> to a temporary <code class="highlighter-rouge">config.php</code> file to your Git branch. When you upgrade without having this file prepared, you will encounter an error with a list of steps to complete prior to upgrading.</p>

<p>Previous versions with Configuration Management use a <code class="highlighter-rouge">config.local.php</code> file for Configuration Management. Starting with 2.2.0, <a href="http://devdocs.magento.com/guides/v2.2/cloud/live/sens-data-over.html">Configuration Management</a> uses a different file name of <code class="highlighter-rouge">config.php</code>.</p>

<p>We recommend creating a temporary <code class="highlighter-rouge">config.php</code> file for your Git branch prior to upgrading:</p>

<ol>
  <li>Create a copy of <code class="highlighter-rouge">config.local.php</code> and name it <code class="highlighter-rouge">config.php</code>. You should add this file in the <code class="highlighter-rouge">app/etc</code> folder.</li>
  <li>Git add and commit the file to your branch.</li>
  <li>Push the file to your Integration branch and environment.</li>
  <li>Continue preparing and upgrade to 2.2.X.</li>
</ol>

<p>For more information, see <a href="http://devdocs.magento.com/guides/v2.2/cloud/live/sens-data-over.html#migrate">Migrate config.local.php to config.php</a>.</p>

<p>After you finish upgrading, you can remove <code class="highlighter-rouge">config.php</code> and create a new, complete file. For more information, see <a href="#configphp">Create a new config.php file</a>. This file works exactly as <code class="highlighter-rouge">config.local.php</code>, with additional settings including a list of your enabled modules, additional configurations, and a different name.</p>

<div class="bs-callout bs-callout-warning">
  <p>You can only delete this file to replace it this one time. After generating a correct config.php file, you cannot delete the file to generate a new one. For more information, see <a href="http://devdocs.magento.com/guides/v2.2/cloud/live/sens-data-over.html">Configuration Management and Pipeline Deployment</a>.</p>
</div>

<h3 id="magento-app-yaml">Update .magento.app.yaml</h3>
<p>If you are upgrading from 2.0.X or 2.1.X to 2.2.X, you need to also update your <a href="http://devdocs.magento.com/guides/v2.2/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a> or you will encounter errors. Magento Commerce (Cloud) 2.2.X has new settings in the file.</p>

<ol>
  <li>Locate and edit your <code class="highlighter-rouge">.magento.app.yaml</code> in your Git branch.</li>
  <li>For the PHP version, make sure it is 7.0: <code class="highlighter-rouge">type: php:7.0</code></li>
  <li>
    <p>We have updated our build and deploy hooks. Locate the <code class="highlighter-rouge">hooks</code> section, and update the following:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> hooks:
   # We run build hooks before your application has been packaged.
   build: |
       php ./vendor/bin/m2-ece-build
   # We run deploy hook after your application has been deployed and started.
   deploy: |
       php ./vendor/bin/m2-ece-deploy
</code></pre>
    </div>
  </li>
  <li>
    <p>Enter the following environment variables to the end of your file:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code> variables:
   env:
     CONFIG__DEFAULT__PAYPAL_ONBOARDING__MIDDLEMAN_DOMAIN: 'payment-broker.magento.com'
     CONFIG__STORES__DEFAULT__PAYMENT__BRAINTREE__CHANNEL: 'Magento_Enterprise_Cloud_BT'
     CONFIG__STORES__DEFAULT__PAYPAL__NOTATION_CODE: 'Magento_Enterprise_Cloud'
</code></pre>
    </div>
  </li>
  <li>Save the file and push to your Git branch.</li>
</ol>

<p><strong>For Pro plan merchants:</strong> When you are ready to deploy to Pro Staging and Production environments, you must enter a <a href="/guides/v2.2/cloud/bk-cloud.html#gethelp">Support ticket</a> advising you need your hooks updated for Magento Commerce (Cloud) 2.2.</p>

<div class="bs-callout bs-callout-warning">
  <p><strong>For Pro:</strong> You may encounter deployment errors for Pro to your Staging and Production environments if the hooks are not updated. Please enter a <a href="/guides/v2.2/cloud/bk-cloud.html#gethelp">Support ticket</a> advising you need your hooks updated in Staging and Production for Magento Commerce (Cloud) 2.2.</p>
</div>

<h3 id="variable">Verify or set the ADMIN_EMAIL variable</h3>
<p>The environment variable <code class="highlighter-rouge">ADMIN_EMAIL</code> is required for upgrading and patching. This email is used for sending password reset requests and verified during when updating Magento Commerce (Cloud). To set, see <a href="/guides/v2.2/cloud/before/before-project-owner.html#variables">Add admin variables for Admin access</a>.</p>

<h2 id="backup-db">Back up the database</h2>
<p>We recommend that you first back up the database of the system you are upgrading. Use the following steps to back up your Integration, Staging, and Production environments.</p>

<p>Back up your Integration environment database and code:</p>

<ol>
  <li>
    <p>Enter the following command to make a local backup of the remote database:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>magento-cloud db:dump
</code></pre>
    </div>
  </li>
  <li>
    <p>Enter the following command to back up code and media:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>php bin/magento setup:backup --code [--media]
</code></pre>
    </div>

    <p>You can optionally omit <code class="highlighter-rouge">[--media]</code> if you have a large number of static files that are already in source control.</p>
  </li>
</ol>

<p>Back up your staging or production system database:</p>

<ol>
  <li><a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH to the server</a>.</li>
  <li>
    <p>Find the database login information:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>php -r 'print_r(json_decode(base64_decode($_ENV["MAGENTO_CLOUD_RELATIONSHIPS"]))-&gt;database);'
</code></pre>
    </div>
  </li>
  <li>
    <p>Create a database dump:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>mysqldump -h &lt;database host&gt; --user=&lt;database user name&gt; --password=&lt;password&gt; --single-transaction &lt;database name&gt; | gzip - &gt; /tmp/database.sql.gz
</code></pre>
    </div>
  </li>
</ol>

<h2 id="verify-changes">Verify other changes</h2>
<p>Verify other changes youâ€™re going to submit to source control before you start the upgrade:</p>

<ol>
  <li>If you havenâ€™t done so already, change to your project root directory.</li>
  <li>
    <p>Enter the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git status
</code></pre>
    </div>
  </li>
  <li>If there are changes you do <em>not</em> want to submit to source control, branch or stash them now.</li>
</ol>

<h2 id="upgrade">Complete the upgrade</h2>

<ol>
  <li>
    <p>Change to your Magento base directory and enter the following command:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>composer require magento/magento-cloud-metapackage &lt;requiredversion&gt; --no-update
composer update
</code></pre>
    </div>

    <p>For example, to upgrade to version 2.1.4:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>composer require magento/magento-cloud-metapackage 2.1.4 --no-update
composer update
</code></pre>
    </div>
  </li>
  <li>
    <p>Add, commit, and push your changes to initiate a deployment:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git add -A
git commit -m "Upgrade"
git push origin &lt;branch name&gt;
</code></pre>
    </div>

    <p><code class="highlighter-rouge">git add -A</code> is required to add all changed files to source control because of the way Composer marshals base packages. Both <code class="highlighter-rouge">composer install</code> and <code class="highlighter-rouge">composer update</code> marshal files from the base package (that is, <code class="highlighter-rouge">magento/magento2-base</code> and <code class="highlighter-rouge">magento/magento2-ee-base</code>) into the package root.</p>

    <p>The files Composer marshals belong to the new version of Magento, to overwrite the outdated version of those same files. Currently, marshaling is disabled in Magento Commerce, so you must add the marshaled files to source control.</p>
  </li>
  <li>
    <p>Wait for deployment to complete.</p>
  </li>
  <li>
    <p><a href="#upgrade-verify">Verify your upgrade</a>.</p>
  </li>
</ol>

<h2 id="upgrade-verify">Verify your upgrade</h2>
<p>This section discusses how to verify your upgrade and to troubleshoot any issues you might find.</p>

<p>To verify the upgrade in your integration, staging, or production system:</p>

<ol>
  <li><a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH to the server</a>.</li>
  <li>
    <p>Enter the following command from your Magento root directory to verify the installed version:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>php bin/magento --version
</code></pre>
    </div>
  </li>
</ol>

<h2 id="configphp">Create a new config.php file</h2>
<p>After fully upgrading, you need to create an updated <code class="highlighter-rouge">config.php</code> file. You will only complete these instructions once. Complete any additional configuration changes through the Magento Admin in your Integration environment.</p>

<ol>
  <li>
    <p>Open a terminal on your local and use an SSH command to generate <code class="highlighter-rouge">/app/etc/config.php</code> on the environment:</p>

    <p><code class="highlighter-rouge">ssh -k &lt;SSH URL&gt; "&lt;Command&gt;"</code></p>

    <p>For example for Pro, to run the <code class="highlighter-rouge">scd-dump</code> on Integration <code class="highlighter-rouge">master</code>:</p>

    <p><code class="highlighter-rouge">ssh -k itnu84v4m4e5k-master-ouhx5wq@ssh.us.magentosite.cloud "php vendor/bin/m2-ece-scd-dump"</code></p>
  </li>
  <li>
    <p>Transfer <code class="highlighter-rouge">config.php</code> to your local system using <code class="highlighter-rouge">rsync</code> or <code class="highlighter-rouge">scp</code>. You can only add this file to the Git branch through your local.</p>

    <p><code class="highlighter-rouge">rsync &lt;SSH URL&gt;:app/etc/config.php ./app/etc/config.php</code></p>
  </li>
  <li>
    <p>Add and push <code class="highlighter-rouge">config.php</code> to the Git master branch.</p>

    <p><code class="highlighter-rouge">git add app/etc/config.php &amp;&amp; git commit -m "Add system-specific configuration" &amp;&amp; git push origin master</code></p>
  </li>
</ol>

<p>An updated file is generated with a module list and configuration settings at <code class="highlighter-rouge">/app/etc/config.php</code>.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>Important: For an upgrade, you will delete <code class="highlighter-rouge">config.php</code>. Once this file is added to your code, you should not delete it. If you need to remove or edit settings, you must manually edit the file to make changes.</p>
</div>

<h2 id="extensions">Verify and upgrade your extensions</h2>
<p>You may need to upgrade any third-party extensions and modules that supports v2.2. We recommend working in a new Integration branch with your extensions disabled. Review your third-party extension and module pages in Marketplace or other company sites to verify support for Magento Commerce and Magento Commerce (Cloud) v2.2.</p>

<p>We recommend <a href="/guides/v2.2/cloud/project/project-webint-snap.html#db-dump">backing up your database</a> prior to installing a number of extensions on your local and Integration environments.</p>

<ol>
  <li>Create a new branch on your local.</li>
  <li>Disable your extensions as needed.</li>
  <li>As available, download extension upgrades.</li>
  <li>Install the upgrade on your local in the Git branch as documented by the third-party documentation.</li>
  <li>Enable and test the extension locally.</li>
  <li>Push the code to test in your Integration environment.</li>
  <li>Push to Staging to test in a pre-production environment.</li>
</ol>

<p>Include the extensions in your going live steps to Production only after fully upgrading Production to v2.2. We strongly recommend fully upgrading your Production environment before including upgraded extensions.</p>

<h3 id="moreextensions">Additional extension upgrades</h3>
<p>We strongly recommend upgrading your Fastly module to v1.2.28 or later for Magento Commerce (Cloud) 2.2.</p>

<h2 id="upgrade-verify-tshoot">Troubleshoot your upgrade</h2>
<p>In some cases, an error similar to the following displays when you try to access your storefront or the Magento Admin in a browser:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>There has been an error processing your request
Exception printing is disabled by default for security reasons.
  Error log record number: &lt;error number&gt;
</code></pre>
</div>

<h3 id="view-error-details-on-the-server">View error details on the server</h3>
<p>To view the error in your integration system, <a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH to the server</a> and enter the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vi /app/var/report/&lt;error number&gt;
</code></pre>
</div>

<h3 id="resolve-the-error">Resolve the error</h3>
<p>One possible error occurs when the deployment hook failed, and therefore the database has not yet been fully upgraded. If so, an error similar to the following is displayed:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>a:4:{i:0;s:433:"Please upgrade your database: Run "bin/magento setup:upgrade" from the Magento root directory.
The following modules are outdated:
Magento_Sales schema: current version - 2.0.2, required version - 2.0.3
</code></pre>
</div>

<p>To resolve the error:</p>

<ol>
  <li><a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH to the server</a>.</li>
  <li><a href="/guides/v2.2/cloud/trouble/environments-logs.html">Examine the logs</a> to determine the source of the issue.</li>
  <li>
    <p>After you fix the source of the issue, push the change to the server, which causes the upgrade to restart.</p>

    <p>For example, on a local branch, enter the following commands:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>git add -A &amp;&amp; git commit -m "fixed deployment failure" &amp;&amp; git push origin &lt;branch name&gt;
</code></pre>
    </div>
  </li>
</ol>

<h3 id="deploy-error">Deployment error</h3>
<p>If you encounter a deployment error to Pro Staging and Production environments, you need to have us update your <code class="highlighter-rouge">.magento.app.yaml</code> hooks. Please enter a <a href="/guides/v2.2/cloud/bk-cloud.html#gethelp">Support ticket</a> advising you need your hooks updated in Staging and Production for Magento Commerce (Cloud) 2.2.</p>

<h4 id="related-topic">Related topic</h4>
<ul>
  <li><a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer</a></li>
  <li><a href="/guides/v2.2/cloud/howtos/install-components.html">Install components</a></li>
  <li><a href="/guides/v2.2/cloud/howtos/sample-data.html">Install optional sample data</a></li>
  <li><a href="/guides/v2.2/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment</a></li>
</ul>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.2/cloud/project/project-upgrade.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/cloud/project/project-upgrade.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

