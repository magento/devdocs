<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Blackfire.io for Magento Cloud | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">

	<link rel="stylesheet" href="/assets/css/app.css" />
	<link rel="stylesheet" href="/assets/css/print.css" media="print"/>

	<link rel="stylesheet" href="/common/css/devdocs.css" />
<link rel="alternate" type="application/rss+xml" title="Magento DevDocs RSS" href="/feed.xml" />

	<script>
  var baseUrl = "";
  var algolia = {
    id : "E642SEDTHL",
    index:  "devdocs",
    key:  "d2d0f33ab73e291ef8d88d8b565e754c"
  };
</script>



<!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;
h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};
(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;
})(window,document.documentElement,'async-hide','dataLayer',4000,
{'GTM-ML6GZCH':true});</script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66243208-1', 'auto');
    ga('require', 'GTM-ML6GZCH');
    ga('send', 'pageview');
</script>

<!-- Hotjar Tracking Code for http://devdocs.magento.com/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:806243,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<!-- heap analytics -->
<script type="text/javascript">
      window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
      heap.load("2619540280");
</script>




	<link rel="canonical" href="https://devdocs.magento.com/guides/v2.2/cloud/project/project-integrate-blackfire.html">

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body class="layout-default">

	<header class="site-header">

		<nav class="site-nav">

  <div class="menu-btn">
    <a id="menu-btn" class="menu-trigger menu-icon" href="#nav-main" aria-haspopup="true" aria-controls="nav-main"></a>
  </div>

  <div class="nav-container">

    <a class="logo" href="/">
      <img src="/assets/i/m-logo.svg" alt=""><img src="/assets/i/magento-logo.svg" alt="Magento" class="magento-logo" />
      <span class="site-logo">DevDocs</span>
    </a>

    <div id="nav-main" class="nav-main-wrap" aria-labelledby="menu-btn">
      
<div class="version-switcher dropdown" data-version="2.2">
	<button id="version-switcher-button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
    <li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.0/cloud/project/project-integrate-blackfire.html">Magento 2.0</a></li>
	
    <li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.1/cloud/project/project-integrate-blackfire.html">Magento 2.1</a></li>
	
    <li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Magento 2.2</a></li>
	
    <li><a class="dropdown-item" data-proofer-ignore href="/guides/v2.3/cloud/project/project-integrate-blackfire.html">Magento 2.3 Alpha</a></li>
	
  </ul>

</div>


      <!-- Main Navigation -->
<ul class="nav-main" role="menubar">

  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Setup</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          
          <li><a href="/guides/v2.2/performance-best-practices/index.html">Performance Best Practices</a></li>
          
          <li><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li><a href="/guides/v2.2/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li><a href="/magento-release-information.html">Release Information</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Development</span>

    <div class="nav-popup" role="menu" aria-hidden="true">

      <div class="nav-section">
        <div class="nav-section-title">Backend</div>
        <ul>
          <li><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          <li><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title">Frontend</div>
        <ul>
          <li class=""><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
          
        </ul>
      </div>

      <div class="nav-section">
        <div class="nav-section-title"><abbr>API</abbr></div>
        <ul>
          <li><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
          
          
          <li><a href="/guides/v2.2/marketplace/eqp/api.html">Marketplace EQP API Reference</a></li>
          <li><a href="https://developers.rjmetrics.com/" target="_blank">Magento BI Import REST API</a></li>
          
        </ul>
      </div>
    </div>

  </li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Testing</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        <li><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
        
        <li><a href="/guides/v2.2/magento-functional-testing-framework/release-2/introduction.html">Functional Acceptance Testing (New!)</a></li>
        
        <li><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
        <li><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
        <li><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
        <li><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
        <li><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
      </ul>
    </div>

  </li>


  <li class="nav-main-separator"></li>


  <li class="nav-main-item" tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Functional Areas</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
          
          <li class="leaf"><a href="/guides/v2.2/advanced-reporting/overview.html">Advanced Reporting</a></li>
          
        
        <li class="leaf"><a href="/guides/v2.2/b2b/bk-b2b.html">B2B</a></li>
        
        <li><a href="/guides/v2.2/howdoi/checkout/checkout_overview.html">Checkout</a></li>
        <li><a href="http://omsdocs.magento.com/en/" target="_blank">Order Management</a></li>
        <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payment Integrations</a></li>
        
          <li><a href="/guides/v2.2/extension-dev-guide/staging.html">Staging</a></li>
        
      </ul>
    </div>

  </li>


  <li class="nav-main-item"  tabindex="0" role="menuitem" aria-haspopup="true">
    <span tabindex="-1">Tutorials</span>

    <div class="nav-popup" role="menu" aria-hidden="true">
      <ul>
        
        <li><a  data-proofer-ignore href="/guides/v2.2/get-started/order-tutorial/order-intro.html">Order Processing with REST APIs</a></li>
        
        
        <li><a href="/guides/v2.2/rest/tutorials/configurable-product/config-product-intro.html">Create a configurable product with REST APIs</a></li>
        
        
        <li><a  data-proofer-ignore href="/guides/v2.2/howdoi/customize_product.html">Customize Product Creation Form</a></li>
        
        <li><a href="/guides/v2.2/howdoi/checkout/checkout_overview.html">Customize Checkout</a></li>
        <li><a href="/community/resources/support.html">Magento Support</a></li>
        <li><a href="/videos/">Video Tutorials</a></li>
      </ul>
    </div>

  </li>

</ul><!-- /.nav-main -->

    </div>

    <div class="search-btn">
      <a class="search-trigger search-icon" href="#"></a>
    </div>

    <form class="quick-search" action="/guides/v2.2/search.html" method="get" novalidate="novalidate">
      <input type="search" name="q" placeholder="Search" />
      <a href="#" class="quick-search-close">&times;</a>
    </form>

  </div>

</nav><!-- #site-nav -->
<div class="nav-main-fader"></div>


	</header>

	<div class="global-wrapper">

		




		<div class="main-container">
			<a id="main-content"></a>


<div class="content-container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" data-proofer-ignore class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">

		

		<h4 class="guide-title"></h4>
		<div class="collapsible-navigation">
		    <ul>
		    
		    	

<li class="nav-level1  " id="welcome-to-magento-commerce-(cloud)">
    

    
    <a href="/guides/v2.2/cloud/bk-cloud.html">Welcome to Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="subscriptions-and-plans">

            

            
            <a href="/guides/v2.2/cloud/basic-information/cloud-plans.html">Subscriptions and plans</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="onboarding-tasks">

            

            
            <a href="/guides/v2.2/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="architecture">
    

    
    <a href="/guides/v2.2/cloud/architecture/cloud-architecture.html">Architecture</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="starter-architecture">

            

            
            <a href="/guides/v2.2/cloud/basic-information/starter-architecture.html">Starter architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="starter-develop-and-deploy-workflow">

            

            
            <a href="/guides/v2.2/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">

            

            
            <a href="/guides/v2.2/cloud/architecture/pro-architecture.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">

            

            
            <a href="/guides/v2.2/cloud/architecture/pro-develop-deploy-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture-(legacy)">

            

            
            <a href="/guides/v2.2/cloud/architecture/pro-architecture-legacy.html">Pro architecture (legacy)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-staging-and-production-to-pro-projects-ui">

            

            
            <a href="/guides/v2.2/cloud/trouble/pro-env-management.html">Add Staging and Production to Pro projects UI</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="technologies-and-requirements">
    

    
    <a href="/guides/v2.2/cloud/requirements/cloud-requirements.html">Technologies and requirements</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">

            

            
            <a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">

            

            
            <a href="/guides/v2.2/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="git">

            

            
            <a href="/guides/v2.2/cloud/reference/git-integration.html">Git</a>
            

            
        </li>
        
        
        
        
        
        
        
        
        <li class="nav-level2  " id="ssh-and-sftp">

            

            
            <a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH and sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">

            

            
            <a href="/guides/v2.2/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id="blackfire.io">

            

            
            <a href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Blackfire.io</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="sendgrid">

            

            
            <a href="/guides/v2.2/cloud/project/sendgrid.html">SendGrid</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="integrations">
    

    
    <a href="/guides/v2.2/cloud/integrations/cloud-integrations.html">Integrations</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="bitbucket-integration">

            

            
            <a href="/guides/v2.2/cloud/integrations/bitbucket-integration.html">Bitbucket integration</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github-integration">

            

            
            <a href="/guides/v2.2/cloud/integrations/github-integration.html">GitHub integration</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="local-environment-setup">
    

    
    <a href="/guides/v2.2/cloud/access-acct/first-time-setup.html">Local environment setup</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-for-local-environment-setup">

            

            
            <a href="/guides/v2.2/cloud/before/before-workspace.html">Prepare for local environment setup</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento-prerequisites">

            

            
            <a href="/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="enable-ssh-keys">

            

            
            <a href="/guides/v2.2/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-the-magento-file-system-owner">

            

            
            <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="clone-and-branch-the-project">

            

            
            <a href="/guides/v2.2/cloud/before/before-setup-env-2_clone.html">Clone and branch the project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento">

            

            
            <a href="/guides/v2.2/cloud/before/before-setup-env-install.html">Install Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="first-time-deployment">

            

            
            <a href="/guides/v2.2/cloud/access-acct/first-time-deploy.html">First time deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="optional---install-sample-data">

            

            
            <a href="/guides/v2.2/cloud/howtos/sample-data.html">Optional - Install sample data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="optional---configure-xdebug">

            

            
            <a href="/guides/v2.2/cloud/howtos/debug.html">Optional - Configure Xdebug</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-docker">

            

            
            <a href="/guides/v2.2/cloud/reference/docker-config.html">Configure Docker</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="import-existing-code-into-a-project">
    

    
    <a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-first-steps.html">Import existing code into a project</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-your-existing-magento-commerce-system">

            

            
            <a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento Commerce system</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-magento-commerce-into-magento-commerce-(cloud)">

            

            
            <a href="/guides/v2.2/cloud/access-acct/first-time-setup_import-import.html">Import Magento Commerce into Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="configure-your-store">
    

    
    <a href="/guides/v2.2/cloud/configure/configuration-overview.html">Configure your store</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="best-practices-for-store-configuration">

            

            
            <a href="/guides/v2.2/cloud/configure/configure-best-practices.html">Best practices for store configuration</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">

            

            
            <a href="/guides/v2.2/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-magento-b2b">

            

            
            <a href="/guides/v2.2/cloud/configure/setup-b2b.html">Set up Magento B2B</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-cron-jobs">

            

            
            <a href="/guides/v2.2/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">

            

            
            <a href="/guides/v2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install,-manage,-and-upgrade-modules">

            

            
            <a href="/guides/v2.2/cloud/howtos/install-components.html">Install, manage, and upgrade modules</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-a-theme">

            

            
            <a href="/guides/v2.2/cloud/howtos/custom-theme.html">Install a theme</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-url-rewrites">

            

            
            <a href="/guides/v2.2/cloud/configure/import-url-rewrites.html">Import URL Rewrites</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="configure-fastly">
    

    
    <a href="/guides/v2.2/cloud/basic-information/cloud-fastly.html">Configure Fastly</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="set-up-fastly">

            

            
            <a href="/guides/v2.2/cloud/access-acct/fastly.html">Set up Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly-image-optimization">

            

            
            <a href="/guides/v2.2/cloud/cdn/fastly-image-optimization.html">Fastly Image Optimization</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-fastly-vcl-snippets">

            

            
            <a href="/guides/v2.2/cloud/configure/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-whitelist-vcl">

            

            
            <a href="/guides/v2.2/cloud/configure/fastly-vcl-whitelist.html">Custom whitelist VCL</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-blacklist-vcl">

            

            
            <a href="/guides/v2.2/cloud/configure/fastly-vcl-blacklist.html">Custom blacklist VCL</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-extend-admin-timeout-vcl">

            

            
            <a href="/guides/v2.2/cloud/configure/fastly-vcl-extend-timeout.html">Custom extend Admin timeout VCL</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-redirect-to-wordpress-vcl">

            

            
            <a href="/guides/v2.2/cloud/configure/fastly-vcl-wordpress.html">Custom redirect to WordPress VCL</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-block-bad-referer-vcl">

            

            
            <a href="/guides/v2.2/cloud/configure/fastly-vcl-badreferer.html">Custom block bad referer VCL</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly-troubleshooting">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble_fastly.html">Fastly troubleshooting</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="configure-environments">
    

    
    <a href="/guides/v2.2/cloud/env/environments.html">Configure environments</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="application">

            

            
            <a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">Application</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="build-and-deploy">

            

            
            <a href="/guides/v2.2/cloud/project/magento-env-yaml.html">Build and deploy</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="set-up-notifications">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/setup-notifications.html">Set up notifications</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="logging-handlers">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/log-handlers.html">Logging handlers</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="smart-wizards">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/smart-wizards.html">Smart wizards</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="environment-variables">

            

            
            <a href="/guides/v2.2/cloud/env/variables-intro.html">Environment variables</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="admin-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_magento.html">ADMIN variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="build-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/variables-build.html">Build variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="cloud-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/variables-cloud.html">Cloud variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="deploy-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/variables-deploy.html">Deploy variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="post-deploy-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/variables-post-deploy.html">Post-deploy variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="working-with-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/working-with-variables.html">Working with variables</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="routes">

            

            
            <a href="/guides/v2.2/cloud/project/project-conf-files_routes.html">Routes</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="server-side-includes">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="services">

            

            
            <a href="/guides/v2.2/cloud/project/project-conf-files_services.html">Services</a>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="set-up-mysql-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-redis-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="set-up-elasticsearch-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-rabbitmq-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="configuration-management-for-store-settings">
    

    
    <a href="/guides/v2.2/cloud/live/sens-data-over.html">Configuration management for store settings</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="example-of-managing-system-specific-settings">

            

            
            <a href="/guides/v2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="manage-your-project">
    

    
    <a href="/guides/v2.2/cloud/project/projects.html">Manage your project</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="configure-your-project">

            

            
            <a href="/guides/v2.2/cloud/project/project-webint-basic.html">Configure your project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="project-structure">

            

            
            <a href="/guides/v2.2/cloud/project/project-start.html">Project structure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="create-and-manage-users">

            

            
            <a href="/guides/v2.2/cloud/project/user-admin.html">Create and manage users</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">

            

            
            <a href="/guides/v2.2/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-cli">

            

            
            <a href="/guides/v2.2/cloud/env/environments-start.html">Manage branches with the CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="snapshots-and-backup-management">

            

            
            <a href="/guides/v2.2/cloud/project/project-webint-snap.html">Snapshots and backup management</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="deploy-your-store">
    

    
    <a href="/guides/v2.2/cloud/live/stage-prod-live.html">Deploy your store</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="deployment-process">

            

            
            <a href="/guides/v2.2/cloud/reference/discover-deploy.html">Deployment process</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">

            

            
            <a href="/guides/v2.2/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="protective-block">

            

            
            <a href="/guides/v2.2/cloud/live/live-prot.html">Protective block</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="build-and-deploy-on-local">

            

            
            <a href="/guides/v2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="prepare-to-deploy-to-staging-and-production">

            

            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="deploy-code-and-migrate-static-files-and-data">

            

            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate.html">Deploy code and migrate static files and data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="test-deployment">

            

            
            <a href="/guides/v2.2/cloud/live/stage-prod-test.html">Test deployment</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="go-live-and-launch">
    

    
    <a href="/guides/v2.2/cloud/live/live.html">Go live and launch</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="go-live-checklist">

            

            
            <a href="/guides/v2.2/cloud/live/go-live-checklist.html">Go live checklist</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="launch-steps">

            

            
            <a href="/guides/v2.2/cloud/live/launch-steps.html">Launch steps</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="troubleshooting">
    

    
    <a href="/guides/v2.2/cloud/trouble/trouble.html">Troubleshooting</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="troubleshoot-deployment">

            

            
            <a href="/guides/v2.2/cloud/access-acct/trouble.html">Troubleshoot deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="view-logs-for-troubleshooting">

            

            
            <a href="/guides/v2.2/cloud/trouble/environments-logs.html">View logs for troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="incorrect-credentials">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-a-new-project">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-deployment-failure">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis-troubleshooting">

            

            
            <a href="/guides/v2.2/cloud/trouble/redis-troubleshooting.html">Redis troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="reset-cron-jobs">

            

            
            <a href="/guides/v2.2/cloud/trouble/reset-cron-jobs.html">Reset cron jobs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-encryption-key">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-html-minification">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-google-analytics-during-deployment">

            

            
            <a href="/guides/v2.2/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="restore-configuration-files">

            

            
            <a href="/guides/v2.2/cloud/trouble/restore-configuration-files.html">Restore configuration files</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="site-availability">

            

            
            <a href="/guides/v2.2/cloud/trouble/site-availability.html">Site availability</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-site-map-and-search-engine-robots">

            

            
            <a href="/guides/v2.2/cloud/trouble/robots-sitemap.html">Add site map and search engine robots</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="theme-troubleshooting">

            

            
            <a href="/guides/v2.2/cloud/trouble/theme-troubleshooting.html">Theme troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="message-queues">

            

            
            <a href="/guides/v2.2/cloud/trouble/message-queues.html">Message queues</a>
            

            
        </li>
        
        
    </ul>
    
</li>


		    
		    	

<li class="nav-level1  " id="upgrades-and-patches">
    

    
    <a href="/guides/v2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="ece-tools-release-notes">

            

            
            <a href="/guides/v2.2/cloud/release-notes/cloud-tools.html">ECE-tools release notes</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="upgrade-to-use-ece-tools">

            

            
            <a href="/guides/v2.2/cloud/project/ece-tools-upgrade-project.html">Upgrade to use ECE-tools</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="update-ece-tools-version">

            

            
            <a href="/guides/v2.2/cloud/project/ece-tools-update.html">Update ECE-tools version</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="apply-custom-patches">

            

            
            <a href="/guides/v2.2/cloud/project/project-patch.html">Apply custom patches</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="upgrade-magento-version">

            

            
            <a href="/guides/v2.2/cloud/project/project-upgrade.html">Upgrade Magento version</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


		    
		    </ul>
		</div>

	</div>

</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

	

	

	<h1 class="page-heading">Blackfire.io for Magento Cloud</h1>

  


</section>

			<p><a href="https://blackfire.io/magento" target="_blank">Blackfire.io for Magento Cloud</a> is a PHP profiler and automated performance testing tool that can be used in the development Integration, Staging, and Production environments. It enables you to locate and investigate performance issues in your environment at the code level and creates a performance profile by tracking every PHP call, method, and SQL query performed by your code. Blackfire digs deeper to provide granular performance analytics.</p>

<p>In addition, it profiles your code automatically and notifies you whenever your code does not comply with best practices for Magento 2 code performance management. For a high level overview and demo of Blackfire, review the videos in the <a href="https://support.blackfire.io/blackfire-on-magento-cloud/introduction-to-blackfireio-on-magento-cloud" target="_blank">Introduction to Blackfire.io for Magento Cloud</a>.</p>

<p>For full details on integrations, also review <a href="https://support.blackfire.io/blackfire-on-magento-cloud/getting-started/configuring-blackfire-on-magento-cloud" target="_blank">Configuring Blackfire on Magento Cloud</a>.</p>

<p>Blackfire includes the following <a href="https://blackfire.io/docs/reference-guide/environments" target="_blank">environments</a> through their site:</p>

<ul>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;your instance reference&gt;)</code>—Integration and Development</li>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;your instance reference&gt;)</code>—Staging</li>
  <li><code class="highlighter-rouge">Magento Cloud (&lt;your instance reference&gt;)</code>—Production</li>
</ul>

<p><strong>For Pro</strong>:</p>
<ul>
  <li>You must enter a Support ticket with your Blackfire credentials to configure your Staging and Production environments with Blackfire.</li>
  <li>You must bypass the Fastly service in your Production environment when profiling with Blackfire. See <a href="https://blackfire.io/docs/reference-guide/configuration#bypassing-reverse-proxy-cache-and-content-delivery-networks-cdn" target="_blank">Bypassing Reverse Proxy, Cache, and Content Delivery Networks (CDN)</a>.</li>
</ul>

<h2 id="get-your-blackfire-credentials">Get your Blackfire credentials</h2>
<p>The Project Owner is the account owner, and their e-mail address is part of the credentials required for accessing Blackfire for your project. You can only use the Project Owner credentials to integrate Blackfire with Magento Commerce (Cloud) and to log in to the Blackfire website. An invitation email is sent to the Project Owner’s e-mail address to complete activation.</p>

<p>For information on setting up an account on Blackfire, see <a href="https://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-1-accessing-your-blackfire-account-as-a-magento-cloud-user" target="_blank">Accessing your Blackfire account as a Magento Cloud user</a>. You can access your Blackfire license key through <a href="/guides/v2.2/cloud/project/projects.html#integrations">project details</a>.</p>

<h2 id="collaborators">Add collaborator accounts</h2>
<p>After you access your Blackfire account, you can <a href="http://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-2-adding-collaborators-to-the-blackfire-environments" target="_blank">add additional collaborator accounts</a>.</p>

<p>We recommend adding at least one account through Blackfire to manage all access, integrations, and usage of the tool. We also recommend promoting one of the added members to Admin, to manage all Blackfire access and integrations.</p>

<ol>
  <li>Using your Project Owner Blackfire credentials, log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Navigate to the <em>Environments</em> tab and select an environment.</li>
  <li>Click the <strong>Settings</strong> tab.</li>
  <li>Enter an e-mail address and click <strong>Add Member</strong>.</li>
  <li>
    <p>In the <em>Revoke</em> drop-down list of an account, click <strong>Promote as an admin</strong>.</p>

    <p><img src="/common/images/cloud_blackfire-member.png" alt="Promote an admin" /></p>
  </li>
</ol>

<h2 id="enable-blackfire-on-local-workspace">Enable Blackfire on local workspace</h2>
<p>You need to install and configure Blackfire on your local workspace with your working Magento Commerce (Cloud) installation. You do <em>not</em> need to run these installations directly on the hosted environments; only on your local.</p>

<p>We recommend using the Blackfire installation guide to walk you through the process:</p>

<ol>
  <li>Log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Navigate to the <em>Environments</em> tab and select the <strong>Integration</strong> environment.</li>
  <li>Click the <strong>Settings</strong> tab.</li>
  <li>Scroll to the bottom and locate the <em>Server ID</em> and <em>Server Token</em> for the environment. You need these values for the instructions.</li>
  <li>Open the <a href="https://blackfire.io/docs/up-and-running/installation" target="_blank">Blackfire installation guide</a>, select the Operating System, and follow the instructions.</li>
</ol>

<h2 id="dev">Integrate Blackfire</h2>
<p>We recommend enabling Blackfire in all of your active environments, including the Integration environment. See <a href="https://support.blackfire.io/blackfire-on-magento-cloud/getting-started/step-3-configure-the-server-credentials-the-integration-with-magento-cloud" target="_blank">Configure the server credentials &amp; the integration with Magento Cloud</a>. You can integrate with the Pro Integration environment and Starter development branches.</p>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>For Starter plans, pushing your code and <code class="highlighter-rouge">.magento.app.yaml</code> file to the Staging and Master branches updates those environments directly. You can directly add Blackfire to those environments the way you do with development.</p>
</div>

<p>These instructions assume you have set up your <a href="/guides/v2.2/cloud/before/before-workspace.html">local workspace</a>.</p>

<ol>
  <li>Log in to <a href="https://blackfire.io/login" target="_blank">Blackfire</a>.</li>
  <li>Navigate to the <em>Environments</em> tab and select the <strong>Integration</strong> environment.</li>
  <li>Click the <strong>Builds</strong> tab.</li>
  <li>
    <p>Click the info icon next to Magento Cloud.</p>

    <p><img src="/common/images/cloud_blackfire-builds.png" alt="Click info icon" /></p>
  </li>
  <li>
    <p>In the <em>Magento Cloud Integration</em> page, follow the additional steps to complete the integration. The redacted content is the <strong>Project ID</strong>.</p>

    <p><img src="/common/images/cloud_blackfire-integration.png" alt="Blackfire Magento Cloud integration" /></p>
  </li>
</ol>

<h3 id="magentoappyaml">Add Blackfire to .magento.app.yaml</h3>
<p>By default, the <code class="highlighter-rouge">.magento.app.yaml</code> file includes the Blackfire module. If the module is not present, use the following instructions to update your <code class="highlighter-rouge">.magento.app.yaml</code> file, push the updated file to your remote branch, merge, and deploy across all environments.</p>

<ul>
  <li>For Starter, merging your Git branch across all environments adds the module.</li>
  <li>For Pro (legacy), you need to enter a Support ticket to have <code class="highlighter-rouge">.magento.app.yaml</code> updated to Staging and Production.</li>
</ul>

<p>We recommend working in a branch and creating a snapshot prior to installing. If you have a branch already created, you can skip down to the steps for modifying the <code class="highlighter-rouge">.magento.app.yaml</code> file. If you need instructions creating a branch, complete the following:</p>

<ol>
  <li>
    <p>Log in to your Magento Commerce (Cloud) project.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud login
</code></pre></div>    </div>
  </li>
  <li>
    <p>List projects.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:list
</code></pre></div>    </div>
  </li>
  <li>
    <p>List environments in the project.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:list <span class="nt">-p</span> &lt;project_ID&gt;
</code></pre></div>    </div>
  </li>
  <li>
    <p>Verify current branch.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch
</code></pre></div>    </div>
  </li>
  <li>
    <p>If necessary, check out an existing branch.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud environment:checkout &lt;environment_ID&gt;
</code></pre></div>    </div>

    <p>You can also create a new branch using the <code class="highlighter-rouge">magento-cloud environment:branch</code> command.</p>
  </li>
  <li>
    <p>Back up the environment using a snapshot.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud snapshot:create <span class="nt">-e</span> &lt;environment_ID&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="next-modify-the-magentoappyaml-file">Next, modify the <code class="highlighter-rouge">.magento.app.yaml</code> file:</h4>

<ol>
  <li>Use a text editor to locate and edit <code class="highlighter-rouge">&lt;project root dir&gt;/.magento.app.yaml</code> in your branch.</li>
  <li>
    <p>Enter <code class="highlighter-rouge">- name: blackfire</code> in the <code class="highlighter-rouge">extensions</code> block under <code class="highlighter-rouge">runtime</code>.</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># .magento.app.yaml
runtime:
    extensions:
    - mcrypt
    - redis
    - xsl
    - json
    - blackfire
</code></pre></div>    </div>
  </li>
  <li>Save your changes to <code class="highlighter-rouge">.magento.app.yaml</code> and exit the text editor.</li>
  <li>
    <p>Add, commit, and push your changes to the environment.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add <span class="nt">-A</span>
git commit <span class="nt">-m</span> <span class="s2">"&lt;message&gt;"</span>
git push origin
</code></pre></div>    </div>

    <p>If errors display during deployment, open the <code class="highlighter-rouge">.magento.app.yaml</code> file and check the syntax, such as indentation and spelling, and try again.</p>
  </li>
</ol>

<h3 id="variables">Add project variables</h3>
<p>Add project variables for Blackfire for the server ID and token. You can add these using the Magento Cloud CLI or the Project Web Interface. The following instructions walk through adding them using CLI commands.</p>

<ol>
  <li>Open a terminal and navigate to your Magento Commerce (Cloud) project.</li>
  <li>Copy the commands from step 3 on the Blackfire <em>Magento Cloud Integration</em> page.</li>
  <li>
    <p>Paste and enter the commands in the Magento Cloud CLI. Since you are already in your project, remove the <code class="highlighter-rouge">--project='&lt;Project ID&gt;'</code> content from the command. The commands include the Project ID and Blackfire server ID and token, similar to the following:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:variable:set env:BLACKFIRE_SERVER_ID &lt;Blackfire Server ID&gt;
</code></pre></div>    </div>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud project:variable:set env:BLACKFIRE_SERVER_TOKEN &lt;Blackfire Server Token&gt;
</code></pre></div>    </div>
  </li>
</ol>

<h3 id="integration">Add Blackfire integration to the project</h3>
<p>Using the Magento Cloud CLI, enter an integration command to connect Blackfire with the project. This command requires using an account with superuser access. Make sure your Cloud Project account has the <a href="/guides/v2.2/cloud/project/user-admin.html#cloud-user-webinterface">super user option</a> in the Project through the Project Web Interface.</p>

<ol>
  <li>Open a terminal and navigate to your Magento Commerce (Cloud) project.</li>
  <li>
    <p>Copy and enter the integration commands from the Blackfire <em>Magento Cloud Integration</em> page.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud integration:add <span class="se">\</span>
<span class="nt">--project</span><span class="o">=</span><span class="s1">'&lt;Project ID&gt;'</span> <span class="se">\</span>
<span class="nt">--type</span><span class="o">=</span>webhook <span class="se">\</span>
<span class="nt">--url</span><span class="o">=</span><span class="s1">'&lt;Blackfire provided URL&gt;'</span>
</code></pre></div>    </div>
  </li>
  <li>A series of requests display for the command. To accept default values, hit enter for the questions. If you receive a permission error, verify that you have superuser access for the Magento Commerce (Cloud) project. Either request your permission be upgraded or request an admin run this command.</li>
</ol>

<h3 id="route">Default route</h3>
<p>If you need to specify a different route to use instead of the default route, change the route in the Blackfire <em>Magento Cloud Integration</em> page (step 5) and update the route in your project <code class="highlighter-rouge">routes.yaml</code> file.</p>

<h3 id="save">Save changes in Blackfire</h3>
<p>With all integrations entered on the Blackfire Magento Cloud integration page, click Save. All integration settings save to your Blackfire account with saved integrations and connections with changes entered to your Magento Commerce (Cloud) project. Continue to the next section to begin profiling your store to verify the integration.</p>

<h2 id="profile">Profile your store</h2>
<p>You can verify that Blackfire works using a browser extension or the CLI. For extensive CLI profiling options and better understanding the profiles, see <a href="#blackfire-resources">Blackfire resources</a>.</p>

<!-- Available note types: "info", "warning", "tip" -->

<div class="bs-callout bs-callout-info" id="info">
  <p>You can only use the CLI in your local development environment.</p>
</div>

<h4 id="to-profile-using-the-browser">To profile using the browser:</h4>

<ol>
  <li>Install the Blackfire browser extension in <a href="https://blackfire.io/docs/integrations/chrome#installing-the-companion" target="_blank">Chrome</a> or <a href="https://blackfire.io/docs/integrations/firefox#installing-the-companion" target="_blank">Firefox</a>. A Blackfire icon displays in your browser next to the address location. If you do not see it, you may need to display the bar.</li>
  <li>Visit the store or site URL for your specific environment, such as the URL for your Integration environment. If you need this URL, you can find it through the Project Web Interface. Select the environment branch and copy the link from the <em>Access</em> section.</li>
  <li>
    <p>Click the Blackfire icon.</p>

    <p><img src="/common/images/cloud_blackfire.png" alt="Start profiling" /></p>
  </li>
  <li>
    <p>Click <strong>Profile</strong> to start.</p>

    <p>Note: The browser extension also enables you to profile all requests while you browse. For more information about this, see <a href="#blackfire-resources">Blackfire resources</a>.</p>
  </li>
</ol>

<h4 id="to-profile-using-the-cli">To profile using the CLI:</h4>

<ol>
  <li>
    <p>Install the Blackfire <a href="https://blackfire.io/docs/up-and-running/installation" target="_blank">CLI Tool</a>. Click on your preferred Platform tab and scroll down to <strong>Installing the Blackfire CLI tool</strong>.</p>
  </li>
  <li>
    <p>Depending on the type of code, profile using the <code class="highlighter-rouge">blackfire curl</code> or <code class="highlighter-rouge">blackfire run</code> command.</p>

    <ul>
      <li><a href="https://blackfire.io/docs/cookbooks/profiling-http">Profiling HTTP Requests</a></li>
      <li><a href="https://blackfire.io/docs/cookbooks/profiling-cli">Profiling CLI Commands</a></li>
    </ul>
  </li>
</ol>

<h2 id="automate-performance-testing">Automate performance testing</h2>
<p>After completing the <a href="#dev">Blackfire Integration</a>, you can define events for the Staging and Production environments that enable Blackfire to execute polling requests automatically. An event example is whenever a commit deploys in the Integration environment, or when activating the integration between Blackfire and New Relic.</p>

<p>By simply defining a set of key requests for Blackfire to profile— <code class="highlighter-rouge">/home</code>, <code class="highlighter-rouge">/checkout</code>, <code class="highlighter-rouge">/checkout/payment</code>—Blackfire can notify you if your code complies with established <a href="https://blackfire.io/docs/reference-guide/recommendations" target="_blank">code performance recommendations</a>. The following is a sample build report with recommendations:</p>

<p><img src="/common/images/cloud_blackfire-recommendations.png" alt="Blackfire build report" /></p>

<h3 id="writing-your-first-automated-tests-and-scenarios">Writing your first automated tests and scenarios</h3>
<p>You can easily write tests and scenarios for Blackfire to execute. Create a <code class="highlighter-rouge">.blackfire.yml</code> file and store it at your project root directory.</p>

<p>Try adding the following scenarios in the file:</p>

<blockquote>
  <p>.blackfire.yml</p>
</blockquote>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">scenarios</span><span class="pi">:</span>
  <span class="na">Home</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/index.php</span>
  <span class="na">Product list</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/index.php/women/tops-women/jackets-women.html</span>
  <span class="na">Checkout</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/index.php/checkout</span>
  <span class="na">Payment</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">/index.php/checkout/payment</span>
</code></pre></div></div>

<p>See the Blackfire documentation on <a href="https://blackfire.io/docs/cookbooks/tests" target="_blank">Writing tests</a> and <a href="https://blackfire.io/docs/cookbooks/scenarios" target="_blank">Writing scenarios</a>.</p>

<h3 id="running-your-tests-automatically">Running your tests automatically</h3>
<p>Once you create and deploy your <code class="highlighter-rouge">.blackfire.yml</code> file, you can enable Blackfire to run your tests automatically in various ways:</p>

<ul>
  <li><strong>Automated builds on Integration</strong>—Whenever you push code on an Integration branch, Blackfire automatically runs your tests. You can receive a notification of the results in various ways, such as a commit status level when using GitHub or Bitbucket. See Blackfire notifications.</li>
  <li><strong>Automated builds using a webhook</strong>—Blackfire offers a very flexible way to start builds using a webhook, which can target any endpoint. See <a href="https://blackfire.io/docs/reference-guide/builds-and-integrations#start-build-using-a-webhook" target="_blank">Start building a webhook</a>.</li>
  <li><strong>Automated builds with the Blackfire/New Relic integration</strong>—Blackfire and New Relic are very complementary. New Relic monitors the overall traffic performance, and Blackfire profiles much deeper into the PHP code. See <a href="https://support.blackfire.io/questions-about-blackfire/what-is-blackfire/what-is-the-difference-between-blackfire-and-new-relic-and-other-apms" target="_blank">What is the difference between Blackfire and New Relic</a>. You can configure New Relic to fire Blackfire builds whenever relevant. See <a href="https://blackfire.io/docs/integrations/new-relic" target="_blank">New Relic</a>.</li>
</ul>

<h3 id="blackfire-notifications">Blackfire notifications</h3>
<p>When you configure at least one way of triggering builds with Blackfire, you can be notified whenever a build report is available. Blackfire supports an integration with Slack, GitHub, BitBucket, email, and more. See <a href="https://blackfire.io/docs/reference-guide/notification-channels" target="_blank">Scenario notification channels</a>.</p>

<h2 id="blackfire-troubleshooting">Blackfire troubleshooting</h2>

<h3 id="bypassing-reverse-proxy-cache-and-content-delivery-networks-cdn">Bypassing Reverse Proxy, Cache, and Content Delivery Networks (CDN)</h3>
<p>If you use a reverse proxy, cache, or CDN, you must grant Blackfire access to your servers. See <a href="https://blackfire.io/docs/reference-guide/configuration#bypassing-reverse-proxy-cache-and-content-delivery-networks-cdn">Bypassing Reverse Proxy, Cache, and Content Delivery Networks (CDN)</a> for an in-depth explanation.</p>

<h3 id="http-cache-configuration">HTTP Cache configuration</h3>
<p>If you use the HTTP cache with <code class="highlighter-rouge">cookies</code>, update your <code class="highlighter-rouge">.magento.app.yaml</code> file to allow the <code class="highlighter-rouge">__blackfire</code> cookie name to pass through the cache. For example:</p>

<blockquote>
  <p><code class="highlighter-rouge">.magento.app.yaml</code></p>
</blockquote>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">cache</span><span class="pi">:</span>
    <span class="na">enabled</span><span class="pi">:</span> <span class="no">true</span>
    <span class="na">cookies</span><span class="pi">:</span> <span class="pi">[</span><span class="nv">“/SESS.*/“</span><span class="pi">,</span> <span class="nv">“__blackfire”</span><span class="pi">]</span>
</code></pre></div></div>

<h2 id="blackfire-support">Blackfire support</h2>
<p>If you continue to experience problems, you can contact Blackfire support and provide output from the following:</p>

<ol>
  <li>
    <p>Display startup errors and save the output.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> magento-cloud ssh <span class="nt">--</span> php <span class="nt">-d</span> <span class="nv">display_startup_errors</span><span class="o">=</span>on <span class="nt">--ri</span> blackfire
</code></pre></div>    </div>
  </li>
  <li>
    <p>Create a temporary log file.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud variable:create <span class="nt">--name</span> php:blackfire.log_file <span class="nt">--value</span> /tmp/blackfire.log
</code></pre></div>    </div>
  </li>
  <li>
    <p>Set the logging level.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud variable:create <span class="nt">--name</span> php:blackfire.log_level <span class="nt">--value</span> 4
</code></pre></div>    </div>
  </li>
  <li>
    <p>Start a profile/build again and collect the logs.</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> magento-cloud ssh <span class="nt">--</span> <span class="nb">cat</span> /tmp/blackfire.log <span class="o">&gt;</span> blackfire.log
</code></pre></div>    </div>
  </li>
  <li>
    <p>Send output and logs to support@blackfire.io.</p>
  </li>
</ol>

<h4 id="to-disable-the-blackfire-logs">To disable the Blackfire logs:</h4>

<p>You can disable logging by cleaning the temporary log file and removing the log level:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud variable:delete php:blackfire.log_file
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>magento-cloud variable:delete php:blackfire.log_level
</code></pre></div></div>

<h2 id="blackfire-resources">Blackfire resources</h2>
<p>Blackfire provides great information to better profile and investigate the results on their documentation site:</p>

<ul>
  <li><a href="https://blackfire.io/docs/cookbooks/profiling-http" target="_blank">Profiling HTTP requests</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/profiling-cli" target="_blank">Profiling CLI commands</a></li>
  <li><a href="https://blog.blackfire.io/profile-all-requests.html" target="_blank">Profile all requests while you browse</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/tests" target="_blank">Writing Tests</a></li>
  <li><a href="https://blackfire.io/docs/cookbooks/scenarios" target="_blank">Writing scenarios</a></li>
  <li><a href="https://blackfire.io/docs/reference-guide/index" target="_blank">Reference Guide</a></li>
</ul>

			
		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  


  

    <div class="github-link">
      <a class="improve-page" href="https://github.com/magento/devdocs/blob/master/guides/v2.2/cloud/project/project-integrate-blackfire.md" target="_blank">
        Edit this page on GitHub
      </a>
    </div>

    <div class="new-issue">
      <a href="https://github.com/magento/devdocs/issues/new?title=Feedback on page: /guides/v2.2/cloud/project/project-integrate-blackfire.html" target="_blank">
        Give us feedback
      </a>
    </div>

  

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.content-container -->


	</div>
	<!-- /.main-container -->
</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div class="page-footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav footer-links">
  <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
  <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
  <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
  <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
  <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
  <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
  <li><a href="/magento-third-party.html">Third-Party Licenses</a></li>
</ul>

    </div>

		<div class="copyright-date">&copy; 2018 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/assets/js/app.min.js"></script>

<script src="/common/js/devdocs.min.js"></script>



<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



</body>
</html>

