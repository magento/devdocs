<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>.magento.app.yaml | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/cloud/project/project-conf-files_magento-app.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown" data-version="2.2">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.2
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/cloud/project/project-conf-files_magento-app.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/cloud/project/project-conf-files_magento-app.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">Magento 2.2</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Magento Commerce (Cloud) Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/b2b/bk-b2b.html">B2B Developer Guide</a></li>
          
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/ui_comp_guide/bk-ui_comps.html">UI Components Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" autocomplete="off" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">



<h4></h4>
<div class="left-navigation">
    <ul>
    
    

<li class="nav-level1  " id="welcome-to-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/bk-cloud.html">Welcome to Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="starter-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-architecture.html">Starter architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="starter-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/starter-develop-deploy-workflow.html">Starter develop and deploy workflow</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-architecture">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-arch.html">Pro architecture</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="pro-develop-and-deploy-workflow">
            
            
        
            
            <a href="/guides/v2.2/cloud/welcome/discover-workflow.html">Pro develop and deploy workflow</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="onboarding-tasks">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/onboarding/onboarding-tasks.html">Onboarding tasks</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-project-environments">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-project-owner.html">Prepare project environments</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="technologies-and-requirements">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/requirements/cloud-requirements.html">Technologies and requirements</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="composer">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cloud-composer.html">Composer</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="github">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-github.html">GitHub</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/basic-information/cloud-fastly.html">Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="ssh-and-sftp">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-ssh.html">SSH and sFTP</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="new-relic-apm">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/new-relic.html">New Relic APM</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="blackfire-profiler">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-integrate-blackfire.html">Blackfire Profiler</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="first-time-local-environment-setup">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/access-acct/first-time-setup.html">First-time local environment setup</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="prepare-for-local-environment-setup">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace.html">Prepare for local environment setup</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento-prerequisites">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-magento-prereqs.html">Install Magento prerequisites</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="enable-ssh-keys">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-ssh.html">Enable SSH keys</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-the-magento-file-system-owner">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Set up the Magento file system owner</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="clone-and-branch-the-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-2_clone.html">Clone and branch the project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-magento">
            
            
        
            
            <a href="/guides/v2.2/cloud/before/before-setup-env-install.html">Install Magento</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="first-time-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/first-time-deploy.html">First time deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="import-an-existing-magento-project">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Import an existing Magento project</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="first-steps-for-importing-magento-ee">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-first-steps.html">First steps for importing Magento EE</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="find-the-information-you-need-for-your-import">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prereq.html">Find the information you need for your import</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="prepare-your-existing-magento-ee-system">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-prepare.html">Prepare your existing Magento EE system</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="import-magento-ee-into-magento-enterprise-cloud-edition">
                    

                    
                    <a  href="/guides/v2.2/cloud/access-acct/first-time-setup_import-import.html">Import Magento EE into Magento Enterprise Cloud Edition</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="configure-magento-commerce-(cloud)">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/configure/configuration-overview.html">Configure Magento Commerce (Cloud)</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="set-up-fastly">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/fastly.html">Set up Fastly</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="custom-fastly-vcl-snippets">
            
            
        
            
            <a href="/guides/v2.2/cloud/configure/cloud-vcl-custom-snippets.html">Custom Fastly VCL snippets</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-paypal">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/paypal-onboarding.html">Set up PayPal</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-multiple-cloud-websites-or-stores">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-multi-sites.html">Set up multiple Cloud websites or stores</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="set-up-cron-jobs">
            
            
        
            
            <a href="/guides/v2.2/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2 active " id=".magento.app.yaml">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-conf-files_magento-app.html">.magento.app.yaml</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-routes">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure routes</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="routes.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_routes.html">routes.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="caching">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-cache.html">Caching</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="redirects">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-redir.html">Redirects</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="server-side-includes">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-routes-more-ssi.html">Server side includes</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configure-services">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configure services</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="services.yaml">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services.html">services.yaml</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-mysql-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-mysql.html">Set up MySQL service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-redis-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-redis.html">Set up Redis service</a>
                    

                    
                </li>
                
                

                
                

                
                
                <li class="nav-level3  " id="set-up-elasticsearch-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-elastic.html">Set up Elasticsearch service</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="set-up-rabbitmq-service">
                    

                    
                    <a  href="/guides/v2.2/cloud/project/project-conf-files_services-rabbit.html">Set up RabbitMQ service</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-project">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/projects.html">Manage your project</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="configure-your-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-basic.html">Configure your project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="project-structure">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-start.html">Project structure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="create-and-manage-users">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/user-admin.html">Create and manage users</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-interface">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-branch.html">Manage branches with the Interface</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="manage-branches-with-the-cli">
            
            
        
            
            <a href="/guides/v2.2/cloud/env/environments-start.html">Manage branches with the CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="snapshots-and-backup-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-webint-snap.html">Snapshots and backup management</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="manage-your-environments">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/env/environments.html">Manage your environments</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="magento-cloud-cli">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/cli-ref-topic.html">Magento Cloud CLI</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-management">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-over.html">Configuration management</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="example-of-managing-system-specific-settings">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/sens-data-initial.html">Example of managing system-specific settings</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="environment-variables">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Environment variables</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="overview-of-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_over.html">Overview of environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-application-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_magento.html">Magento application environment variables</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="magento-commerce-(cloud)-environment-variables">
                    

                    
                    <a  href="/guides/v2.2/cloud/env/environment-vars_cloud.html">Magento Commerce (Cloud) environment variables</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="configuration-reference">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Configuration reference</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="all-configuration-paths-except-payments-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-most.html">All configuration paths except payments reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="payment-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-payment.html">Payment configuration paths reference</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="sensitive-configuration-paths-reference">
                    

                    
                    <a  href="/guides/v2.2/cloud/live/config-reference-sens.html">Sensitive configuration paths reference</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="upgrades-and-patches">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/project/project-upgrade-parent.html">Upgrades and Patches</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="upgrade-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-upgrade.html">Upgrade Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="patch-magento-commerce-(cloud)">
            
            
        
            
            <a href="/guides/v2.2/cloud/project/project-patch.html">Patch Magento Commerce (Cloud)</a>
            

            
        </li>
        
        
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="deploy-your-store">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/stage-prod-live.html">Deploy your store</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="deployment-process">
            
            
        
            
            <a href="/guides/v2.2/cloud/reference/discover-deploy.html">Deployment process</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="continuous-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/deploy/continuous-deployment.html">Continuous deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="protective-block">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-prot.html">Protective block</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="build-and-deploy-on-local">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/live-sanity-check.html">Build and deploy on local</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="prepare-to-deploy-to-staging-and-production">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate-prereq.html">Prepare to deploy to Staging and Production</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="migrate-and-deploy-static-files-and-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-migrate.html">Migrate and deploy static files and data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="test-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/stage-prod-test.html">Test deployment</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="go-live-and-launch">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/live/live.html">Go live and launch</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="go-live-checklist">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/go-live-checklist.html">Go live checklist</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="launch-steps">
            
            
        
            
            <a href="/guides/v2.2/cloud/live/launch-steps.html">Launch steps</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="troubleshooting">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <a href="/guides/v2.2/cloud/trouble/trouble.html">Troubleshooting</a>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="troubleshoot-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/access-acct/trouble.html">Troubleshoot deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="view-logs-for-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/environments-logs.html">View logs for troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="incorrect-credentials">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_ce-creds.html">Incorrect credentials</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-a-new-project">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_proj-startover.html">Resolve issues with a new project</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="component-deployment-failure">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_comp-deploy-fail.html">Component deployment failure</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="fastly-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble_fastly.html">Fastly troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="redis-troubleshooting">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/redis-troubleshooting.html">Redis troubleshooting</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-encryption-key">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-crypt-key-variable.html">Resolve issues with encryption key</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-html-minification">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-error-html-minification.html">Resolve issues with HTML minification</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="resolve-issues-with-google-analytics-during-deployment">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/trouble-google-analytics-deploy.html">Resolve issues with Google Analytics during deployment</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="add-sitemap-and-robots.txt">
            
            
        
            
            <a href="/guides/v2.2/cloud/trouble/robots-sitemap.html">Add sitemap and robots.txt</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    

<li class="nav-level1  " id="how-to">

    
    <div class="toggle closed">&nbsp;</div>
    
    
    
    <span>How To</span>
    

    
    <ul>
        
        
        
        <li class="nav-level2  " id="install-and-update-extensions">
            
            
            <div class="toggle closed">&nbsp;</div>
            
        
            
            <span>Install and update extensions</span>
            

            
            <ul>
                

                
                
                <li class="nav-level3  " id="install-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/install-components.html">Install extensions</a>
                    

                    
                </li>
                
                

                
                
                <li class="nav-level3  " id="update-extensions">
                    

                    
                    <a  href="/guides/v2.2/cloud/howtos/update-components.html">Update extensions</a>
                    

                    
                </li>
                
                
            </ul>
            
        </li>
        
        
        
        
        <li class="nav-level2  " id="merge-and-delete-an-environment-(tutorial)">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/environment-tutorial-env-merge.html">Merge and delete an environment (tutorial)</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-a-theme">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/custom-theme.html">Install a theme</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="install-optional-sample-data">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/sample-data.html">Install optional sample data</a>
            

            
        </li>
        
        
        
        
        <li class="nav-level2  " id="run-a-php-debugger">
            
            
        
            
            <a href="/guides/v2.2/cloud/howtos/debug.html">Run a PHP debugger</a>
            

            
        </li>
        
        
    </ul>
    
</li>


    
    </ul>
</div>

	</div>

</aside>


<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/cloud/bk-cloud.html">
            <span property="name">Welcome to Magento Commerce (Cloud)</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">.magento.app.yaml</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	

	

	<h1 class="page-heading">.magento.app.yaml</h1>

  


</section>


			<h2 id="cloud-yaml-platform">About <code class="highlighter-rouge">.magento.app.yaml</code></h2>
<p>Magento Commerce (Cloud) supports multiple applications per project but typically, a project is composed of a single application, in which case you can simply put a <code class="highlighter-rouge">.magento.app.yaml</code> at the root of your repository.</p>

<p>This file controls the application and the way it is built and deployed on Magento Commerce (Cloud). To see a sample of the file, see <a href="https://github.com/magento/magento-cloud/blob/master/.magento.app.yaml" target="_blank"><code class="highlighter-rouge">.magento.app.yaml</code></a>. Make sure to review the <code class="highlighter-rouge">.magento.app.yaml</code> for your installed version. This file can differ across Magento Commerce (Cloud) versions.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>Changes you make using <code>.yaml</code> files affect your <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-int">integration environment</a> only. For technical reasons, neither <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-stage">staging</a> nor <a href="/guides/v2.2/cloud/reference/discover-arch.html#cloud-arch-prod">production</a> environments use <code>.yaml</code> files. To make these changes in a staging or production environment, you must create a <a href="/guides/v2.2/cloud/bk-cloud.html#gethelp">Support ticket</a>.</p>
</div>

<p>The following sections discuss properties in <code class="highlighter-rouge">.magento.app.yaml</code>.</p>

<h2 id="cloud-yaml-default">Defaults</h2>
<p><code class="highlighter-rouge">.magento.app.yaml</code> has many default values; see the <a href="https://github.com/magento/magento-cloud/blob/master/.magento.app.yaml" target="_blank">sample <code class="highlighter-rouge">.magento.app.yaml</code></a>.</p>

<h2 id="name"><code class="highlighter-rouge">name</code> property</h2>
<p><code class="highlighter-rouge">name</code> identifies the application in the project. Magento Commerce supports multiple applications in a project, so each application must have a <em>unique name</em> in a project.</p>

<p><code class="highlighter-rouge">name</code> can consist only of lower case alphanumeric characters; that is, <code class="highlighter-rouge">a</code>–<code class="highlighter-rouge">z</code> and <code class="highlighter-rouge">0</code>–<code class="highlighter-rouge">9</code>. <code class="highlighter-rouge">name</code> is used in the <a href="/guides/v2.2/cloud/project/project-conf-files_routes.html"><code class="highlighter-rouge">routes.yaml</code></a> to define the HTTP upstream (by default, <code class="highlighter-rouge">php:php</code>).</p>

<p>For example, if the value of <code class="highlighter-rouge">name</code> is <code class="highlighter-rouge">app</code>, you must use <code class="highlighter-rouge">app:php</code> in the upstream field. You can also use this name in multi-application relationships.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>If you change the name you should think about updating your other configuration files (<code>routes.yaml</code> or the different <code>.magento.app.yaml</code>, you will have in a multi-application project. Changing the name has no effect on your different services (such as databases).</p>
</div>

<h2 id="cloud-yaml-platform-type"><code class="highlighter-rouge">type</code> and <code class="highlighter-rouge">build</code></h2>
<p>The <code class="highlighter-rouge">type</code>  and <code class="highlighter-rouge">build</code> properties are used to build and run the project. The only supported <code class="highlighter-rouge">type</code> currently is <span term-uuid="bf703ab1-ca4b-48f9-b2b7-16a81fd46e02" class="glossary-term" data-toggle="popover">PHP</span>.</p>

<p>Supported versions:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>type: php:7.0
</code></pre>
</div>

<p>The <code class="highlighter-rouge">build</code> determines what happens by default when building the project. The only value currently supported is <code class="highlighter-rouge">composer</code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>type: php:7.0
build:
    flavor: composer
</code></pre>
</div>

<h2 id="cloud-yaml-platform-access"><code class="highlighter-rouge">access</code></h2>
<p><code class="highlighter-rouge">access</code> defines the user roles who can log in using SSH to the environments to which they have access.</p>

<p>Possible values are:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ssh: admin
ssh: contributor
ssh: viewer
</code></pre>
</div>

<h2 id="cloud-yaml-platform-rel"><code class="highlighter-rouge">relationships</code></h2>
<p><code class="highlighter-rouge">relationships</code> defines how services are mapped in your application.</p>

<p>The left-hand side is the name of the relationship as it will be exposed to the application in the <code class="highlighter-rouge">MAGENTO_CLOUD_RELATIONSHIPS</code> environment variable. The right-hand side is in the form <code class="highlighter-rouge">&lt;service name&gt;:&lt;endpoint name&gt;</code>, where <code class="highlighter-rouge">&lt;service name&gt;</code> comes from <code class="highlighter-rouge">.magento/services.yaml</code> and  <code class="highlighter-rouge">&lt;endpoint name&gt;</code> should be the same as the value of <code class="highlighter-rouge">type</code>  declared in that same file.</p>

<p>Example of valid options are:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>database: "mysql:mysql"
database2: "mysql2:mysql"
cache: "arediscache:redis"
search: "searchengine:solr"
</code></pre>
</div>

<p>See also <a href="/guides/v2.2/cloud/project/project-conf-files_services.html"><code class="highlighter-rouge">services.yaml</code> documentation</a> for a full list of currently supported service types and endpoints.</p>

<h2 id="cloud-yaml-platform-web"><code class="highlighter-rouge">web</code></h2>
<p><code class="highlighter-rouge">web</code> defines how your application is exposed to the web (in HTTP). Here we tell the web application how to serve content, from the front-controller script to a non-static request to an <code class="highlighter-rouge">index.php</code> file on the root. We support any directory structure so the static file can be in a sub directory, and the <code class="highlighter-rouge">index.php</code> file can be further down.</p>

<p><code class="highlighter-rouge">web</code> supports the following:</p>

<ul>
  <li><code class="highlighter-rouge">document_root</code>: The path relative to the root of the application that is exposed on the web. Typical values include <code class="highlighter-rouge">/public</code> and <code class="highlighter-rouge">/web</code>.</li>
  <li><code class="highlighter-rouge">passthru</code>: The URL used in the event a static file or PHP file could not be found. This would typically be your applications front controller, often <code class="highlighter-rouge">/index.php</code> or <code class="highlighter-rouge">/app.php</code>.</li>
  <li><code class="highlighter-rouge">index_files</code>: To use a static file (for example, <code class="highlighter-rouge">index.html</code>) to serve your application. This key expects a collection. For this to work, the static file(s) should be included in your whitelist. For example, to use a file named <code class="highlighter-rouge">index.html</code> as an index file, your whitelist should include an element that matches the filename, like <code class="highlighter-rouge">- \.html$</code>.</li>
  <li><code class="highlighter-rouge">blacklist</code>: A list of files that should never be executed. Has no effect on static files.</li>
  <li><code class="highlighter-rouge">whitelist</code>: A list of static files (as regular expressions) that can be served. Dynamic files (for example, PHP files) are treated as static files and have their source code served, but they are not executed.</li>
  <li><code class="highlighter-rouge">expires</code>: The number of seconds whitelisted (that is, static) content should be cached by the browser. This enables the cache-control and expires headers for static content. The <code class="highlighter-rouge">expires</code> directive and resulting headers are left out entirely if this isn’t set.</li>
</ul>

<p>Contrary to standard <code class="highlighter-rouge">.htaccess</code> approaches, which accept a <em>blacklist</em> and allow everything to be accessed except a specific list, we accept a <em>whitelist</em>, which means that anything not matched will trigger a 404 error and will be passed through to your <code class="highlighter-rouge">passthru</code> URL.</p>

<p>Our default configuration allows the following:</p>

<ul>
  <li>From the root (<code class="highlighter-rouge">/</code>) path, only web, media, and <code class="highlighter-rouge">robots.txt</code> files can be accessed</li>
  <li>From the <code class="highlighter-rouge">/pub/static</code> and <code class="highlighter-rouge">/pub/media</code> paths, any file can be accessed</li>
</ul>

<p>The following displays the default set of web accessible locations associated with an entry in <a href="#cloud-yaml-platform-mounts"><code class="highlighter-rouge">mounts</code></a>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># The configuration of app when it is exposed to the web.
web:
locations:
    "/":
        # The public directory of the app, relative to its root.
        root: "pub"
        # The front-controller script to send non-static requests to.
        passthru: "/index.php"
        index:
            - index.php
        expires: -1
        scripts: true
        allow: false
        rules:
            \.(css|js|map|hbs|gif|jpe?g|png|tiff|wbmp|ico|jng|bmp|svgz|midi?|mp?ga|mp2|mp3|m4a|ra|weba|3gpp?|mp4|mpe?g|mpe|ogv|mov|webm|flv|mng|asx|asf|wmv|avi|ogx|swf|jar|ttf|eot|woff|otf|html?)$:
                allow: true
            /robots\.txt$:
                allow: true
    "/media":
        root: "pub/media"
        allow: true
        scripts: false
        passthru: "/index.php"
    "/static":
        root: "pub/static"
        allow: true
        scripts: false
        passthru: "/front-static.php"
        rules:
            ^/static/version\d+/(?&lt;resource&gt;.*)$:
                  passthru: "/static/$resource"
</code></pre>
</div>

<h2 id="cloud-yaml-platform-disk"><code class="highlighter-rouge">disk</code></h2>
<p><code class="highlighter-rouge">disk</code> defines the size of the persistent disk size of the
application in MB.</p>

<div class="bs-callout bs-callout-info" id="info">
  <p>The minimal recommended disk size is 256MB. If you see the error <code>UserError: Error building the project: Disk size may not be smaller than 128MB</code>, increase the size to 256MB.</p>
</div>

<h2 id="cloud-yaml-platform-mounts"><code class="highlighter-rouge">mounts</code></h2>
<p><code class="highlighter-rouge">mounts</code> is an object whose keys are paths relative to the root of the application. The mount is a writable area on the disk for files. It’s in the form <code class="highlighter-rouge">volume_id[/subpath]</code>.</p>

<p>The following is a default list of mounts configured in <code class="highlighter-rouge">magento.app.yaml</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code># The mounts that will be performed when the package is deployed.
mounts:
    "var": "shared:files/var"
    "app/etc": "shared:files/etc"
    "pub/media": "shared:files/media"
    "pub/static": "shared:files/static"
</code></pre>
</div>

<p>The format for adding your mount to this list is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"/public/sites/default/files": "shared:files/files"
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">shared</code> means that the volume is shared between your applications inside an environment.</li>
  <li><code class="highlighter-rouge">disk</code> key defines the size available for that <code class="highlighter-rouge">shared</code> volume</li>
</ul>

<div class="bs-callout bs-callout-warning">
  <p>Important: The subpath portion of the mount is the unique identifier of the files area. If changed, files at the old location will be permanently lost. Do not change this value once your site has data unless you really want to lose all existing data.</p>
</div>

<p>If you also want the mount web accessible, you must add it to the <a href="#cloud-yaml-platform-web"><code class="highlighter-rouge">web</code></a> block of locations.</p>

<h2 id="cloud-yaml-platform-dep"><code class="highlighter-rouge">dependencies</code></h2>
<p><code class="highlighter-rouge">dependencies</code> enables you to specify dependencies that your application might need during the build process.</p>

<p>Magento Commerce supports dependencies on the following
languages:</p>

<ul>
  <li>PHP</li>
  <li>Ruby</li>
  <li>NodeJS</li>
</ul>

<p>Those dependencies are independent of the eventual dependencies of your application, and are available in the <code class="highlighter-rouge">PATH</code>, during the build process and in the runtime environment of your application.</p>

<p>You can specify those dependencies as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>ruby:
   sass: "~3.4"
nodejs:
   grunt-cli: "~0.3"
</code></pre>
</div>

<h2 id="cloud-yaml-platform-hooks"><code class="highlighter-rouge">hooks</code></h2>
<p>The <code class="highlighter-rouge">hooks</code> (also referred to as <code class="highlighter-rouge">deployment hooks</code>) enable you to define shell commands to run during the deployment process.</p>

<p>They can be executed at various points in the lifecycle of the application.</p>

<p>Possible hooks are:</p>

<ul>
  <li><code class="highlighter-rouge">build</code>: We run build hooks before your application has been packaged. No other services (such as the database, or redis) are accessible at this time since the application has not been deployed yet.</li>
  <li><code class="highlighter-rouge">deploy</code>: We run deploy hooks after your application has been deployed and started. You can access other services at this point.</li>
</ul>

<p>To add additional hooks (such as CLI commands that are offered by a custom extension), add them under the <code class="highlighter-rouge">build</code> or
<code class="highlighter-rouge">deploy</code> sections as follows:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">hooks</span><span class="pi">:</span>
    <span class="c1"># We run build hooks before your application has been packaged.</span>
    <span class="s">build</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">php ./vendor/bin/m2-ece-build</span>
    <span class="c1"># We run deploy hook after your application has been deployed and started.</span>
    <span class="s">deploy</span><span class="pi">:</span> <span class="pi">|</span>
        <span class="no">php ./vendor/bin/m2-ece-deploy</span></code></pre></figure>

<p>The home directory, where your application is mounted, is <code class="highlighter-rouge">/app</code>, and that is the directory from which hooks will be run unless you <code class="highlighter-rouge">cd</code> somewhere else.</p>

<p>The hooks fail if the final command in them fails. To cause them to fail on the first failed command, add <code class="highlighter-rouge">set -e</code> to the beginning of the hook.</p>

<h3 id="example-compile-sass-files-using-grunt">Example: Compile SASS files using grunt</h3>
<p>For example, to compile SASS files using grunt:</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">dependencies:
  ruby:
    sass: "3.4.7"
  nodejs:
    grunt-cli: "~0.1.13"

hooks:
  build: |
    cd public/profiles/project_name/themes/custom/theme_name
    npm install
    grunt</code></pre></figure>

<h2 id="variables">Environment variables</h2>
<p>The following environment variables are included in <code class="highlighter-rouge">.magento.app.yaml</code>. These are required for Magento Commerce (Cloud) 2.2.X.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml">variables:
    env:
        CONFIG__DEFAULT__PAYPAL_ONBOARDING__MIDDLEMAN_DOMAIN: 'payment-broker.magento.com'
        CONFIG__STORES__DEFAULT__PAYMENT__BRAINTREE__CHANNEL: 'Magento_Enterprise_Cloud_BT'
        CONFIG__STORES__DEFAULT__PAYPAL__NOTATION_CODE: 'Magento_Enterprise_Cloud'</code></pre></figure>

<h2 id="cloud-yaml-platform-cron"><code class="highlighter-rouge">crons</code></h2>
<p><code class="highlighter-rouge">crons</code> describes processes that are triggered on a schedule. We recommend you run cron as the <a href="/guides/v2.2/cloud/before/before-workspace-file-sys-owner.html">Magento file system owner</a>. Do not run cron as <code class="highlighter-rouge">root</code>. We also recommend against running cron as the web server user.</p>

<p>More information about crons:</p>

<p><code class="highlighter-rouge">crons</code> supports the following:</p>

<ul>
  <li><code class="highlighter-rouge">spec</code>: The cron specification. For Starter environments and Pro Integration environments, the minimum interval is once per 5 minutes. You will need to complete <a href="/guides/v2.2/cloud/configure/setup-cron-jobs.html#admin">additional configurations</a> for crons in those environments.</li>
  <li><code class="highlighter-rouge">cmd</code>: The command to execute.</li>
</ul>

<p>A sample Magento cron job follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>crons:
cronrun:
    spec: "*/5 * * * *"
    cmd: "php bin/magento cron:run"
</code></pre>
</div>

<p>For more information, see <a href="/guides/v2.2/cloud/configure/setup-cron-jobs.html">Set up cron jobs</a>.</p>

<h2 id="cloud-yaml-platform-php">Configure PHP options</h2>
<p>You can choose which version of PHP you want to run in your <code class="highlighter-rouge">.magento.app.yaml</code> file.:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="s">name</span><span class="pi">:</span> <span class="s">myphpapp</span>
<span class="s">type</span><span class="pi">:</span> <span class="s">php:7.0</span></code></pre></figure>

<p>We support PHP versions 7.0. The default is 7.0.</p>

<p>See one of the following sections for more information:</p>

<ul>
  <li><a href="#cloud-yaml-platform-php-ext">PHP extensions</a></li>
  <li><a href="#cloud-yaml-platform-php-set">Customize <code class="highlighter-rouge">php.ini</code> settings</a></li>
</ul>

<h3 id="cloud-yaml-platform-php-ext">PHP extensions</h3>
<p>You can define additional PHP extensions you want to enable or disable. Example:</p>

<figure class="highlight"><pre><code class="language-yaml" data-lang="yaml"><span class="c1"># .magento.app.yaml</span>
<span class="s">runtime</span><span class="pi">:</span>
    <span class="s">extensions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">xdebug</span>
        <span class="pi">-</span> <span class="s">redis</span>
        <span class="pi">-</span> <span class="s">ssh2</span>
    <span class="s">disabled_extensions</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="s">sqlite3</span></code></pre></figure>

<p>To view the current list of PHP extensions, SSH into your environment and enter the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>php -m
</code></pre>
</div>

<p>Magento requires the following PHP extensions that are enabled by default:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.curl.php" target="_blank">curl</a></li>
  <li><a href="http://php.net/manual/en/book.image.php" target="_blank">gd</a></li>
  <li><a href="http://php.net/manual/en/book.intl.php" target="_blank">intl</a></li>
  <li>
    <p>PHP 7 only:</p>

    <ul>
      <li><a href="http://php.net/manual/en/book.json.php" target="_blank">json</a></li>
      <li><a href="http://php.net/manual/en/book.iconv.php" target="_blank">iconv</a></li>
    </ul>
  </li>
  <li><a href="http://php.net/manual/en/book.mcrypt.php" target="_blank">mcrypt</a></li>
  <li><a href="http://php.net/manual/en/ref.pdo-mysql.php" target="_blank">PDO/MySQL</a></li>
  <li><a href="http://php.net/manual/en/book.bc.php" target="_blank">bc-math</a></li>
  <li><a href="http://php.net/manual/en/book.mbstring.php" target="_blank">mbstring</a></li>
  <li><a href="http://php.net/manual/en/book.mhash.php" target="_blank">mhash</a></li>
  <li><a href="http://php.net/manual/en/book.openssl.php" target="_blank">openssl</a></li>
  <li><a href="http://php.net/manual/en/book.simplexml.php" target="_blank">SimpleXML</a></li>
  <li><a href="http://php.net/manual/en/book.soap.php" target="_blank">soap</a></li>
  <li><a href="http://php.net/manual/en/book.xml.php" target="_blank">xml</a></li>
  <li><a href="http://php.net/manual/en/book.zip.php" target="_blank">zip</a></li>
</ul>

<p>You must install the following extensions:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.imagick.php" target="_blank">ImageMagick</a> 6.3.7 (or later), ImageMagick can optionally be used with the <code class="highlighter-rouge">gd</code> extension</li>
  <li><a href="http://php.net/manual/en/book.xsl.php" target="_blank">xsl</a></li>
  <li><a href="https://pecl.php.net/package/redis" target="_blank">redis</a></li>
</ul>

<p>In addition, we strongly recommend you enable <code class="highlighter-rouge">opcache</code>.</p>

<p>Other PHP extensions you can optionally install:</p>

<ul>
  <li><a href="http://php.net/manual/en/book.apcu.php" target="_blank">apcu</a></li>
  <li><a href="https://blackfire.io/docs/up-and-running/installation" target="_blank">blackfire</a></li>
  <li><a href="http://php.net/manual/en/book.enchant.php" target="_blank">enchant</a></li>
  <li><a href="http://php.net/manual/en/book.gearman.php" target="_blank">gearman</a></li>
  <li><a href="http://php.net/manual/en/book.geoip.php" target="_blank">geoip</a></li>
  <li><a href="http://php.net/manual/en/book.imap.php" target="_blank">imap</a></li>
  <li><a href="https://www.ioncube.com/loaders.php" target="_blank">ioncube</a></li>
  <li><a href="https://pecl.php.net/package/pecl_http" target="_blank">pecl-http</a></li>
  <li><a href="http://pinba.org" target="_blank">pinba</a></li>
  <li><a href="https://pecl.php.net/package/propro" target="_blank">propro</a></li>
  <li><a href="http://php.net/manual/en/book.pspell.php" target="_blank">pspell</a></li>
  <li><a href="https://pecl.php.net/package/raphf" target="_blank">raphf</a></li>
  <li><a href="http://php.net/manual/en/book.readline.php" target="_blank">readline</a></li>
  <li><a href="http://php.net/manual/en/book.recode.php" target="_blank">recode</a></li>
  <li><a href="http://php.net/manual/en/book.snmp.php" target="_blank">snmp</a></li>
  <li><a href="http://php.net/manual/en/book.sqlite3.php" target="_blank">sqlite3</a></li>
  <li><a href="http://php.net/manual/en/book.ssh2.php" target="_blank">ssh2</a></li>
  <li><a href="http://php.net/manual/en/book.tidy.php" target="_blank">tidy</a></li>
  <li><a href="https://xcache.lighttpd.net" target="_blank">xcache</a></li>
  <li><a href="https://xdebug.org" target="_blank">xdebug</a></li>
  <li><a href="http://php.net/manual/en/book.xhprof.php" target="_blank">xhprof</a></li>
  <li><a href="http://php.net/manual/en/book.xmlrpc.php" target="_blank">xmlrpc</a></li>
</ul>

<div class="bs-callout bs-callout-info" id="info">
  <p>Important: PHP compiled with debug is not supported and the Probe may conflict with XDebug or XHProf. Disable those extensions when enabling the Probe. The Probe conflicts with some PHP extensions like Pinba or IonCube.</p>
</div>

<h3 id="cloud-yaml-platform-php-set">Customize <code class="highlighter-rouge">php.ini</code> settings</h3>
<p>You can also create and push a <code class="highlighter-rouge">php.ini</code> file that is appended to the configuration maintained by Magento Commerce.</p>

<p>In your repository, the <code class="highlighter-rouge">php.ini</code> file should be added to the root of the application (the repository root).</p>

<div class="bs-callout bs-callout-warning">
    <p>Configuring PHP settings improperly can cause issues. We recommend only advanced administrators set these options.</p>
</div>

<p>For example, if you need to increase the PHP memory limit:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>memory_limit = 756M
</code></pre>
</div>

<p>For a list of recommended PHP configuration settings, see <a href="/guides/v2.2/install-gde/prereq/php-settings.html">Required PHP settings</a>.</p>

<p>After pushing your file, you can check that the custom PHP configuration has been added to your environment by <a href="/guides/v2.2/cloud/env/environments-start.html#env-start-tunn">creating an SSH tunnel</a> to your environment and entering:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>cat /etc/php5/fpm/php.ini
</code></pre>
</div>

<h4 id="related-topics">Related topics</h4>
<ul>
  <li><a href="/guides/v2.2/cloud/project/project-start.html">Get started with a project</a></li>
  <li><a href="/guides/v2.2/cloud/project/project-conf-files_routes.html">routes.yaml</a></li>
  <li><a href="/guides/v2.2/cloud/project/project-conf-files_services.html">services.yaml</a></li>
</ul>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.2/cloud/project/project-conf-files_magento-app.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/cloud/project/project-conf-files_magento-app.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

