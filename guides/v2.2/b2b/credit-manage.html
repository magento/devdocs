<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width initial-scale=1" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Manage company credit | Magento 2 Developer Documentation</title>
	<meta name="description" content="Magento 2 Developer Documentation.
">
	<meta http-equiv="last-modified" content="" />

	<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,700,600,300,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/css/app.css" />
	<link rel="stylesheet" href="/css/print.css" media="print" />
	<link rel="canonical" href="//guides/v2.2/b2b/credit-manage.html">

    <!-- WebUI popover css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.css">

  <script>
    var baseUrl = "/";
  </script>

	<!-- crazyegg -->
	<script type="text/javascript">
	setTimeout(function(){var a=document.createElement("script");
	var b=document.getElementsByTagName("script")[0];
	a.src=document.location.protocol+"//script.crazyegg.com/pages/scripts/0038/0321.js?"+Math.floor(new Date().getTime()/3600000);
	a.async=true;a.type="text/javascript";b.parentNode.insertBefore(a,b)}, 1);
	</script>

    <!-- heap analytics -->
    <script type="text/javascript">
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("2619540280");
    </script>

	<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="https://magento.com/favicon.ico">
	<link rel="apple-touch-icon" type="image/png" href="https://magento.com/apple-touch-icon.png">
	<link rel="apple-touch-icon" type="image/png" sizes="57x57" href="https://magento.com/apple-touch-icon-57x57.png">
	<link rel="apple-touch-icon" type="image/png" sizes="72x72" href="https://magento.com/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="https://magento.com/apple-touch-icon-76x76.png">
	<link rel="apple-touch-icon" type="image/png" sizes="114x114" href="https://magento.com/apple-touch-icon-114x114.png">
	<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="https://magento.com/apple-touch-icon-120x120.png">
	<link rel="apple-touch-icon" type="image/png" sizes="144x144" href="https://magento.com/apple-touch-icon-144x144.png">
	<link rel="apple-touch-icon" type="image/png" sizes="152x152" href="https://magento.com/apple-touch-icon-152x152.png">
	<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="https://magento.com/apple-touch-icon-180x180.png">

</head>
<body>

<header class="site-header">

	<nav id="global-nav">

		<div class="menu-btn"><a class="menu-trigger menu-icon" href="#"></a></div>

		<div class="container">

			<a class="logo" href="/guides/v2.2/"><img src="/i/m-logo.svg" alt=""><img src="/i/magento-logo.svg" alt="Magento" class="magento-logo" /><img src="/i/devdocs-logo.svg" alt="Devdocs" class="devdocs-logo" /></a>

			
<div class="version-switcher dropdown">
	<button id="version-switcher-button" class="btn btn-small dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        Magento 2.2 RC
	</button>

	<ul class="dropdown-menu dropdown-menu-left" aria-labelledby="version-switcher-button">
	
		<li><a class="dropdown-item" href="/guides/v2.0/b2b/credit-manage.html">Magento 2.0</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.1/b2b/credit-manage.html">Magento 2.1</a></li>
	
		<li><a class="dropdown-item" href="/guides/v2.2/b2b/credit-manage.html">Magento 2.2 RC</a></li>
	
  </ul>

</div>



			<!-- Main Navigation -->
<div class="nav-main">
  <ul>
    <li class="first">
      <a href="#">Setup and Deployment</a>
        <ul class="menu nav">
          <li><a href="https://magento.com/tech-resources/download" target="_blank">Get Started with Magento DevBox Beta</a></li>
            <li><a href="/guides/v2.2/install-gde/bk-install-guide.html">Installation Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/comp-mgr/bk-compman-upgrade-guide.html">Extension Update and System Upgrade Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/config-guide/bk-config-guide.html">Configuration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/migration/bk-migration-guide.html">Migration Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/cloud/bk-cloud.html">Enterprise Cloud Edition Guide</a></li>
          <li class="leaf"><a href="/magento-release-information.html">Release Information</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Development</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/architecture/bk-architecture.html">Architecture Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/extension-dev-guide/bk-extension-dev-guide.html">PHP Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/ext-best-practices/bk-ext-best-practices.html">Extension Developer Best Practices</a></li>
          <li><a href="/guides/v2.2/payments-integrations/bk-payments-integrations.html">Payments Integrations</a></li>
          <li class="leaf"><a href="/guides/v2.2/mrg/intro.html">Module Reference Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/coding-standards/bk-coding-standards.html">Coding Standards</a></li>
          
          <li class="first leaf"><a href="/guides/v2.2/contributor-guide/contributing.html">Contributor Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Frontend</a>
        <ul class="menu nav">
          <li class="first leaf"><a href="/guides/v2.2/frontend-dev-guide/bk-frontend-dev-guide.html">Frontend Developer Guide</a></li>
          
          <li class="leaf"><a href="/guides/v2.2/javascript-dev-guide/bk-javascript-dev-guide.html">JavaScript Developer Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/pattern-library/bk-pattern.html">Admin Design Pattern Library</a></li>
          <li class="leaf"><a href="/guides/v2.2/design-styleguide/bk-styleguide.html">Admin Style Guide</a></li>
        </ul>
    </li>

    <li>
        <a href="#">API</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/get-started/bk-get-started-api.html">Get Started with Magento Web APIs</a></li>
          <li class="leaf"><a href="/guides/v2.2/rest/bk-rest.html">REST API Reference</a></li>
          <li class="leaf"><a href="/guides/v2.2/soap/bk-soap.html">SOAP API Reference</a></li>
        </ul>
    </li>

    <li>
        <a href="#">Testing</a>
        <ul class="menu nav">
          <li class="leaf"><a href="/guides/v2.2/test/testing.html">Magento Testing Guide</a></li>
          <li class="leaf"><a href="/guides/v2.2/mtf/mtf_introduction.html">Functional Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/integration/integration_test_execution.html">Integration Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/js/jasmine.html">JavaScript Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/test/unit/unit_test_execution.html">PHP Unit Testing</a></li>
          <li class="leaf"><a href="/guides/v2.2/get-started/web-api-functional-testing.html">Web API Functional Testing</a></li>
        </ul>
    </li>

    <li>
      <a href="/guides/v2.2/howdoi/bk-how-do-i.html">How Tos</a>
    </li>

    <li>
      <a href="/videos/">Videos</a>
    </li>
  </ul>
</div><!-- /.nav-main -->


			<div class="search-btn">
				<a class="search-trigger search-icon" href="/search.html"></a>
			</div>

			<form class="quick-search" action="/search.html" method="get">
				<input type="search" name="q" placeholder="Search" />
				<a href="#" class="quick-search-close">&times;</a>
			</form>

		</div>

	</nav><!-- #global-nav -->

</header>
<div class="nav-main-fader"></div>


<div id="gl-wrapper">

	<!-- .main-container -->
	<div class="main-container">
		<a id="main-content"></a>


<div class="container">

    
    <div class="message-banner">
        <strong>Review our 2.2 release candidate!</strong> This beta version documentation includes B2B and more. <a href="/guides/v2.2/release-notes/release-candidate/quick-start.html">See the Quickstart Guide</a><br/>
        Stay tuned — We'll roll out more 2.2 documentation updates in the coming weeks.
    </div> 
    

	<!-- sidebar -->
<aside class="sidebar">
	<a href="#" class="toc-toggler">Table of Contents</a>
	<div class="sidebar-wrapper">






		<ul>

		

		

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

					
					

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/b2b/bk-b2b.html">B2B Developer Guide</a></li>
									
								

									


								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/b2b/integrations.html">Integrate with B2B using REST</a></li>
									
								

									


								

									

										<li class="level3Parent " id="company"><a href="#">Company</a>


									

								

									


											<li class="level3Child company " data-menunode="company"><a href="/guides/v2.2/b2b/company.html">Integrate with the Company module</a>


									

								

									


											<li class="level3Child company " data-menunode="company"><a href="/guides/v2.2/b2b/company-object.html">Manage company objects</a>


									

								

									


											<li class="level3Child company " data-menunode="company"><a href="/guides/v2.2/b2b/company-users.html">Manage company users</a>


									

								

									


											<li class="level3Child company " data-menunode="company"><a href="/guides/v2.2/b2b/roles.html">Manage company roles</a>


									

								

									


											<li class="level3Child company " data-menunode="company"><a href="/guides/v2.2/b2b/company-structures.html">Manage company structures</a>


									

								

									

										<li class="level3Parent " id="credit"><a href="#">Company credit</a>


									

								

									


											<li class="level3Child credit " data-menunode="credit"><a href="/guides/v2.2/b2b/company-credit.html">Integrate with the CompanyCredit module</a>


									

								

									


											<li class="level3Child credit  active " data-menunode="credit"><a href="/guides/v2.2/b2b/credit-manage.html">Manage company credit</a>


									

								

									

										<li class="level3Parent " id="shared"><a href="#">Shared Catalog</a>


									

								

									


											<li class="level3Child shared " data-menunode="shared"><a href="/guides/v2.2/b2b/shared-catalog.html">Integrate with the SharedCatalog module</a>


									

								

									


											<li class="level3Child shared " data-menunode="shared"><a href="/guides/v2.2/b2b/shared-cat-manage.html">Manage shared catalogs</a>


									

								

									


											<li class="level3Child shared " data-menunode="shared"><a href="/guides/v2.2/b2b/shared-cat-product-assign.html">Assign categories and products</a>


									

								

									


											<li class="level3Child shared " data-menunode="shared"><a href="/guides/v2.2/b2b/shared-cat-company.html">Assign companies</a>


									

								

									

										<li class="level3Parent " id="nq"><a href="#">Negotiable Quotes</a>


									

								

									


											<li class="level3Child nq " data-menunode="nq"><a href="/guides/v2.2/b2b/negotiable-quote.html">Integrate with the NegotiableQuote module</a>


									

								

									


											<li class="level3Child nq " data-menunode="nq"><a href="/guides/v2.2/b2b/negotiable-manage.html">Manage negotiable quotes</a>


									

								

									


											<li class="level3Child nq " data-menunode="nq"><a href="/guides/v2.2/b2b/negotiable-update.html">Update a negotiable quote</a>


									

								

									


											<li class="level3Child nq " data-menunode="nq"><a href="/guides/v2.2/b2b/negotiable-checkout.html">Negotiable quote checkout</a>


									

								

								
								



						

					

						

						

							


								


								
									<li class="level1 "><a class="nav-header" href="/guides/v2.2/b2b/extensions.html">Develop B2B extensions</a></li>
									
								

									


								

								
								



						

					


				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

				

			

		</ul>

	</div>
</aside>
<!-- /sidebar -->


	<section class="content">
		<div class="content-wrap">
			<!-- page-header -->
<section class="page-intro">
	

  <nav class="breadcrumbs">

    <a class="breadcrumb-item" href="/guides/v2.2/"><span>Home</span></a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    
    

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item" property="itemListElement" typeof="ListItem">

        
          <a property="item" typeof="WebPage" href="/guides/v2.2/b2b/bk-b2b.html">
            <span property="name">B2B Developer Guide</span>
          </a>
        

        <meta property="position" content="1" />
      </li>

    

      <!-- Skip if root -->
      

      <!-- Get breadcrumb title -->
      

      <!-- SEO data -->
      

      <li class="breadcrumb-item active" property="itemListElement" typeof="ListItem">

        

          

          <span property="name">Manage company credit</span>

        

        <meta property="position" content="2" />
      </li>

    

    



    </ol>

  </nav>



	
		<span class="ee-only">Enterprise Edition only</span>
	

	

	<h1 class="page-heading">Manage company credit</h1>

  


</section>


			<p>The company credit entity operates with the following attributes:</p>

<ul>
  <li>Credit limit</li>
  <li>Available credit</li>
  <li>Outstanding balance</li>
</ul>

<p>The credit limit is allocated by merchant, while available credit and outstanding balance are automatically calculated by the system based on the customer transactions (place an order, return) and merchant’s transactions (refund, reimburse, update credit limit, cancel order).</p>

<h2 id="manage-company-credit-limits">Manage company credit limits</h2>

<p>When you create a company, the credit limit is set to 0. Use the <code>PUT /V1/companyCredits/:id</code> call to change this value and perform other updates to the company’s credit settings.</p>

<p><strong>REST Endpoints</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">PUT</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/:id</span>
<span class="err">GET</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/:creditId</span>
<span class="err">GET</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/company/:companyId</span>
<span class="err">GET</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/</span></code></pre></figure>

<p><strong>Company credit parameters</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Format</th>
      <th>Requirements</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>id</code></td>
      <td>The credit ID generated by the system</td>
      <td>integer</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>company_id</code></td>
      <td>Company ID</td>
      <td>integer</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>credit_limit</code></td>
      <td>The amount of credit granted to the company</td>
      <td>Number</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>balance</code></td>
      <td>The amount the company currently owes the merchant</td>
      <td>Number</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>currency_code</code></td>
      <td>The currency code for the company’s credit, such as USD</td>
      <td>String</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>exceed_limit</code></td>
      <td>Indicates whether the company can exceed their credit limit</td>
      <td>Boolean</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>available_limit</code></td>
      <td>The amount of credit currently available to the company</td>
      <td>Number</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>credit_comment</code></td>
      <td>Describes the change being made</td>
      <td>String</td>
      <td>Optional</td>
    </tr>
  </tbody>
</table>

<h3 id="update-a-company-credit-limit">Update a company credit limit</h3>

<p>This call changes the company’s credit limitto $1000. The <code>available_limit</code> parameter is calculated, so you cannot specify the value.</p>

<p><strong>Service Name</strong></p>

<p><code>companyCreditCreditLimitRepositoryV1</code></p>

<p><strong>Sample Usage</strong></p>

<p><code>PUT /V1/companyCredits/company/2</code></p>

<p><strong>Payload</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;creditLimit&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Response</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
    <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span>
<span class="p">}</span></code></pre></figure>

<h3 id="get-details-about-a-companys-credit-limit-using-credit-id">Get details about a company’s credit limit using credit ID</h3>

<p>This call returns data on the credit limit for the specified credit ID.</p>

<p><strong>Service Name</strong></p>

<p><code>companyCreditCreditLimitRepositoryV1</code></p>

<p><strong>Sample Usage</strong></p>

<p><code>GET /V1/companyCredits/2</code></p>

<p><strong>Payload</strong></p>

<p>Not applicable</p>

<p><strong>Response</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">500</span>
<span class="p">}</span></code></pre></figure>

<h3 id="get-details-about-a-companys-credit-limit-using-company-id">Get details about a company’s credit limit using company ID</h3>

<p>This call returns information about the credit limit for a specified company.</p>

<p><strong>Service Name</strong></p>

<p><code>companyCreditCreditLimitManagementV1</code></p>

<p><strong>Sample Usage</strong></p>

<p><code>GET /V1/companyCredits/company/2</code></p>

<p><strong>Payload</strong></p>

<p>Not applicable</p>

<p><strong>Response</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">500</span><span class="p">,</span>
  <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">500</span>
<span class="p">}</span></code></pre></figure>

<h3 id="search--credit-ids">Search  credit IDs</h3>

<p>The following call returns information for all companies whose credit balance is 0.</p>

<p>See <a href="/guides/v2.2/howdoi/webapi/search-criteria.html">Search using REST APIs</a> for information about constructing a search query.</p>

<p><strong>Sample Usage</strong></p>

<p><code>GET  /V1/companyCredits?searchCriteria[filter_groups][0][filters][0][field]=balance&amp;searchCriteria[filter_groups][0][filters][0][value]=0&amp;searchCriteria[filter_groups][0][filters][0][condition_type]=eq</code></p>

<p><strong>Payload</strong></p>

<p>Not applicable</p>

<p><strong>Response</strong></p>

<div class="collapsible"><b class="collapsible-title">Show code sample </b><div class="collapsible-content"><figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">0</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="nt">&quot;company_id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;currency_code&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;exceed_limit&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">2000</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;search_criteria&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;filter_groups&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;balance&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;condition_type&quot;</span><span class="p">:</span> <span class="s2">&quot;eq&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;total_count&quot;</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span></code></pre></figure>
</div></div>

<h2 id="balance-operations">Balance operations</h2>

<p>The company’s outstanding balance can be updated as the merchant makes payments, purchases, and other transactions.</p>

<p><strong>Service Name</strong></p>

<p><code>companyCreditCreditBalanceManagementV1</code></p>

<p><strong>REST Endpoints</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">POST</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/:creditId/decreaseBalance</span>
<span class="err">POST</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/:creditId/increaseBalance</span></code></pre></figure>

<p><strong>Balance Parameters</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Format</th>
      <th>Requirements</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>value</code></td>
      <td>Indicates how much money is involved in this company credit balance operation.</td>
      <td>Nuumber</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>currency</code></td>
      <td>The currency of the transaction, such as USD</td>
      <td>String</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>operationType</code></td>
      <td>Must be one of the following: 1 - Allocated; 2 - Updated; 3 - Purchased; 4 - Reimbursed; 5 - Refunded; 6 - Reverted</td>
      <td>Integer</td>
      <td>Required</td>
    </tr>
    <tr>
      <td><code>comment</code></td>
      <td>Describers the operation</td>
      <td>String</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>options</code></td>
      <td>An object that provides additional information for increasing or decreasing the credit balance</td>
      <td>Object</td>
      <td>Optional</td>
    </tr>
  </tbody>
</table>

<p><strong><code>options</code> parameters</strong></p>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Format</th>
      <th>Requirements</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>purchase_order</code></td>
      <td>The company’s purchase order number</td>
      <td>String</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>order_increment</code></td>
      <td>Order increment</td>
      <td>String</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>currency_display</code></td>
      <td>Currency code for displaying the operation</td>
      <td>String</td>
      <td>Optional</td>
    </tr>
    <tr>
      <td><code>currency_base</code></td>
      <td>The base currency</td>
      <td>Optional</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="increase-the-company-credit-balance">Increase the company credit balance</h3>

<p>This call increases the company credit with an Allocate, Update, Refund, Revert, or Reimburse transaction. (You cannot specify the Purchased (3) operation type.) This call also decreases the company’s outstanding balance.</p>

<p><strong>Sample Usage</strong></p>

<p><code>V1/companyCredits/2/increaseBalance</code></p>

<p><strong>Payload</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
  <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;operationType&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;update limit&quot;</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Response</strong></p>

<p><code>true</code>, indicating the increase to the company credit balance succeeded</p>

<h3 id="decrease-the-balance">Decrease the balance</h3>

<p>This call decreases the company credit with an Update (operation type = 2), Purchased (3), or Reimbursed (4) transaction. (You cannot specify the other operation types.) This call also increases company’s outstanding balance.</p>

<p><strong>Sample Usage</strong></p>

<p><code>V1/companyCredits/2/decreaseBalance</code></p>

<p><strong>Payload</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mi">250</span><span class="p">,</span>
  <span class="nt">&quot;currency&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
  <span class="nt">&quot;operationType&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
  <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;issue refund&quot;</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Response</strong></p>

<p><code>true</code>, indicating the decrease to the company credit balance succeeded</p>

<h2 id="credit-history">Credit history</h2>

<p>A Reimburse transaction can be updated to include a purchase order and comment.</p>

<p><strong>Service Name</strong>
<code>companyCreditCreditHistoryManagementV1</code></p>

<p><strong>REST Endpoints</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="err">GET</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/history</span>
<span class="err">PUT</span> <span class="err">/V</span><span class="mi">1</span><span class="err">/companyCredits/history/:historyId</span></code></pre></figure>

<h3 id="save-the-credit-history">Save the credit history</h3>

<p>This call updates the credit history to specify a purchase order number.</p>

<p><strong>Sample Usage</strong></p>

<p><code>PUT /V1/companyCredits/history/6</code></p>

<p><strong>Payload</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;purchaseOrder&quot;</span><span class="p">:</span> <span class="s2">&quot;A12345&quot;</span><span class="p">,</span>
  <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;Adding PO info&quot;</span>
<span class="p">}</span></code></pre></figure>

<p><strong>Response</strong></p>

<p><code>true</code>, indicating the call was successful</p>

<h3 id="search-credit-history-ids">Search credit history IDs</h3>

<p>The following call returns a list instances in which the credit limit was set to a value higher than $500.</p>

<p>See <a href="/guides/v2.2/howdoi/webapi/search-criteria.html">Search using REST APIs</a> for information about constructing a search query.</p>

<p><strong>Sample Usage</strong></p>

<p><code>GET /V1/companyCredits/history?searchCriteria[filter_groups][0][filters][0][field]=credit_limit&amp;searchCriteria[filter_groups][0][filters][0][value]=500&amp;searchCriteria[filter_groups][0][filters][0][condition_type]=gt</code></p>

<p><strong>Payload</strong></p>

<p>Not applicable</p>

<p><strong>Response</strong></p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
    <span class="nt">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="nt">&quot;company_credit_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;user_type&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;currency_credit&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;currency_operation&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;rate_credit&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">-250</span><span class="p">,</span>
            <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-06-12 02:26:28&quot;</span><span class="p">,</span>
            <span class="nt">&quot;purchase_order&quot;</span><span class="p">:</span> <span class="s2">&quot;A12345&quot;</span><span class="p">,</span>
            <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;custom\&quot;:\&quot;Adding PO info\&quot;}&quot;</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="nt">&quot;company_credit_id&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="nt">&quot;user_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;user_type&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="nt">&quot;currency_credit&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;currency_operation&quot;</span><span class="p">:</span> <span class="s2">&quot;USD&quot;</span><span class="p">,</span>
            <span class="nt">&quot;rate&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;rate_credit&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;balance&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nt">&quot;credit_limit&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="nt">&quot;available_limit&quot;</span><span class="p">:</span> <span class="mi">2000</span><span class="p">,</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;datetime&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-07-20 21:28:35&quot;</span><span class="p">,</span>
            <span class="nt">&quot;comment&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;search_criteria&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;filter_groups&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="nt">&quot;filters&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                        <span class="nt">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;credit_limit&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;500&quot;</span><span class="p">,</span>
                        <span class="nt">&quot;condition_type&quot;</span><span class="p">:</span> <span class="s2">&quot;gt&quot;</span>
                    <span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">&quot;total_count&quot;</span><span class="p">:</span> <span class="mi">2</span>
<span class="p">}</span></code></pre></figure>

<h2 id="related-information">Related information</h2>

<p><a href="/guides/v2.2//b2b/company-credit.html">Integrate with the CompanyCredit module</a></p>

		</div>
		<!-- /.content-wrap -->

		<div class="page-info">

  

  
   <div class="github-link">
     <a class="improve-page" href="https://github.com/magento/devdocs/tree/develop/guides/v2.2/b2b/credit-manage.md" target="_blank">
       Edit this page on GitHub
     </a>
   </div>
  

  <div class="new-issue">
    <a href="https://github.com/magento/devdocs/issues/new?title=&body=Feedback on page: /guides/v2.2/b2b/credit-manage.html" target="_blank">Give us feedback</a>
  </div>

</div>


	</section>
	<!-- /.content -->

</div> <!-- /.container -->


	</div>
	<!-- /.main-container -->

</div>
<!-- /#gl-wrapper -->

<!-- footer-->
<div id="footer">
  <div class="container">

    <div class="copyright-links">
      <ul class="nav">
        <li><a href="/guides/v2.2/contributor-guide/contributing_docs.html">Become a Contributor</a>
        <li><a href="https://magento.github.io/glossary/index.html?audience=developer">Glossary</a></li>
        <li><a href="http://magento.com/legal/terms/privacy/">Privacy Policy</a></li>
        <li><a href="http://magento.com/legal/terms/">Terms of Service</a></li>
        <li><a href="http://magento.com/legal/licensing/">License/Trademark FAQ</a></li>
        <li><a href="/guides/v2.2/release-notes/bk-release-notes.html">Release Notes</a></li>
        <li><a href="/magento-third-party.html">Third-Party Licenses</a></li> 
      </ul>
    </div>

		<div class="copyright-date">&copy; 2017 Magento. All rights reserved.</div>

  </div>
</div>
<!-- / #footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="/common/js/app.min.js"></script>

<!-- Glossary integration -->
<script src="https://cdn.jsdelivr.net/jquery.webui-popover/1.2.1/jquery.webui-popover.min.js"></script>
<script src="/common/js/glossary.tooltip.min.js"></script>
<script>
    $(document).ready(function(){
      magento.glossary.init("https://magento.github.io/glossary/data/content-glossary.xml",function(term){return term.types.includes("glossary");},magento.glossary.tooltip.init);
      });
</script>

<script type="text/javascript">
    (function() {
        var didInit = false;
        function initMunchkin() {
            if(didInit === false) {
                didInit = true;
                Munchkin.init('585-GGD-959', {cookieAnon: false});
            }
        }
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = '//munchkin.marketo.net/munchkin.js';
        s.onreadystatechange = function() {
            if (this.readyState == 'complete' || this.readyState == 'loaded') {
                initMunchkin();
            }
        };
        s.onload = initMunchkin;
        document.getElementsByTagName('head')[0].appendChild(s);
    })();
</script>



<!--Google Analytics-->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-66243208-1', 'auto');
    ga('send', 'pageview');
</script>


</body>
</html>

