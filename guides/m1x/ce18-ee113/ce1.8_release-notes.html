---
---
<!DOCTYPE html> 
<html lang=en>
<head>
	<meta charset=utf-8>

	<link rel="stylesheet" type="text/css" href="{{ site.baseurl }}/common/css/stylesheet.css"/>
	<link rel="stylesheet" href="{{ site.baseurl }}/common/css/stylesheet-fonts.css" type="text/css" charset="utf-8">
	<link rel="icon" href="{{ site.baseurl }}/common/css/favicon.ico" type="image/x-icon">
	<link rel="shortcut icon" href="{{ site.baseurl }}/common/css/favicon.ico" type="image/x-icon">
	<title>Magento Community Edition (CE) Release Notes (1.8 and later)</title>

</head>

<body>
<a name="top"></a>

<img src="{{ site.baseurl }}/common/images/m1x/m1xheader.png" width="1024" alt="header" />

<!-- Title: Magento Community Edition (CE) Release Notes (version 1.8 and later) -->
<!-- URL: ece-18-later-release-notes -->


<h1>Magento Community Edition (CE) Release Notes (1.8 and later)</h1>


<div class="msg-box important"><img src="{{ site.baseurl }}/common/images/m1x/icon-note.png" alt="note" align="left" width="40"><span><strong>Note</strong>:  We'd like to make you aware that a security patch for older versions of <a href="http://www.magentocommerce.com/download" target="_blank">Magento Community Edition</a> has been posted (in the Magento Community Edition Patches section). This patch resolves a remote code execution vulnerability that enables an attacker with Magento administrator privileges to delete files and directories on a Magento installation. This vulnerability was discovered through our quarterly penetration testing process and has not been reported by merchants.<br /><br />
This issue was fixed in Magento Community Edition 1.8.0.0; no patch is necessary for versions 1.8.0.0 and later. Patches are available for Magento Community Edition 1.4.0.0 through 1.7.0.2. We encourage all affected merchants to apply the patch in their next regularly scheduled maintenance cycle. <br /><br />
Magento takes security very seriously and will continue to focus on identifying potential issues and hardening our defenses.</div>

<div class="toc"><h4>Table of Contents</h4>
<p>These Release Notes contain the following information:</p>
<ul><li><a href="#patches">Patches for Multiple Magento CE Versions</a></li>
<li><a href="#ee1131-11310">Magento Community Edition (CE) 1.8.1.0 Release Notes</a></li>
<li><a href="#ce-1800-release-notes">Magento CE 1.8.0.0 Release Notes</a></li>
<!-- <li><a href="#thanks">Thanks</a></li></ul> --></div> 

<h2 id="patches">Patches for Multiple Magento CE Versions</h2>
<p>Magento has the following patches available for multiple Magento CE versions.</p>

<ul class="level1"><li><a href="#ce18-patches-connect-general">General Magento Connect Patches</a></li>
<li><a href="#ce18-patches-soap">Magento Install Page Displays After SOAP v2 Index Page Refresh</a></li>
<!-- <li><a href="#ce18-patches-multi-admins">Multiple Simultaneous Magento Administrators</a></li>
 --><li><a href="#php54">PHP 5.4 Patch Available</a></li>
<li><a href="#ce18-patches-how-to-get">How to get Patches for Magento CE</a></li> 
</ul>

<div class="msg-box important"><img src="{{ site.baseurl }}/common/images/m1x/icon-note.png" alt="note" align="left" width="40"><span><strong>Note</strong>: Some of the patches discussed in this section have <code>EE_1.14.0.1</code> in the name. These patches were all tested against CE 1.8.x as well.</div>

<h3 id="ce18-patches-connect-general">General Magento Connect Patches</h3>
<p><em>Patch name</em>: SUPEE-3941</p>
<ul class="level1"><li><!-- <a href="https://jira.corp.x.com/browse/MPERF-4558" target="_blank">MPERF-4558</a>, <a href="https://jira.corp.x.com/browse/APPSTORE-4590" target="_blank">APPSTORE-4590</a> -->When you install a community-created translation package, the translation provided by the package overwrites any existing translations for the same items. This enables you to more easily install packages with translations. </li>
<li><!-- <a href="https://jira.corp.x.com/browse/MPERF-4558" target="_blank">MPERF-4558</a>, <a href="https://jira.corp.x.com/browse/APPSTORE-4589" target="_blank">APPSTORE-4589</a>  -->To improve security, Magento Connect now uses HTTPS by default to download extensions, rather than FTP. </li>
<li><!-- <a href="https://jira.corp.x.com/browse/MPERF-4558" target="_blank">MPERF-4558</a>, <a href="https://jira.corp.x.com/browse/APPSTORE-4557" target="_blank">APPSTORE-4557</a>  -->Extension developers can now create an extensions with a dash character in the name. Merchants can install those extensions without issues.</li>
<li><!-- <a href="https://jira.corp.x.com/browse/MPERF-4558" target="_blank">MPERF-4558</a>, <a href="https://jira.corp.x.com/browse/APPSTORE-4575" target="_blank">APPSTORE-4575</a>  -->Magento administrators who attempt to install an extension with insufficient file system privileges are now informed. Typically, the Magento Admin Panel runs as the web server user. If this user has insufficient privileges to the <em>your Magento install dir</em><code>/app/code/community</code> directory structure, the Magento administrator sees an error message in the Magento Connect Manager.<br />
To set file system permissions appropriately, see <a href="{{ site.m1xgdeurl }}install/installer-privileges_after.html#extensions" target="_blank">After You Install Magento: Recommended File System Ownership and Privileges</a>.</li></ul>

<h3 id="ce18-patches-soap">Magento Install Page Displays After SOAP v2 Index Page Refresh</h3>
<p><em>Patch name</em>: SUPEE-3762. <!-- <a href="https://jira.corp.x.com/browse/SUPEE-3762" target="_blank">SUPEE-3762</a>  -->Refreshing the SOAP v2 index page (<code>http://<em>your-magento-host-name</em>/index.php/api/v2_soap/index/</code>) results in all administrators and customers viewing the Magento installation page.</p>

<!-- <h3 id="ce18-patches-multi-admins">Multiple Simultaneous Magento Administrators</h3>
<p><em>Patch name</em>: PATCH_SUPEE-3819_EE_1.14.0.1_v1.sh.  --><!-- <a href="https://jira.corp.x.com/browse/SUPEE-3819" target="_blank">SUPEE-3819</a>  Multiple Magento administrators can simultaneously add new products; or edit descriptions, edit prices, or edit stock quantities of existing products without causing deadlocks, key violations, or critical data errors. Together with applying the patch, you must set all indexers to Update when scheduled as follows:</p>
<!-- <ol><li>Log in to the Magento Admin Panel as an administrator.</li>
<li>Click <strong>System</strong> > <strong>Configuration</strong>.</li>
<li>In the left navigation bar, from the ADVANCED group, click <strong>Index Management</strong>.</li>
<li>Expand <strong>Indexing Options</strong>.</li>
<li>From each list, click <strong>Update when scheduled</strong>.</li>
<li>Click <strong>Save Config</strong> in the upper right corner of the page.</li></ol> -->

<h3 id="discover-fix">Discover Card Validation Patch Available</h3>
<p>Magento has fixed an issue that prevented some Discover credit cards from validating properly. The issue was that certain Discover credit card number ranges were not recognized as being valid. As a result of the fix, all Discover cards should validate properly.</p>
<p>The issue affects Magento CE versions 1.4.2.0&ndash;1.8.1.0.</p>
<p>To get a fix for the issue, see <a href="{{ site.m1xgdeurl }}other/discover-card-validation.html" target="_blank">Discover credit card validation issue: Magento EE 1.9.1.1&ndash;1.13.1.0 and CE 1.4.2.0&ndash;1.8.1.0</a>.</p>
<div class="msg-box important"><img src="{{ site.baseurl }}/common/images/m1x/icon-important.png" alt="important" align="left" width="40"><span><strong>Important</strong>: This is <em>not</em> a security threat. No data has been compromised or misused. It affects only the ability to validate certain credit card number ranges as valid Discover card numbers.</span></div>


<h3 id="php54">PHP 5.4 Patch Available</h3>
<p>You can use PHP 5.4 with Magento CE versions 1.6.0.0&ndash;1.8.1.0.</p>
<p>To get the patch, see <a href="{{ site.m1xgdeurl }}other/php5.4_patch.html" target="_blank">Getting the PHP 5.4 patch for Magento Enterprise Edition (EE) and Community Edition (CE)</a>.</p>
<p>For more information about PHP 5.4, see <a href="http://www.php.net/manual/en/migration54.changes.php" target="_blank">the PHP migration page</a> and <a href="http://php.net/ChangeLog-5.php#5.4.0" target="_blank">the PHP changelog</a>.</p>

<h3 id="ce18-patches-how-to-get">How to Get Patches For Magento CE</h3>
<p>This section discusses how to get patches referenced in these Release Notes. </p>
<p>To get patches for Magento CE:</p>
<ol><li>Log in to <a href="http://www.magentocommerce.com/download" target="_blank">www.magentocommerce.com/download</a>.</li>
<li>In the left pane, click <strong>Downloads</strong>.</li>
<li>Scroll down to the Magento Community Edition Patches section.</li>
<li>Follow the prompts on your screen to download a patch for your version of CE.</li>
<li>Apply the patch as discussed in <a href="{{ site.m1xgdeurl }}other/ht_install-patches.html" target="_blank">How to Apply and Revert Magento Patches</a>.</li></ol>

<h2 id="ee1131-11310">Magento Community Edition (CE) 1.8.1.0 Release Notes</h2>
<p>See the following sections for information about changes in this release:</p>
<ul><li><a href="#ee1131-113100-hilites">Highlights</a></li>
<li><a href="#ee1131-113100-security">Security Enhancements</a></li>
<!-- <li>Performance Improvements</li>
 -->
<li><a href="#11810-changes-upgrade-issue">Potential Issue After Upgrading to CE 1.8.1.0</a></li>
<li><a href="#11310-changes">Changes in This Release</a></li>
<li><a href="#tax-11310">Tax Calculation Fixes</a></li>
<li><a href="#ee113-11310-fixes">Fixes in Magento CE 1.8.1.0</a></li></ul>

<h3 id="ee1131-113100-hilites">Highlights</h3>
<p>Magento CE 1.8.1.0 helps advance overall product quality and ease operations by providing significant tax calculation improvements, a wide range of bug fixes, and several security enhancements.</p>

<h4>Tax Calculation Improvements</h4>
<p>CE 1.8.1.0 resolves Value Added Tax (VAT) and Fixed Product Tax (FPT) issues so that Magento administrators can create invoices and credit memos to give merchants merchants access to accurate and consistent tax calculations and displays. We've also addressed:</p>
<ul><li>VAT tax calculation issues for cross-border trade</li>
<li>Tax rounding issues when multiple taxes are applied</li>
<li>VAT and FPT calculation issues for bundled products</li>
<li>Support for the Waste Electrical and Electronic Equipment (W.E.E.E.) recycling tax in the EU</li></ul>

<h4>Functional Improvements</h4>
<p>CE 1.8.1.0 includes bug fixes across important feature areas, including the shopping cart, checkout, content management system, and product import and export function. Many of these updates came from a hackathon held with Magento community developers, which demonstrates the vitality of our development community and their powerful ability to help us advance the platform.</p>

<h4>Security Enhancements</h4>
<p>CE 1.8.1.0 includes several security enhancements that were identified through our rigorous security assessment process. Magento complements its own comprehensive internal testing with quarterly penetration testing by expert consultants and actively works with the development community to identify security issues in order to harden the platform against potential threats. </p>

<!-- <h2 id="discover-fix">Discover Card Validation Patch Available</h2>
<p>Magento has fixed an issue that prevented some Discover credit cards from validating properly. The issue was that certain Discover credit card number ranges were not recognized as being valid. As a result of the fix, all Discover cards should validate properly.</p>
<p>The issue affects CE versions 1.4.2.0&ndash;1.8.1.0.</p>
<p>To get a fix for the issue, submit a <a href="http://www.magentocommerce.com/bug-tracking" target="_blank">Magento CE help request</a>.</p>
<p class="kb-notes"><strong>Important</strong>: This is <em>not</em> a security threat. No data has been compromised or misused. It affects only the ability to validate certain credit card number ranges as valid Discover card numbers.</p> -->

<h3 id="ee1131-113100-security">Security Enhancements</h3>
<p>Magento addressed the following security issues:</p>
<ul class="level1"><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-858" target="_blank">MPERF-858</a>)  -->Improved the password hashing algorithm.<br />
Magento thanks Bjorn Kraus for contributing to this fix.</li>
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-781" target="_blank">MPERF-781</a>) Resolved issues with persistent cookies in the web store.<br />
Magento thanks iSEC Security Consultants for contributing to this fix.</li> -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1920" target="_blank">MPERF-1920</a>, <a href="https://jira.corp.x.com/browse/MPERF-1898">MPERF-1898</a>)  -->Resolved issues that could have resulted in Cross-Site Request Forgery (CSRF) in the web store.<!-- <br />
Magento thanks iSEC Security Consultants for contributing to this fix. For more information about preventing these attacks, see the <a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_%28CSRF%29_Prevention_Cheat_Sheet" target="_blank">Cross-Site Request Forgery (CSRF) Prevention Cheat Sheet</a>. --></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1175" target="_blank">MPERF-1175</a>)  -->Resolved potential issues when issuing Return Materials Authorizations (RMAs).<br />
Magento thanks Ivan Chepurnyi for contributing to this fix.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-373" target="_blank">MPERF-373</a>)  -->Resolved a session fixation issue when registering a user with the web store.<!-- <br />
Magento thanks iSEC Security Consultants for contributing to this fix. --></li>
<!--<li> (<a href="https://jira.corp.x.com/browse/MPERF-2120" target="_blank">MPERF-2120</a>)  Resolved a <a href="{{ site.m1xgdeurl }}ce18-ee113/ce1.8_release-notes.html#ce18-1800security-advisory" target="_blank">cross-site scripting (XSS) issue reported in CE 1.8.0.0</a>.<br />
Magento thanks Myke Hines, Fox, and Opteros for contributing to this fix.</li> -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2123" target="_blank">MPERF-2123</a>)  -->Resolved issues with the expiration of file-based user sessions.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1234" target="_blank">MPERF-1234</a>)  -->Resolved issues that could have resulted in <a href="https://en.wikipedia.org/wiki/File_inclusion_vulnerability" target="_blank">Remote File Inclusion (RFI)</a> vulnerabilities.<!-- <br />
Magento thanks Ralf Zimmermann for contributing to this fix. --></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2121" target="_blank">MPERF-2121</a>, <a href="https://jira.corp.x.com/browse/MPERF-2122" target="_blank">MPERF-2122</a>, <a href="https://jira.corp.x.com/browse/MPERF-2118">MPERF-2118</a>)  -->Addressed vulnerabilities in OAuth code.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2156" target="_blank">MPERF-2156</a>)  -->Closed a potential loophole that enables another user to possibly access personal information when viewing billing agreements.<br />
Magento thanks Darryl Adie and Ampersand Commerce for contributing to this fix.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1904" target="_blank">MPERF-1904</a>)  -->Fixed the security settings for the <code>frontend</code> cookie to protect user sessions. <!-- <br />
Magento thanks Binary Anvil for contributing to this fix. --></li>

</ul>  

<h3 id="11810-changes-upgrade-issue">Issue After Upgrading to CE 1.8.1</h3>
<p><!-- https://jira.corp.x.com/browse/APPSEC-212 -->There is a known Issue After Upgrading to CE 1.8.1 that affects you <em>only</em> if you do <em>not</em> follow the recommended procedure to upgrade to a new environment as discussed in <a href="{{ site.m1xgdeurl }}install/installing_upgrade_details.html#prereq-tasks">Getting Ready For Your Upgrade</a>.</p>
<p><strong>Symptom</strong>: After completing the upgrade, when you log in to the Admin Panel and click <strong>System</strong> > <strong>Configuration</strong>, a fatal error similar to the following displays in your browser:</p>
<pre>Class 'Mage_Googlecheckout_Helper_Data' not found in /var/www/html/magento/app/Mage.php on line 547</pre>
<!-- <p><strong>Description</strong>: TBD -->
<p><strong>Solution</strong>:</p>
<ol><li>Close the Admin Panel browser window.</li>
<li>As a user with <code>root</code> privileges, delete all files <em>except</em> <code>config.xml</code> from the following directory:<br />
<pre><em>magento-install-dir</em>/app/code/core/Mage/GoogleCheckout/etc</pre></li>
<li>When you log back in to the Admin Panel, everything works as expected.<br />
If you're still encountering errors, see <a href="{{ site.m1xgdeurl }}install/installing.html#help" target="_blank">Getting Help With Your Installation or Upgrade</a>.</li></ol>
 
<h3 id="11310-changes">Changes in This Release</h3>
<p>See the following sections for a discussion of changes in this release:</p>
<ul class="level1"><!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2534" target="_blank">MPERF-2534</a>)  EE's Payment Bridge module has been updated to the latest version.<br />
For more information, see <a href="http://www.magentocommerce.com/blog/comments/magento-secure-payment-bridge-for-magento-enterprise-edition-113-available" target="_blank">this Magento blog post</a>.</li> -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1822" target="_blank">MPERF-1822</a>)  -->A tax configuration option for Fixed Product Tax (FPT) has changed. This option is in the Admin Panel at <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > Fixed Product Taxes, option <strong>FPT Tax Configuration</strong>. This option replaces the <strong>Apply Tax to FPT</strong> option in earlier CE releases.<br />
This option specifies how FPT is calculated as follows:<br />
  <ul><li><strong>Not Taxed</strong>: Click this option if your taxing jurisdiction does not tax FPT. (For example, the state of California does not tax FPT.)</li>
  <li><strong>Taxed</strong>: Click this option if your taxing jurisdiction does tax FPT. (For example, Canada taxes FPT.)</li>
  <li><strong>Loaded and Displayed with Tax</strong>: Click this option if FPT is added to the order total before applying tax (for example, in EU countries).</li></ul>
  </li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1902" target="_blank">MPERF-1902</a>)  -->You can now specify a 0% tax rate. (In the Admin Panel, click <strong>Sales</strong> > <strong>Tax</strong> > <strong>Manage Tax Zones & Rates.</strong>).<br />
For more information, see the <a href="http://www.magentocommerce.com/resources/magento-user-guide" target="_blank">Magento User Guide</a>.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1857" target="_blank">MPERF-1857</a>)  -->Magento changed its recommended setting for <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Apply Discount On Prices</strong> as follows:
<ul><li>US and Canadian merchants: Set the value of <strong>Apply Discount On Prices</strong> to <strong>Excluding Tax</strong>.</li>
<li>EU merchants: Set the value of <strong>Apply Discount On Prices</strong> to <strong>Including Tax</strong>.</li></ul>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-TBD" target="_blank">MPERF-TBD</a>)  -->Magento strongly recommends all merchants set <strong>Apply Customer Tax</strong> to <strong>After Discount</strong>, regardless of all other tax-related settings. This avoids issues with calculating the total product price.</li>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-348" target="_blank">MPERF-348</a>)  -->When you specify a tax rate, the <strong>State</strong> list is now available whenever you choose a country that has states.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-353" target="_blank">MPERF-353</a>)  -->You can now specify the asterisk (<code>*</code>) wildcard character for the value of <strong>State</strong> when you set up a new tax rate. This enables you to apply the same tax rate to all states or provinces in a particular country.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2353" target="_blank">MPERF-2353</a>)  -->Stores now display in the Admin Panel in <strong>System</strong> > <strong>Manage Stores</strong> as a three-column hierarchy, with the website in the left column, all stores associated with the website in the center column, and all store views associated with the store in the right column.<br />
This makes it easier for you to browse your stores and understand which websites, store views, and stores are associated with each other. The updated Manage Stores page also displays the root category for each store and the code for each website and store view.<br />
Magento thanks Fabrizio Branca for contributing to this fix. For more information, see <a href="http://www.fabrizio-branca.de/magento-website-store-groups-store-views.html" target="_blank">Fabrizio's blog post</a>.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-3221" target="_blank">MPERF-3221</a>)  -->For the DHL (Deprecated) shipping method to work, you must change the gateway URL as follows:
<ol><li>Log in to the Admin Panel as an administrator.</li>
<li>Click <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Shipping Methods</strong>.</li>
<li>In the right pane, expand <strong>DHL (Deprecated)</strong>.</li>
<li>Change the value of the <strong>Gateway URL</strong> field to the following:<br />
<pre>http://xmlapi.dhl-usa.com/ApiLanding.asp</pre></li>
<li>In the upper right corner, click <strong>Save Config</strong>.</li></ol>
</li>

</ul>

<h3 id="tax-11310">Tax Calculation Fixes</h3>
<p>Tax calculation issues can be divided into the following sections:</p>
<ul><li><a href="#tax-11310-general">General Tax Notes</a></li>
<li><a href="#tax-11310-round">Rounding Issues</a></li>
<li><a href="#tax-11310-display">Display Issues</a></li>
<li><a href="#tax-11310-bundle">Bundled Products Issues</a></li>
<li><a href="#tax-11310-fpt">Fixed Product Tax (FPT) Issues</a></li>
</ul>

<h4 id="tax-11310-general">General Tax Notes</h4>
<p>The following general fixes were made to Magento tax configuration and calculations:</p>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1911" target="_blank">MPERF-1911</a>)  -->Canadian customers now receive an e-mail with the correct totals for invoices and credit memos that include Provincial Sales Tax (PST) and Goods and Services Tax (GST).</li> 
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1865" target="_blank">MPERF-1865</a>)  -->Resolved issues with incorrect prices and incorrect tax amounts when a custom price is used together with the configuration setting <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong> Apply Tax On</strong> set to <strong>Original price only</strong>.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1814" target="_blank">MPERF-1814</a>)  -->The tax amount is calculated correctly when:
<ul><li>The customer is in a different taxing jurisdiction than the web store</li>
<li>The configuration option <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Catalog Prices</strong> is set to <strong>Including Tax</strong></li>
<li>The configuration option <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Tax Calculation Method Based On</strong> is set to <strong>Unit Price</strong></li></ul>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1813" target="_blank">MPERF-1813</a>)  -->The row total including tax displayed in the shopping cart is calculated correctly when:
<ul><li>The configuration option <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Catalog Prices</strong> is set to <strong>Excluding Tax</strong></li>
<li>The configuration option <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Tax Calculation Method Based On</strong> is set to <strong>Row Total</strong></li></ul>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1580" target="_blank">MPERF-1580</a>)  -->The row subtotal displays the correct amount when reordering a product that includes a discount coupon.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1560" target="_blank">MPERF-1560</a>)  -->Multiple tax rates for a product display correctly in the Admin Panel when creating an invoice or credit memo.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-463" target="_blank">MPERF-463</a>)  -->Resolved calculation errors when tax and currency conversion are applied. As a result, the price the customer views on a catalog or product page is the same as the price displayed in the shopping cart.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-459" target="_blank">MPERF-459</a>)  -->A customer can now place an order when two tax rules are applied to a product, even if the tax rules specify the same tax rate.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-329" target="_blank">MPERF-329</a>)  -->Resolved issues with calculating taxes on orders that are shipped to different countries that have different tax rates.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-3275" target="_blank">MPERF-3275</a>)  -->Product prices, including taxes, display on category and product pages the same for a guest customer as for a logged-in customer. (A guest customer is a customer who does not log in to your web store; this customer belongs to the <code>NOT LOGGED IN</code> customer group.)</li>

</ul>

<h4 id="tax-11310-round">Rounding Issues</h4>
<p>The following tax rounding issues were resolved:</p>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2143" target="_blank">MPERF-2143</a>)  -->Resolved a rounding issue in the tax detail display in the shopping cart when more than one tax rule is used.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1868" target="_blank">MPERF-1868</a>)  -->Resolved an issue reported on <a href="http://stackoverflow.com/questions/13529580/magento-tax-rounding-issue" target="_blank">stackoverflow</a> where a calculation error resulted from the following configuration:<br />
<strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Tax Calculation Method Based On</strong> set to <strong>Total</strong><br />
<strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>, option <strong>Catalog Prices</strong> set to <strong>Including Tax</strong></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1866" target="_blank">MPERF-1866</a>)  -->As a result of allowing a 0% tax rate, rounding errors related to different VAT jurisdictions have been resolved. For example, if a product originates in a country with VAT but is shipped to another country that has no VAT, correct prices display in the shopping cart.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1600" target="_blank">MPERF-1600</a>)  -->Row totals display correctly in the shopping cart when:
<ul><li>A shopping cart discount is applied</li>
<li>The following configuration options are set in <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong> > <strong>Calculation Settings</strong>:
<ul class="level3"><li><strong>Catalog Prices</strong> is set to <strong>Including Tax</strong></li>
<li><strong>Tax Calculation Method Based On</strong> is set to <strong>Excluding Tax</strong></li>
<li><strong>Apply Customer Tax</strong> is set to <strong>After Discount</strong></li>
<li><strong>Apply Discount On Prices</strong> is set to <strong>Including Taxes</strong></li></ul>
</ul></li>
</li>


</ul>

<h4 id="tax-11310-display">Display Issues</h4>
<p>The following issues relate to the incorrect display of tax information in the Admin Panel or in your Magento web store:</p>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-471" target="_blank">MPERF-471</a>)  -->Shipping prices including tax display properly in the shopping cart.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-273" target="_blank">MPERF-273</a>)  -->A special price now displays correctly on the product view page.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-511" target="_blank">MPERF-511</a>)  -->Values displayed in PDFs for invoices and credit memos no longer overlap each other.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1959" target="_blank">MPERF-1959</a>)  -->Orders, invoices, and credit memos for downloadable and virtual products display the correct row total when viewed in the Admin Panel.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1965" target="_blank">MPERF-1965</a>)  -->Orders display the FPT in the Admin Panel when the full tax summary is specified.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2072" target="_blank">MPERF-2072</a>)  -->Fixed-price bundled products that include FPT now display only one price for both From and To values, regardless of how you configured the products.</li>

</ul>


<h4 id="tax-11310-bundle">Bundled Products Issues</h4>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1915" target="_blank">MPERF-1915</a>)  -->The price of a dynamic bundled product is calculated correctly after being customized by the customer.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1914" target="_blank">MPERF-1914</a>)  -->The price of a dynamic bundled product with tiered pricing is calculated correctly after being customized by the customer.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1562" target="_blank">MPERF-1562</a>)  -->Resolved issues with calculating the value displayed for the price including tax for bundled products.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1341" target="_blank">MPERF-1341</a>)  -->The price excluding tax of a bundle product to which a discount is applied is the same:
<ul><li>When viewed on the customization page</li>
<li>after adding the bundled product to the shopping cart.</li></ul>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-544" target="_blank">MPERF-544</a>)  -->A dynamically-priced bundled product's prices displayed for Unit Price in the shopping cart (that is, the price including tax and the price excluding tax) are now correct. Before the fix, the prices were equal, which was incorrect.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-470" target="_blank">MPERF-470</a>, <a href="https://jira.corp.x.com/browse/MPERF-466" target="_blank">MPERF-466</a>)  -->The price of a bundled product displayed on the product view page and in the shopping cart are the same.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2138" target="_blank">MPERF-2138</a>)  -->The grand total including tax and the subtotal including tax displayed in the shopping cart are now identical when you specify that catalog prices include tax and the shopping cart is set to display prices with and without taxes for a dynamic bundled product that consists of two simple products.</li>

</ul>

<h4 id="tax-11310-fpt">Fixed Product Tax (FPT) Issues</h4>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2069" target="_blank">MPERF-2069</a>, <a href="https://jira.corp.x.com/browse/MPERF-1246" target="_blank">MPERF-1246</a>)  -->Resolved issues in calculating FPT on a credit memo.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2068" target="_blank">MPERF-2068</a>)  -->With both discounts and FPT enabled (and FPT is taxable), the subtotal including tax displayed in the shopping cart is correct.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1933" target="_blank">MPERF-1933</a>)  -->FPT calculation for bundled products that have FPT applied to them now are now correct for all FPT configuration settings.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1926" target="_blank">MPERF-1926</a>)  -->The invoice total is calculated correctly for an order that has both FPT and a shopping cart discount.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1759" target="_blank">MPERF-1759</a>)  -->The FPT amount is now included in the Subtotal (Incl.Tax) row for partial invoice.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1723" target="_blank">MPERF-1723</a>)  -->Resolved an issue that resulted in FPT being applied twice to the grand total in the shopping cart.</li>


</ul>

<h3 id="ee113-11310-fixes">Fixes in Magento CE 1.8.1.0</h3>
<p>Fixes in this release can be divided into the following categories:</p>
<ul><li><a href="#ee113-11310-cart">Shopping Cart and Checkout Fixes</a></li>
<li><a href="#ee113-11310-import">Import and Export Fixes</a></li>
<li><a href="#ee113-11310-fixes-ship">Shipping Fixes</a></li>
<!-- <li><a href="#ee113-11310-fixes-payment">Payment Fixes</a></li> -->
<li><a href="#ee113-11310-fixes-other">Other Fixes</a></li>
</ul>

<h4 id="ee113-11310-cart">Shopping Cart and Checkout Fixes</h4>
<ul><li><!-- EE (<a href="https://jira.corp.x.com/browse/MPERF-761" target="_blank">MPERF-761</a>)  Abandoned cart e-mails are sent at the scheduled time.--></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-745" target="_blank">MPERF-745</a>)  -->Resolved a new customer registration issue that enabled a user to register and see another customer's dashboard.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-876" target="_blank">MPERF-876</a>)  -->Resolved issues with breadcrumbs disappearing or displaying incorrectly.</li>
<li><!-- EE (<a href="https://jira.corp.x.com/browse/MPERF-759" target="_blank">MPERF-759</a>)  With the following configuration, gift pricing is applied properly for more than one item. -->
The following options are available in the Admin Panel in <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Sales</strong> > <strong>Gift Options</strong>:<br />
<strong>Allow Gift Wrapping on Order Level</strong> set to <strong>No</strong><br />
<strong> Allow Gift Wrapping for Order Items</strong> set to <strong>Yes</strong></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-757" target="_blank">MPERF-757</a>)  -->Category and subcategory names display correctly. Before the issue was resolved, subcategory names that were significantly longer than the category name did not display properly.</li>
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2361" target="_blank">MPERF-2361</a>) Resolved an issue where <code>Mage_Adminhtml_CustomerController->viewCartAction</code> falsely displayed <code>There are no items in customer's shopping cart at the moment</code> in the customer's shoppign cart view.<br />
Magento thanks Johnathan David Froeming for contributing to this fix. Link to the <a href="https://github.com/magento/bugathon_march_2013/pull/259" target="_blank">github pull request</a>.</li>  -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2350" target="_blank">MPERF-2350</a>)  -->If a customer adds more than one product that requires products to be purchased in increments, only the products that meet the increment requirements are added. Before the fix, all products were added.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2340" target="_blank">MPERF-2340</a>)  -->Scheduled payments work properly.<br />
Magento thanks Sylvain Raye for contributing to this fix. </li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2341" target="_blank">MPERF-2341</a>)  -->If a bundled or configurable product is out of stock, it's no longer available to check out.<br />
Magento thanks Francesco Marangi for contributing to this fix. </li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2356" target="_blank">MPERF-2356</a>)  -->Placing an order in the Admin Panel correctly sets the order status to Pending.<br />
Magento thanks GitHub user elframan for contributing to this fix. </li>


</ul>

<h4 id="ee113-11310-import">Import and Export Fixes</h4>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-836" target="_blank">MPERF-836</a>)  -->Scheduled export works properly.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2337" target="_blank">MPERF-2337</a>)  -->You can now export a shipment to CSV after printing its shipping label.<br />
Magento thanks Florinel Chis for contributing to this fix. </li>

</ul>

<h4 id="ee113-11310-fixes-ship">Shipping Fixes</h4> 
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2280" target="_blank">MPERF-2280</a>)  -->You are not required to enter a declared value to ship with FedEx.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2313" target="_blank">MPERF-2313</a>)  -->FedEx shipping labels print properly; addresses are not truncated.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2493" target="_blank">MPERF-2493</a>)  -->Fix for the USPS change to the names of their Priority and Express shipping options in their API made on Sunday, July 28, 2013.</p>
</ul>

<!-- <h4 id="ee113-11310-fixes-payment">Payment Fixes</h4>
 -->
<!-- GLOBAL: Any issue with Component = (CS) Payment Bridge must be excluded -->

<!-- <ul><li> EE (<a href="https://jira.corp.x.com/browse/MPERF-2534" target="_blank">MPERF-2534</a>)  The PayFlow Pro payment method now allows line items with a negative value. </li>
 <li>(<a href="https://jira.corp.x.com/browse/MPERF-2264" target="_blank">MPERF-2264</a>)  You can now use the GSI Payment Service with Magento Payment Bridge.</li>
  <li>(<a href="https://jira.corp.x.com/browse/MPERF-2633" target="_blank">MPERF-2633</a>) PayPal's Payflow Pro Gateway now uses the fields  
 EE <li>Made the following fixes to eWay Direct:
<ul><li>(<a href="https://jira.corp.x.com/browse/MPERF-2636" target="_blank">MPERF-2636</a>)  Updated the Payment Bridge console for eWay Direct.</li>
<li>EE(<a href="https://jira.corp.x.com/browse/MPERF-2637" target="_blank">MPERF-2637</a>)  You can now process credit memos for eWay Direct. </li>
<li> (<a href="https://jira.corp.x.com/browse/MPERF-2644" target="_blank">MPERF-2644</a>)  Capture for eWay direct now works as expected (that is, after the order is placed, the transaction is <em>not</em> captured but <em>can be</em> refunded.</li></ul>
</li> 
<li>( EE <a href="https://jira.corp.x.com/browse/MPERF-2639" target="_blank">MPERF-2639</a>)  Because refunds are not supported by the Paybox Direct method, you cannot process refunds using the Admin Panel. </li>
<li> EE (<a href="https://jira.corp.x.com/browse/MPERF-2645" target="_blank">MPERF-2645</a>) After creating a refund for a First Data transaction, the transaction is closed. </li>
<li> EE (<a href="https://jira.corp.x.com/browse/MPERF-2646" target="_blank">MPERF-2646</a>)  You can now pay for an order using Sagepay. </li>
<li> EE (<a href="https://jira.corp.x.com/browse/MPERF-2648" target="_blank">MPERF-2648</a>)  You can now pay for an order using Worldpay. </li>
<li> EE (<a href="https://jira.corp.x.com/browse/MPERF-2374" target="_blank">MPERF-2374</a>)  Line item details are now available for orders placed using Sage Pay. </li>
<li> (<a href="https://jira.corp.x.com/browse/MPERF-2260" target="_blank">MPERF-2260</a>)  Authorize.net sends only one validation request per transaction with Customer Information Management (CIM) enabled. </li>
</ul> -->

<h4 id="ee113-11310-fixes-other">Other Fixes</h4>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-872" target="_blank">MPERF-872</a>)  -->Resolved issues that caused spurious errors in the Magento exception log:<br />
<code>'Zend_Date_Exception' with message 'Invalid year, it must be between -10000 and 10000'</code></li>
<li><!-- EE (<a href="https://jira.corp.x.com/browse/MPERF-748" target="_blank">MPERF-748</a>)  Merging CMS pages no longer results in errors. --></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-744" target="_blank">MPERF-744</a>)  -->Widgets display properly on the CMS.</li>
<li><!-- EE (<a href="https://jira.corp.x.com/browse/MPERF-874" target="_blank">MPERF-874</a>)  Previewing a CMS page works properly. --></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-848" target="_blank">MPERF-848</a>)  -->The product attribute option <strong>Use Default Value</strong> works properly when used in a non-default store view.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-884" target="_blank">MPERF-884</a>)  -->A category attribute set to store view scope displays in layered navigation.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-723" target="_blank">MPERF-723</a>)  -->A store set for British Pound Sterling currency units now displays the correct currency in payment logs.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-864" target="_blank">MPERF-864</a>)  -->Resolved an issue with the <code>Mage_Catalog_Block_Product_Abstract class</code> that caused errors to display on product view pages in your web store.</li>
<li><!-- EE (<a href="https://jira.corp.x.com/browse/MPERF-868" target="_blank">MPERF-868</a>)  Fixed issues with customer segments. --></li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-736" target="_blank">MPERF-736</a>)  -->Back-in-stock e-mails contain the correct content.</li>
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2357" target="_blank">MPERF-2357</a>) You can now use the <code>$file</code> variable in installation scripts without errors.<br />
Magento thanks Fabian Blechschmidt Schrank for contributing to this fix. Link to the <a href="https://github.com/magento/bugathon_march_2013/issues/244" target="_blank">github issue</a>.</li> -->
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2358" target="_blank">MPERF-2358</a>) Fixed issues with Magento's use of the Zend TwoLevels backend cache.<br />
Magento thanks Rouven Alexander Rieker for contributing to this fix. Link to <a href="https://github.com/magento/bugathon_march_2013/pull/247" target="_blank">github pull request</a> for more information.</li> -->
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2359" target="_blank">MPERF-2359</a>) The database cache backend now deletes cache tags when deleting the corresponding cache entry.<br />
Magento thanks Fabrizio Branca for contrinbuting to this fix.</li> -->
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2360" target="_blank">MPERF-2360</a>) Fixed the definition of the store ID in <code>sendPasswortResetConfirmationEmail()</code> to specify the current store's ID.<br />
Magento thanks Dominik Weber for contributing to this fix.</li> -->
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2361" target="_blank">MPERF-2361</a>) <code>Mage_Page_Block_Html_Header->getIsHomePage</code> returns <code>true</code> when the URL has GET parameters. For example, the following now returns <code>true</code>:<br />
<code>http://domain.com/?hoge=hoge //Mage_Page_Block_Html_Header->getIsHomePage</code><br />
Magento thanks Johnathan David Froeming for contributing to this fix. Link to the <a href="https://github.com/magento/bugathon_march_2013/pull/259" target="_blank">github pull request</a>.</li> -->
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2339" target="_blank">MPERF-2339</a>) Products sort correctly using a custom attribute.<br />
Magento thanks Vinai Kopp for contributing to this fix. Link to the <a href="https://github.com/magento/bugathon_march_2013/issues/58" target="_blank">github issue</a>.</li> -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2336" target="_blank">MPERF-2336</a>)  -->You can now manage product ratings and reviews from the Admin Panel as well as from the web store.<br />
Magento thanks Fabian Blechschmidt Schrank for contributing to this fix. </li>
<!-- <li>(<a href="https://jira.corp.x.com/browse/MPERF-2342" target="_blank">MPERF-2342</a>) When you create an order using the Admin Panel, the values for the default shipping address and default billing address display properly.<br />
For example, if you clear the <strong>Same as Billing Address</strong> checkbox, the default shipping address displays.<br />
Magento thanks TBD for contributing to this fix. Link to the <a href="https://github.com/magento/bugathon_march_2013/issues/115" target="_blank">github issue</a>.</li> -->
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2354" target="_blank">MPERF-2354</a>)  -->Resolved an issue with <code>Mage_Page_Block_Template_Links::addLinkBlock</code> to enable you to sort an array of results by position.<br />
Magento thanks Benjamin Marks for contributing to this fix. </li>

</ul>

<h2 id="ce-1800-release-notes">Magento Community Edition (CE) 1.8.0.0 Release Notes</h2>
<p>See the following sections for information about changes in this release:</p>
<ul><li><a href="#ee113-11300-highlights">Highlights</a></li>
<li><a href="#ce18-1800security">Security Enhancements</a></li>
<li><a href="#ce18-1800usps">United States Postal Service (USPS) Update</a></li>
<li><a href="#ee113-11300-improvements">Performance Improvements</a></li>
<li><a href="#ce18-1800tax">Tax Calculation Fixes</a></li>
<li><a href="#ce18-1800api">API Fixes</a></li>
<li><a href="#ce18-1800fixes">Fixes</a></li>
<li><a href="#thanks">Thanks</a></li></ul> 

<h3 id="ee113-11300-highlights">Highlights</h3>
<ul><li>Major overhaul of tax calculation formulas, correction of rounding errors, and additional assistance with configuration.</li>
<li>Optimized cache adapters for single-server systems</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-1972" target="_blank">MPERF-1972</a>)  -->Upgraded Redis cache adapters for multi-server systems.<br />
To set up and use Redis with Magento, see <a href="{{ site.m1xgdeurl }}ce18-ee113/using_redis.html" target="_blank">Using Redis with Magento Community Edition (CE) and Enterprise Edition (EE)</a>.</li>
<li>Eliminated many types of database deadlocks.</li>
</ul>

<h3 id="ce18-1800security">Security Enhancements</h3>
<ul><li><!-- <a href="https://jira.corp.x.com/browse/MPERF-1792" target="_blank">MPERF-1792</a>)  -->Errors are not displayed in a new Magento installation. </li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-513" target="_blank">MPERF-513</a>)  -->Fixed a session fixation vulnerability in the new user registration process. Attackers can no longer abuse this flaw to take over new user accounts during registration.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2119" target="_blank">MPERF-2119</a>)  -->Resolved a remote code execution vulnerability that enabled an attacker to delete files and directories on the Magento installation. (The attack required access to the Admin Panel as a Magento administrator.)</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2118" target="_blank">MPERF-2118</a>)  -->Prevent attacks that use OAuth to leak sensitive information to an attacker that knows the consumer key and user token.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2156" target="_blank">MPERF-2156</a>)  -->Resolved an issue that enabled attackers to gain access to billing information.<br />
We thank Darryl Adia (from Ampersand Commerce) for contributing to this fix.</li>
<li><!-- <a href="https://jira.corp.x.com/browse/MPERF-2122" target="_blank">MPERF-2122</a>, <a href="https://jira.corp.x.com/browse/MPERF-2121" target="_blank">MPERF-2121</a>)  -->Resolved issues with the security of OAuth tokens and keys.</li>
<li>A remote code execution vulnerability was fixed.<br />
We thank Bastian Ike for contributing to this fix.<!-- (<a href="https://jira.corp.x.com/browse/MPERF-1758" target="_blank">Bug link</a>)</li> -->
<li>The Magento Admin Panel and web stores no longer allow web browsers to store usernames or passwords.</li>
<li>The Magento web store has additional Cross Site Request Forgery (CSRF) protections, meaning an imposter can no longer impersonate a newly registered customer and perform actions on the customer's behalf.</li>
<li>The cryptographic methods used to store passwords were improved to enhance security.</li>
</ul>

<h3 id="ce18-1800usps">United States Postal Service (USPS) Update</h3>
<p>The USPS changed the names of their Priority and Express shipping options in their API in July 2013. To enable you to continue utilizing USPS Priority <em>and</em> Express mail methods, CE 1.8 includes a patch that addresses the issue.</p>
<div class="msg-box important"><img src="{{ site.baseurl }}/common/images/m1x/icon-important.png" alt="important" align="left" width="40"><span><strong>Important</strong>: The USPS API patch has an impact on upgrading to CE 1.8 from earlier versions. If you're doing a new CE 1.8 installation, however, you don't need to do anything.</span></div>

<p>Following are details about the upgrade impact:</p>
<ul class="leve1"><li>Print all USPS shipping labels before upgrading; after upgrading, you will not be able to print them.</li>
<li>Any shopping cart price rules that use the USPS shipping method that created before you upgrade must be re created after you upgrade. Pre-existing USPS shipping methods do not work with shopping cart price rules after the upgrade.</li></ul>

<h3 id="ee113-11300-improvements">Performance Improvements</h3>
<ul><li>Limited the way Magento performs large database lookups. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-425" target="_blank">Bug link</a>)</li> -->
<li>Checkout performance improvements achieved by:
<ul><li>Eliminating unnecessary RSS cache cleanups when RSS functionality is disabled</li>
<li>The locale used to send a new order confirmation e-mail now first checks to see if the customer's locale is the same as the store's locale before attempting to localize the e-mail. <!-- (<a href="https://jira.corp.x.com/browse/MPERF=381" target="_blank">Bug link</a>) --></li>
<li>Improving the overall checkout process performance by loading the progress information for the current checkout step only</li></ul>
</li>
<li>You can load a large number of tax codes (35,000 or so) without impacting performance. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-620" target="_blank">Bug link</a>) --></li>
</ul>

<h3 id="ce18-1800tax">Tax Calculation Fixes</h3>
<p>Tax calculation issues can be divided into the following sections:</p>
<ul><li><a href="#ce18-1800tax-general">General Tax Notes</a></li>
<li><a href="#ce18-1800tax-round">Rounding Error Fixes</a></li>
<li><a href="#ce18-1800tax-fpt">Fixed Product Tax (FPT) Fixes</a></li>
<li><a href="#ce18-1800tax-disc">Discount Calculation Fixes</a></li>
<li><a href="#ce18-1800tax-display">Display Fixes</a></li>
</ul>

<h4 id="ce18-1800tax-general">General Tax Notes</h4>
<p>The following general fixes were made to Magento tax configuration and calculations:</p>
<ul><li>Based on Magento testing and merchant experience, certain tax configuration settings have been determined to be susceptible to rounding issues and can be confusing to buyers. To help you avoid issues with those settings, warning messages display in the Admin Panel if you attempt to save such a configuration.<br />
Administrative users can choose to dismiss the messages and can still save the configuration; however, Magento strongly recommends you change the configuration in a way recommended by the details displayed in the message.<br />
For details, see the <a href="http://www.magentocommerce.com/resources/magento-user-guide" target="_blank">Magento User Guide</a>.<br />
<!-- (<a href="https://jira.corp.x.com/browse/MPERF-404" target="_blank">Bug link</a>) --></li>
<li>Bundle pricing is more consistent as follows:
<ul><li>The calculation formula is:
<code>Sub item price = Sub item base price * Applicable tiered price adjustment or discount, then rounded
Bundle price = Sum (round(sub item price * qty))</code></li>
<li>When non-integer quantities are multiplied by a product price, Magento rounds the resulting subtotal is as follows:  
<code>round(unit price * non-integer quantity)</code></li></ul>
</li>
<li>All product price information on which taxation is based are rounded to two digits of precision regardless of how many digits of precision have been loaded into the database (for example, $10.24 instead of $10.2385).  This situation can occur when certain integrations enable third-party applications to send four-digit precision prices to Magento. <br />
Starting with this release those additional digits will have no impact on customer facing prices. Forcing two digits of precision enables more exact calculations involving Fixed Product Tax (FPT), discounts, and taxes&mdash;among other concerns. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-309" target="_blank">Bug link</a>) --></li>
<li>For certain Canadian provinces and localities, calculations and methods were updated to support changing legal requirements in Canada:
  <ul><li>Provincial Sales Tax (PST)</li>
<li>Goods and Services Tax (GST)</li>
<li>Taxe de vente du Québec (TVQ)&mdash;also referred to as Quebec Sales Tax (QST)</li></ul>
</li></ul>
<p>For details, see the <a href="http://www.magentocommerce.com/resources/magento-user-guide" target="_blank">Magento User Guide</a>.</p>
<!-- <p>(<a href="https://jira.corp.x.com/browse/MPERF-410" target="_blank">Bug link</a>)</p> -->

<h4 id="ce18-1800tax-round">Rounding Error Fixes</h4>
<p>The following issues relate to one-cent rounding errors in the web store or shopping cart:</p>
<ul><li>Calculating taxes for bundled products with tiered pricing.</li>
<li>Calculating the price before customization for bundled products. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-311" target="_blank">Bug link</a>) --></li>
<li>Calculating the grand total of items added to a cart in a different order.</li>
<li>Viewing an order when taxes are calculated after a discount using either row-based or unit price. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1282" target="_blank">Bug link</a>) --></li>
<li>Applying a discount to an order with a shipping address different than the billing address. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1115" target="_blank">Bug link</a>) --></li>
<li>Calculating the grand total based on the order in which products are added to the shopping cart. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-315" target="_blank">Bug link</a>) --></li>
<li>Specifying that prices display in the web store excluding tax and setting a 20% tax rate (or discount rate) now calculates the grand total correctly. It is now possible to have grand totals in amounts like 6.99, 9.99, or 99.99&mdash;regardless of the currency units used in the web store. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-307" target="_blank">Bug link</a>) --></li>
<li>Adding multiple items to a cart does not affect the accuracy with which taxation is calculated. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-309" target="_blank">Bug link</a>) --></li>
<li>Subtotal (Incl. Tax) is now correct when catalog and shipping prices include tax. Both tax and discounts are applied after tax. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1615" target="_blank">Bug link</a>) --></li>
<li>Prices displayed in the cart and on the catalog page are consistent and correct when catalog prices include tax, and when items in the catalog are set to display both including and excluding tax.<br />
(In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong>. In the right pane, expand <strong>Calculation Settings</strong>.) <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1322" target="_blank">Bug link</a>) --></li>
<li>Error in calculating the Grand Total Excl. Tax was resolved. This error occurred in a specific configuration: tax is applied to FPT, FPT is included in the subtotal, and the customer selects non-taxable flat rate shipping. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1320" target="_blank">Bug link</a>) --></li>

</ul>

<h4 id="ce18-1800tax-fpt">Fixed Product Tax (FPT) Fixes</h4>
<p>The following issues relate to errors in calculating taxes that include FPT in the web store or shopping cart:</p>
<ul><li>Price in the cart displays the correct before-tax price and grand total. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-323" target="_blank">Bug link</a>) --></li>
<li>Subtotals displayed in the cart&mdash;both Including Tax and Excluding Tax&mdash;are now correctly calculated when FPT is applied.</li>
<li>Free shipping offers are now processed correctly when FPT is applied.</li>
<li>FPT taxes are calculated correctly when a discount is applied. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1456" target="_blank">Bug link</a>) --></li>
</ul>

<h4 id="ce18-1800tax-disc">Discount Calculation Fixes</h4>
<p>The following issues relate to price calculations when coupon codes or other discounts are applied in the web store or shopping cart:</p>
<ul><li>The Row Subtotal displayed in the cart is calculated correctly (that is, both Excl. Tax and Incl. Tax are correct).</li>
<li>The price for bundled items now displays with tax included if the bundle is configured to do so.</li>
<li>Taxation is now correctly calculated on a product with a discounted price.</li>
<li>Taxation on discounts is now calculated correctly when the ship-to country  is different from the web store's default country.</li>
</ul>

<h4 id="ce18-1800tax-display">Display Fixes</h4>
<p>The following issues relate to the incorrect display of tax information in the Admin Panel or in your Magento web store:</p>
<ul><li>Row Subtotal displays correctly in the shopping cart when:
<ul><li>FPT is applied. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-326" target="_blank">Bug link</a>)--></li>
<li>A discount is applied to a situation where the tax the customer pays is different from the tax specified for the web store's locale (for example, when the shipping origin is different than the shipping address). <!-- (<a href="https://jira.corp.x.com/browse/MPERF-321" target="_blank">Bug link</a>)--></li></ul>
</li>
<li>Subtotal including tax on a credit memo is correct when one or more items in the memo includes FPT. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-325" target="_blank">Bug link</a>) --></li>
<li>Item subtotal displays correctly when a discount is applied to a purchase that includes FPT. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1330" target="_blank">Bug link</a>) --></li>
<li>If the administrator sets catalog prices to exclude tax and to display product prices in catalog as including tax, the price of the product in your web store includes applicable taxes. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-275" target="_blank">Bug link</a>) --><br />
(In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong>. In the right pane, expand <strong>Calculation Settings</strong>.)</li>
<li>The amount of tax displayed in the Order Totals section of the shopping cart is now correct when free shipping and a shopping cart rule discount are applied. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1277" target="_blank">Bug link</a>) --></li>
</ul>

<h3 id="ce18-1800api">API Fixes</h3>
<p>The following are fixed in the Magento SOAP v2.0 APIs (with exceptions noted):</p>
<ul><li>Requesting a product using a call like the following returns the product with the specified numeric SKU value (<code>8888</code> in the following example):
<code>$result = $client->call($sessionId, 'catalog_product.info', '8888', null, null, 'sku');</code> <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-5017" target="_blank">Bug link</a>) --></li>
<li>Order status is changed correctly using <a href="http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.addComment.html" target="_blank"><code>salesOrderAddComment</code></a>. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-6895" target="_blank">Bug link</a>)--></li>
<li>The <a href="http://www.magentocommerce.com/api/soap/checkout/cartProduct/cart_product.moveToCustomerQuote.html" target="_blank"><code>shoppingCartProductMoveToCustomerQuote</code></a> method works properly. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-7068" target="_blank">Bug link</a>) --></li>
<li>You can now use <code>from</code>-<code>to</code> complex filters to perform "window" filtration on a single field. For example, you can use <code>from</code> and <code>to</code> on the <code>created_at</code> return a list of sales orders using the <a href="http://www.magentocommerce.com/api/soap/sales/salesOrder/sales_order.list.html" target="_blank"><code>salesOrderList</code></a>.<!--(<a href="https://jira.corp.x.com/browse/MSSUP-3843" target="_blank">Bug link</a>) --></li>
<li>When you use the SOAP API v.2.0 with <a href="http://www.magentocommerce.com/api/soap/wsi_compliance.html" target="_blank">WS-I Compliance</a> enabled to retrieve sales orders information, the server responds with the correct <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.13" target="_blank">Content-Length</a> header. <!--(<a href="https://jira.corp.x.com/browse/SUP-4766" target="_blank">Bug link</a>) --></li>
<li>The <code>productGetSpecialPrice</code> method returns special price information for a product, whether or not <a href="http://www.magentocommerce.com/api/soap/wsi_compliance.html" target="_blank">WS-I Compliance</a> is enabled. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-6360" target="_blank">Bug link</a>) --></li>
<li>The <a href="http://www.magentocommerce.com/api/soap/checkout/cartPayment/cart_payment.list.html" target="_blank"><code>shoppingCartPaymentList</code></a> method returns the list of the available payment methods for the shopping cart appropriately. The following error is no longer returned:
<code>SOAP-ERROR: Encoding: object has no 'code' property in <em>name</em></code>
<!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-6456" target="_blank">Bug link</a>) --></li>
<li>The following issues with <a href="http://www.w3.org/TR/wsdl" target="_blank">WSDL</a> and <a href="http://www.magentocommerce.com/api/soap/wsi_compliance.html" target="_blank">WS-I Compliance</a> are resolved:
<ul><li>The <code>productAttributeAddOption</code> and <a href="http://www.magentocommerce.com/api/soap/catalog/catalogProductAttribute/product_attribute.update.html" target="_blank"><code>catalogProductAttributeUpdate</code></a> methods are now supported when WS-I Compliance is enabled. <!--(<a href="https://jira.corp.x.com/browse/MAGETWO-6362" target="_blank">Bug link</a>, <a href="https://jira.corp.x.com/browse/MAGETWO-6490" target="_blank">Bug link</a>) --></li>
<li>The WSDL declaration for <a href="http://www.magentocommerce.com/api/soap/sales/salesOrderCreditMemo/sales_order_creditmemo.create.html" target="_blank"><code>salesOrderCreditmemoCreate</code></a> is now correct; that is, it matches the code. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-6681" target="_blank">Bug link</a>) --></li>
<li>You can now add a C# web reference in Microsoft Visual Studio 2010 using the Magento WSDL. <br />
For example, this command no longer fails:<br />
<code>C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bin> wsdl /out:Magento.cs /v http://magentohost/api/v2_soap/?wsdl</code><!-- <br />
 (<a href="https://jira.corp.x.com/browse/MAGETWO-6354" target="_blank">Bug link</a>) --></li>
<li>The <a href="http://www.magentocommerce.com/api/soap/wsi_compliance.html" target="_blank">WS-I Compliance</a> mode WSDL now includes <a href="http://www.magentocommerce.com/api/soap/catalog/catalogProduct/catalogProduct.html" target="_blank"><code>catalogProductAttributeInfo</code></a>. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-6362" target="_blank">Bug link</a>) --></li></ul>
</li>
<li><em>XML-RPC API</em>: Using the <code>product_custom_option.add</code> operation with <code>multicall</code> no longer results in redundant options. <!-- (<a href="https://jira.corp.x.com/browse/MAGETWO-5273" target="_blank">Bug link</a>) --></li>
</ul>

<h3 id="ce18-1800fixes">Fixes</h3>
<!-- Support, a list of all regressions fixed in this release can be found here: https://jira.corp.x.com/secure/Dashboard.jspa?selectPageId=14815 -->
<p>Fixes in this release can be divided into the following categories:</p>
<ul><li><a href="#ce18-1800fixes-webstore">Web Store and Shopping Cart Fixes</a></li>
<li><a href="#ce18-1800fixes-price-rules">Promotional Price Rule Fixes</a></li>
<li><a href="#ce18-1800fixes-adminpanel">Administrative Ordering and Credit Memo Fixes</a></li>
<li><a href="#ce18-1800fixes-importexport">Import Fixes</a></li>
<li><a href="#ce18-1800fixes-payment">Payment Fixes</a></li>
<li><a href="#ce18-1800fixes-other">Other Fixes</a></li></ul>

<h4 id="ce18-1800fixes-webstore">Web Store and Shopping Cart Fixes</h4>
<ul><li>A customer's account created date is correct. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-756" target="_blank">Bug link</a>) --></li>
<li>When a product price is set with website scope and an administrative user has access to only one website, the default price is taken from that website scope. Also, when saving the product on the website scope, the price is updated only in that scope and not in the default scope. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-630" target="_blank">Bug link</a>) --></li> 
<li>An error no longer displays on your web store after a customer places an order. (The error message was <code>There has been an error processing your request. Please contact us or try again later</code>). <!-- (<a href="https://jira.corp.x.com/browse/MPERF-634" target="_blank">Bug link</a>) --></li> 
<li>Restricted coupon codes work properly, even if the customer has selected the <strong>Remember me</strong> checkbox. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-734" target="_blank">Bug link</a>) --></li>
<li>Using the Table Rates shipping option, free shipping options work properly. (In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > <strong>SALES</strong> > <strong>Shipping Methods</strong>. In the right pane, expand <strong>Table Rates</strong>.) <!-- (<a href="https://jira.corp.x.com/browse/MPERF-737" target="_blank">Bug link</a>) --></li> 
<li>Issues with shipping table rates have been resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-870" target="_blank">Bug link</a>) --></li> 
<li>Entering a value such as <code>10,50</code> (using a comma character and not a period) for <strong>Adjustment Fee</strong> now results in the correct amount of credit being applied to the transaction. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-763" target="_blank">Bug link</a>) --></li> 
<li>Unit price for bundled products is now calculated correctly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1340" target="_blank">Bug link</a>) --></li> 
<li>The tiered price of bundled items now displays properly on the web store. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-834" target="_blank">Bug link</a>) --></li> 
<li>Composite products can be successfully reordered. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-785" target="_blank">Bug link</a>) --></li> 
<li>You can now use special characters in a product URL key. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-782" target="_blank">Bug link</a>) --></li> 
<li>After a customer visits the sitemap, web stores URLs are no longer prepended by <code>/sitemap/catalog/<em>string</em></code>. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-660" target="_blank">Bug link</a>) --></li> 
<li>Welcome messages now display properly in the web store after a customer's profile information is changed. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1268" target="_blank">Bug link</a>) --></li> 
<li>Recently viewed products now display updates properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1247" target="_blank">Bug link</a>) --></li> 
<li>Armed Forces Middle East is now available for State when checking out. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-831" target="_blank">Bug link</a>) --></li> 
<li>Searching for a customer's orders and returns works properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1480" target="_blank">Bug link</a>) --></li> 
<li>Shipping is calculated correctly if you select <strong>Using origin weight (few requests)</strong> for <strong>Packages Request Type</strong>. (In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Shipping Methods</strong> > <strong>DHL (Deprecated)</strong>). <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1428" target="_blank">Bug link</a>) --></li> 
<li>Free shipping is no longer available to a customer during checkout if the option was disabled by an administrator. (In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > <strong>Sales</strong> > <strong>Shipping Method</strong> > <strong>DHL(Deprecated)</strong>, click one or more options from the <strong>Allowed Methods</strong> list, and, from the <strong>Free Shipping with Minimum Order Amount</strong> list, click <strong>No</strong>.) <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1415" target="_blank">Bug link</a>) --></li> 
<li>A user can navigate your web store while downloading a downloadable product. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-855" target="_blank">Bug link</a>) --></li> 
<li>You can now specify weight units in kilograms (kg) using the FedEx shipping method. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-837" target="_blank">Bug link</a>) --></li> 
<li>FedEx shipping rates are now consistent with Magento discounted rates. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-852" target="_blank">Bug link</a>) --></li> 
<li>Fixed issues with United Parcel Service (UPS) shipping rates. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1629" target="_blank">Bug link</a>) --></li> 
<li>UPS shipping labels have the word <code>SAMPLE</code> printed on them only when you request a sample label. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-856" target="_blank">Bug link</a>) --></li> 
<li>Changes made to United States Post Office (USPS) APIs and rates have been incorporated in Magento. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-717" target="_blank">Bug link</a>) --></li> 
<li>The products in a customer's wish list no longer disappear after one or more products are edited by an administrator. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1651" target="_blank">Bug link</a>) --></li> 
<li>Administrators can view the contents of a customer's shopping cart. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1650" target="_blank">Bug link</a>) --></li> 
<li><!-- NEW -->When a customer selects a product on your web store, the assigned category is selected in the navigation menu. <!-- https://jira.corp.x.com/browse/MPERF-1708 --></li>
</ul>

<h4 id="ce18-1800fixes-price-rules">Promotional Price Rule Fixes</h4>
<p>The following fixes relate to administering and using shopping cart price rules and catalog price rules:</p>
<ul><li>Shopping cart price rules applied to specific customer groups work properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-735" target="_blank">Bug link</a>) --></li>
<li>Catalog price rules are applied properly to customer groups. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1432" target="_blank">Bug link</a>) --></li> 
<li>The scope of a product attribute is now honored by a catalog price rule. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-839" target="_blank">Bug link</a>) --></li> 
<li>Discounts specified by a shopping cart price rule are applied properly when a particular order is shipped to multiple addresses. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-751" target="_blank">Bug link</a>) --> </li> 
<li>A discount specified by a shopping cart price rule that allows for more than one use per customer is applied the correct number of times if the customer has their orders shipped to more than one address. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1453" target="_blank">Bug link</a>) --></li> 
</li>
<li>When an administrative user whose role is restricted to only viewing catalog price rules, the user cannot add or edit catalog price rules. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1498" target="_blank">Bug link</a>) --></li> 
<li>Shopping cart price rules now work properly with bundled products. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1358" target="_blank">Bug link</a>) --></li> 
</ul>

<h4 id="ce18-1800fixes-adminpanel">Administrative Ordering and Credit Memo Fixes</h4>
<ul><li>When you create an order using the Admin Panel and you have multiple stores, the <strong>State/Province</strong> field updates appropriately for the country in which the order is placed. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-460" target="_blank">Bug link</a>) --></li>
<li>When you create an order using the Admin Panel and you have specified a default billing address and a default shipping address, the addresses are used correctly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-738" target="_blank">Bug link</a>) --></li>
<li>Orders placed by an administrator display in a customer's last order list. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1251" target="_blank">Bug link</a>) --></li> 
<li>Product comparisons now display properly when an administrator makes a change using the Admin Panel (for example, deleting a product from a customer's comparison list). <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1249" target="_blank">Bug link</a>) --></li> 
<li>You can now cancel an order using the Admin Panel. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1390" target="_blank">Bug link</a>) --></li> 
<li>Orders and invoices that include taxable shipping&mdash;when created in the Admin Panel&mdash;now calculate the shipping taxes properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1389" target="_blank">Bug link</a>) --></li> 
<li>Products added to a customer's wish list by an administrator display properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1253" target="_blank">Bug link</a>) --></li> 
</ul>

<h4 id="ce18-1800fixes-importexport">Import Fixes</h4>
<ul><li>The quantity (<code>QTY</code>) of all products imports correctly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-729" target="_blank">Bug link</a>, <a href="https://jira.corp.x.com/browse/MPERF-760" target="_blank">Bug link</a>, <a href="https://jira.corp.x.com/browse/MPERF-859" target="_blank">Bug link</a>) --></li>
<li>The value of Maximum Qty Allowed in Shopping Cart (<code>use_cfg_max_sale_qty</code>) is correct. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-754" target="_blank">Bug link</a>) --></li>
<li>The product displays correctly in layered navigation. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-587" target="_blank">Bug link</a>) --></li>
<li>Importing customer lists with capitalization variations in the e-mail address now imports the customer only once (for example, <code>user@example.com</code> and <code>User@example.com</code>). <!-- (<a href="https://jira.corp.x.com/browse/MPERF-835" target="_blank">Bug link</a>) --></li>
<li><!-- NEW -->Issues with importing products with <strong>Append Complex Data</strong> selecting from a comma-separated value (<code>.csv</code>) file have been resolved. <!--https://jira.corp.x.com/browse/MPERF-1715, https://jira.corp.x.com/browse/MPERF-1907 -->
</ul>

<h4 id="ce18-1800fixes-payment">Payment Fixes</h4>
<ul><li>Resolved issue sending customer e-mail when using Payflow Link. <!-- (<a href="https://jira.corp.x.com/browse/SUPEE-283" target="_blank">Bug link</a>) --></li>
<li>Security issues with Google Checkout payments have been resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPI-526" target="_blank">Bug link</a>) --></li>
<li>Security issues with Authorize.net payments have been resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPI-297" target="_blank">Bug link</a>) --></li>
<li>Magento conforms to the latest version of the <a href="https://ppmts.custhelp.com/app/answers/detail/a_id/926/" target="_blank">PayPal Instant Payment Notification (IPN)</a> guidelines. <!-- (<a href="https://jira.corp.x.com/browse/MPI-716" target="_blank">Bug link</a>) --></li>
<li>The contents of a shopping cart are unaffected by canceling a PayPal payment. <!-- (<a href="https://jira.corp.x.com/browse/MPI-195" target="_blank">Bug link</a>) --></li>
<li>Issues with not being able to continue checkout after switching payment methods have been resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPI-796" target="_blank">Bug link</a>) --></li>
<li>You can now process partial refunds and invoices for orders that were placed using Payflow Pro. <!-- (<a href="https://jira.corp.x.com/browse/MPI-205" target="_blank">Bug link</a>) --></li>
<li>Payflow Link and Payments Advance now capture IPN transactions properly. <!-- (<a href="https://jira.corp.x.com/browse/SAASDEV-6090" target="_blank">Bug link</a>) --></li>
<li>Special characters (such as e-mail addresses) are now handled properly by the Magento Payflow API integration. <!-- (<a href="https://jira.corp.x.com/browse/MPI-604" target="_blank">Bug link</a>) --></li>
<li>Resolved errors with orders placed using the Website Payments Pro payment method. <!-- (<a href="https://jira.corp.x.com/browse/MPI-781" target="_blank">Bug link</a>) --></li>
<li>PayPal Express Checkout payments are handled properly when a shopping cart price rule is specified. <!-- (<a href="https://jira.corp.x.com/browse/MPI-673" target="_blank">Bug link</a>) --></li>
<li>Any PayPal Name-Value Pair (NVP) payment method no longer automatically refunds an order when a chargeback is initiated. Magento now allows the dispute to be resolved before taking the appropriate action.<br />
PayPal NVP payment methods include: PayPal Payments Pro (including PayPal Payments Pro Hosted), Payments Standard, and all Payflow methods.
<!-- (<a href="https://jira.corp.x.com/browse/MPI-633" target="_blank">Bug link</a>) --></li>
<li>PayPal Pro now correctly processes the shipping address for an order. <!-- (<a href="https://jira.corp.x.com/browse/MPI-601" target="_blank">Bug link</a>) --></li>
<li>PayPal Express Checkout and PayPal Pro now handle partial refunds properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1382" target="_blank">Bug link</a>) --></li>
<li>Fixed rounding errors that were preventing PayPal Express Checkout transactions from completing. The error occurred with the following configuration:
<ul><li>tax calculation method based on the total</li>
<li>tax calculated based on the shipping address</li>
<li>catalog prices exclude tax</li>
<li>shipping prices exclude tax</li>
<li>customer discount applied after a discount</li>
<li>discount applied to prices excluding tax</li>
<li>tax applied to a custom price if available<br />
(In the Admin Panel, click <strong>System</strong> > <strong>Configuration</strong> > SALES > <strong>Tax</strong>. In the right pane, expand <strong>Calculation Settings</strong>.)</li></ul>
<!-- (<a href="https://jira.corp.x.com/browse/MPI-1375" target="_blank">Bug link</a>) -->
</li>
<li>The order status Suspected Fraud is now supported by PayPal Payments Pro (hosted) when PayPal fraud protection is enabled. Using the Magento Admin Panel, the merchant can also accept or deny any Suspected Fraud orders and have that decision applied to the PayPal transaction. <!-- (<a href="https://jira.corp.x.com/browse/SAASDEV-6469" target="_blank">Bug link</a>, <a href="https://jira.corp.x.com/browse/MPERF-1391" target="_blank">Bug link</a>) --></li>
<li><!-- NEW -->When sending payments in the United Kingdom, PayPal Payments Pro (hosted) now sends the value for <code>state</code> correctly. (Before the fix, <code>city</code> was sent as the value for <code>state</code>.) <!--https://jira.corp.x.com/browse/MPI-889 -->
<li>Using the Ogone payment method, transactions display in the Magento Admin Panel after you capture them. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1689 target="_blank">Bug link</a>) --></li>
<li>When an administrator places an order and uses PSi Gate, then cancels the order, the PSi Gate gateway displays both the order and the void transactions. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1622 target="_blank">Bug link</a>) --></li>
<li>The following fields related to PayPal's Payflow Pro Gateway payment method are now implemented properly:
<ul><li><a href="https://cms.paypal.com/cms_content/GB/en_GB/files/developer/PP_PayflowPro_Guide.pdf" target="_blank"><code>[custref]</code></a> is the Magento customer's ID</li>
<li><a href="http://www.paypalobjects.com/en_US/ebook/PP_NVPAPI_DeveloperGuide/Appx_fieldreference.html" target="_blank"><code>[INVNUM]</code></a> is Magento's order number</li>
<!-- (<a href="https://jira.corp.x.com/browse/MPERF-631" target="_blank">Bug link</a>) --></li></ul>
</li>
<li>Fixed spurious <code>Gateway error: Void error: V18A4B18E0F9 has been captured</code> errors when canceling partially invoiced orders when the Payflow Pro processor was used to process the payment. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1529" target="_blank">Bug link</a>) --></li>
<li><em>3-D secure fix that affects UK merchants only</em>: 3-D Secure for UK merchants implementing Direct Payment works properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1479" target="_blank">Bug link</a>) </li>
<li> EE SagePay Direct with 3-D secure payments are processed correctly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1464" target="_blank">Bug link</a>) </li></ul> -->
</li>
<li>The Braintree payment method can now be configured properly. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1396" target="_blank">Bug link</a>) --></li>
<li>Partial captures are now supported for the following PayPal payment methods: Express Checkout, Payments Pro Payflow Edition, and PayPal Standard. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1379" target="_blank">Bug link</a>) --></li>
<li>Using the PayPal Express Checkout method, a recently added customer can check out without the error <code>This customer email already exists</code>. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-753" target="_blank">Bug link</a>) --></li>

</ul>

<h4 id="ce18-1800fixes-other">Other Fixes</h4>
<ul><li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2673" target="_blank">MPERF-2673</a>)  -->Issues related to the DHL shipping method for picking up and pricing orders on holidays have been resolved as follows:
<ul><li>If the current date is a weekend, Magento chooses next Monday as the pick-up date.</li>
<li>If the current date is a holiday, Magento requests from DHL information about the next five consecutive days to find a workday on which to pick up the order.</li>
<li>If there is no workday in the five consecutive days following a holiday, the DHL shipping method is unavailable.</li></ul>
</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MAGE-7339" target="_blank">MAGE-7339</a>)  -->The <code>.htaccess.sample</code> provided with Magento now includes <code>php_value memory_limit 512M</code> to be consistent with the <a href="{{ site.m1xgdeurl }}system-requirements.html" target="_blank">Magento system requirements</a>.</li>
<li><!-- (<a href="https://jira.corp.x.com/browse/MPERF-2575" target="_blank">MPERF-2575</a>)  -->You can now install or upgrade to CE 1.8.0.0 if your Magento database had a table prefix (for example, all tables start with <code>mage_</code> because you specified a tables prefix during installation).</li>
<li>MySQL database deadlock issues were resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-721" target="_blank">Bug link</a>, <a href="https://jira.corp.x.com/browse/MPERF-773" target="_blank">Bug link</a>) --></li>
<li>CE 1.8 is now <a href="http://www.w3.org/standards/" target="_blank">World Wide Web Consortium (W3C) compliant</a>. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-844" target="_blank">Bug link</a>) --></li> 
<li>When an administrative user whose role is restricted to managing products attempts to edit Inventory settings (<strong>Catalog</strong> > <strong>Manage Products</strong>, <strong>Inventory</strong>), only the available options display. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-863" target="_blank">Bug link</a>) --></li> 
<li>Related product information updates appropriately in the Admin Panel. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-766" target="_blank">Bug link</a>) --></li> 
<li>Issues with editing product inventory settings and category attributes using the Google Chrome web browser have been resolved. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1343" target="_blank">Bug link</a>) --></li> 
<li>Rolling back after a backup now works properly. (The Magento backup and rollback options are available in the Admin Panel in <strong>System</strong> > <strong>Tools</strong> > <strong>Backup</strong>.) <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1676" target="_blank">Bug link</a>) --></li> 
<li>You can now fetch data for a PayPal Settlement Report using a custom Secure FTP (SFTP) server. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1526" target="_blank">Bug link</a>) --></li> 
<li>You can now save a category with the option <strong>Available Product Listing Sort By: Best value or Price</strong> enabled. <!-- (<a href="https://jira.corp.x.com/browse/MPERF-1342" target="_blank">Bug link</a>) --></li> 
</ul>

<h3 id="thanks">Thanks</h3>
<p>Magento acknowledges and thanks everyone in the Magento Community who contributed to this release, including Colin Mollenhour for Redis modules.</p>
<p></p>
<p />