<!-- this URL: ce18-and-ee113-upgrading -->
<!-- title: Upgrading to and Verifying Magento Community Edition (CE) and Enterprise Edition (EE), Part 1 -->

<!DOCTYPE html>
<html lang=en>

<head>
    <meta charset=utf-8>

    <link rel="stylesheet" type="text/css" href="/common/css/stylesheet.css"/>
    <link rel="stylesheet" href="/common/css/stylesheet-fonts.css" type="text/css" charset="utf-8">
    <link rel="icon" href="/common/css/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="/common/css/favicon.ico" type="image/x-icon">
    <title>Upgrading to and Verifying Magento Community Edition (CE) and Enterprise Edition (EE), Part 1</title>

</head>

<body>
<a name="top"></a>
<img src="/common/images/m1x/m1xheader.png" width="1024" alt="header" />

<h1>Upgrading to and Verifying Magento Community Edition (CE) and Enterprise Edition (EE), Part 1</h1>
<p><a href="https://github.com/magento/devdocs/blob/develop//install/installing_upgrade_landing.html" target="_blank">Edit this page on GitHub <img src="/common/images/github_icon.png" height="15px"></a></p>


<div id="content"> 

<div class="toc"> <h4 class="toc">Table of Contents</h4>
<ul><li><a href="#overview">Overview</a></li>
<li><a href="#upgrade-path">Upgrade Path</a></li>
<li><a href="#ee1300-11301-upgrade-to-ee11302-start">Understanding the Upgrade to EE 1.13.0.2 or Later</a></li></ul></div>

<h2 id="overview">Overview</h2>
<p>This article discusses how to upgrade to:</p>
<ul><li>Magento Community Edition (CE) 1.8 or 1.9</li>
<li>Magento Enterprise Edition (EE) 1.13 or 1.14</li></ul>

<h2 id="upgrade-path">Upgrade Path</h2>
<div class="msg-box important"><img src="/common/images/m1x/icon-important.png" alt="important" align="left" width="40"><span><strong>Important</strong>: Magento recommends CE 1.9.1.0 or later or EE 1.14.1.0 or later for <em>all CE and EE installations and upgrades</em> to get the latest fixes, features, and security updates.</span></div>

<p>The following table provides basic information about how you perform your upgrade. More detailed information is discussed later in this article.</p>
<table>
<tbody>
<tr>
  <th>Edition and version</th>
  <th>Upgrade path</th>
</tr>
<tr>
  <td>CE 1.4 or earlier</td>
  <td>Your current CE version > CE 1.7 > CE 1.9.0.0</td>
</tr>
<tr>
  <td>CE 1.5 or later</td>
  <td>Your current CE version > CE 1.9.0.0</td>
</tr>
<tr>
  <td>EE 1.7 or earlier</td>
  <td>Your current EE version > EE 1.12 > EE 1.14.0.0<!-- &dagger; --></td>
</tr>
<tr>
  <td>EE 1.8 or later</td>
  <td>Your current EE version > EE 1.14.0.0<!-- &dagger; --></td>
</tr>
</tbody>
</table>

<h3 id="upgrade-path-ee">Magento EE Upgrade Path</h3>
<p>Because of changes to URL rewrites, the upgrade to Magento EE 1.13.0.2 or later is more complex than other upgrades. (This includes upgrading to Magento EE 1.14.)</p>
<p>Follow are the specific versions affected:</p>
<ul><li>Upgrading from EE 1.12 or earlier to EE 1.13.0.2 or later (including to EE 1.14)</li>
<li>Upgrading from EE 1.13.0.1 to EE 1.13.0.2 or later (including to EE 1.14)</li></ul>
<p>For more information about these upgrades, see <a href="#ee1300-11301-upgrade-to-ee11302-start">Understanding the Upgrade to EE 1.13.0.2 or EE 1.14</a>.</p>
<div class="msg-box important"><img src="/common/images/m1x/icon-note.png" alt="note" align="left" width="40"><span><strong>Note</strong>:  If you're upgrading from EE 1.13.0.2 to EE 1.13.1.0 or later, your upgrade doesn't involve changes to URL rewrites and you can skip some of the steps discussed in the other upgrades. Continue with <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">Upgrading to and Verifying Magento Community Edition (CE) and Enterprise Edition (EE)&mdash;Part 2</a>.</div>


<h3 id="upgrade-path-ce">Upgrading to Magento CE 1.9</h3>
<p>Unless you're upgrading from an <a href="#upgrade-path-older">older CE version</a>, skip the remainder of this article and continue with <a href="/guides/m1x/install/installing_upgrade_ce18_upgrade-roadmap.html" target="_blank">Upgrade Roadmap for Community Edition (CE)</a>.</p>

<!-- <p class="kb-notes">&dagger;&mdash;EE 1.13.0.1 fixes a critical security issue and also corrects upgrade issues related to duplicate URL keys. Magento recommends you upgrade to EE 1.13.0.1 directly and as soon as possible to avoid the issues discussed in the <a href="http://www.magentocommerce.com/knowledge-base/entry/ee113-later-release-notes#ee113-11301" target="_blank">EE 1.13.0.1 Release Notes</a>.<br>
If you're currently using EE 1.13.0.0, start over with a fresh installation or upgrade.<br>
If you're currently using an EE version earlier than EE 1.13.0.0, upgrade <em>directly</em> to EE 1.13.0.1 .</p> -->
<h3 id="upgrade-path-older">Upgrading From Older Versions of Magento CE or EE</h3>
<p>Provided you complete all tasks discussed in this article exactly as discussed, you can upgrade to Magento CE 1.9 or EE 1.14 from CE 1.5 or later or EE 1.8 or later.</p>
<p><strong>Important</strong>: <em>Do not</em> upgrade directly to this release if you're currently running CE 1.4 or earlier or EE 1.7 or earlier. A safer approach would be:</p>
<ol><li>Upgrade to CE 1.7 or EE 1.12</li>
<li>Thoroughly test CE 1.7 or EE 1.12 and fix any issues</li>
<li>Back up the system</li>
<li>Upgrade to CE 1.9 or EE 1.14</li></ol>
</p>
<div class="msg-box important"><img src="/common/images/m1x/icon-note.png" alt="note" align="left" width="40"><span><strong>Note</strong>: 
  <ul><li>Use caution when upgrading from versions older than CE 1.7 or EE 1.12 because core code on which your extensions are based and database schema have likely changed.</li>
    <li>If you upgraded to Magento CE 1.9.3 or Magento EE 1.14.3 after applying the <a href="https://magento.com/security/patches/supee-8788" target="_blank">SUPEE-8788 patch</a>, make sure the following files have been deleted:<br>

<pre>skin/adminhtml/default/default/media/flex.swf
skin/adminhtml/default/default/media/uploader.swf
skin/adminhtml/default/default/media/uploaderSingle.swf</pre>

If the files are present, delete them to avoid a potential security exploit. As of Magento CE 1.9.0.0 and Magento EE 1.14.0.0, we no longer distribute <code>.swf</code> files with the Magento software.</li></ul></div>

<p>To upgrade to CE 1.8, skip the remainder of this article and continue with <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">Upgrading to and Verifying Magento Community Edition 1.8 and Enterprise Edition 1.13&mdash;Part 2</a>.</p>
<p>To upgrade from EE 1.13.0.2 to EE 1.13.1.0, skip the remainder of this article and continue with <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">Upgrading to and Verifying Magento Community Edition 1.8 and Enterprise Edition 1.13&mdash;Part 2</a>.</p>

<h2 id="ee1300-11301-upgrade-to-ee11302-start">Understanding the Upgrade to EE 1.13.0.2 or EE 1.14</h2>
<p>The following sections apply <em>only</em> to the following Magento EE upgrades:</p>
<ul><li>Upgrading from EE 1.12 or earlier to EE 1.13.0.2 or later</li>
<li>Upgrading from EE 1.13.0.1 to EE 1.13.0.2 or later</li></ul>

<div class="msg-box important"><img src="/common/images/m1x/icon-note.png" alt="note" align="left" width="40"><span><strong>Note</strong>:  If you're upgrading from EE 1.13.0.2 to EE 1.13.1.0 or later, your upgrade doesn't involve changes to URL rewrites and you can skip some of the steps discussed in the other upgrades. Continue with <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">Upgrading to and Verifying Magento Community Edition (CE) and Enterprise Edition (EE)&mdash;Part 2</a>.</div>

<h3 id="overview-ee11302-upgrade-url-keys">Why This Upgrade is Different</h3>
<p>This section discusses why the upgrade to EE 1.13.0.2 or later requires you to perform different tasks than previous upgrades.</p>
<p>One of the results of the change to the way URL keys are handled is that URLs for the same products or categories might need to change from the URLs in the version you're upgrading from. Following are scenarios that might cause URL keys to change:</p>
<ul><li>All product keys must be unique. Any duplicate product URL keys are changed. For example, if two products had the URL key <code>nike-shoes</code>, one of them is changed to a URL key like <code>nike-shoes-1</code> by the URL redirect scripts. This also resolves any conflicts (for example, if you already had another product with key <code>nike-shoes-1</code>).</li>
<li>Categories at the same level in the hierarchy in the same store view must have unique URL keys.<br />
For example, if you have a <code>shoes</code> category with URL key <code>shoes</code> in English store view, <code>schuhe</code> in the German store view and <code>schuhe</code> in the Swiss store view, the upgrade scripts change one of the category's URL keys to something like <code>schuhe-1</code>.</li></ul>
<p>To ensure customers and search engines will be directed to the correct page, Magento provides a script that creates HTTP 301 (Moved Permanently) redirects for URLs that are changed.</p>
<p>In other words, after the upgrade, all pre-upgrade URLs work but they might be different than they were before you upgraded. </p>
<p>The way you upgrade depends on what EE version you're starting from. The following roadmaps provide a high-level overview of the upgrade process:</p>
<ul><li><a href="#ee11302-upgrade-112">Upgrading From EE 1.12 or Earlier</a></li>
<li><a href="#ee11302-upgrade-113">Upgrading From EE 1.13.0.1</a></li></ul>

<h3 id="ee11302-upgrade-112">Upgrading From EE 1.12 or Earlier</h3>
<p>Following is a high-level roadmap to upgrade to EE 1.13.0.2 or later from EE 1.12 or earlier. This upgrade involves tasks not required for other Magento upgrades; these new tasks are indicated in the roadmap.</p>
<ol><li>Install Magento in a different directory:
<ul><li><em>Recommended</em>. Set up a new system (that is, another host) on which to install Magento.<br />
The system should be identical to, if not better than, your current system. The new system must meet the <a href="/guides/m1x/system-requirements.html" target="_blank">Magento system requirements</a>.</li>
<li>Install Magento in a new, empty root installation directory on the same server.</li>
<div class="msg-box important"><img src="/common/images/m1x/icon-important.png" alt="important" align="left" width="40"><span><strong>Important</strong>: <em>Do not</em> upgrade Magento in the same directory on the same server because post-upgrade errors are likely to occur.</span></div></li></ul>
</li>
<li>In your current production environment:
<ol><li style="list-style-type:lower-alpha">Back up your Magento database.</li>
<li style="list-style-type:lower-alpha">Archive the file system.<br />
This includes the <code>media</code> directory and subdirectories; all extensions and customizations; and all custom themes.</li></ol>
</li>
<li>In the development or test environment:
<ol><li style="list-style-type:lower-alpha">Create a new, empty database instance.</li>
<li style="list-style-type:lower-alpha">Import the production database tables into the development database instance.</li>
<li style="list-style-type:lower-alpha">Copy your production <code>media</code> directory, extensions, themes, and other customizations to the development system.</li>
<li style="list-style-type:lower-alpha">Copy <code>local.xml</code> to <code>[your Magento install dir]/app/etc</code> and edit it if necessary to reference the production database instance.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Stop all cron jobs.</li>
<li style="list-style-type:lower-alpha">In a web browser, go to your new base URL.</li>
<li style="list-style-type:lower-alpha">Wait for upgrade scripts to run.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Set all indexers to update when scheduled (<strong>System</strong> > <strong>Configuration</strong> > ADVANCED > <strong>Index Management</strong>, <strong>Update when scheduled</strong>.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Run the URL redirect script to create 301 redirects: 
<pre>cd [your Magento install dir]
php -f shell/url_migration_to_1_13.php - <em>thread-count</em></pre>
<em>thread-count</em> is the number of CPU cores in your Magento server, minus 1, to a maximum of 15.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Run a full reindex from the command line: 
<pre>[your Magento install dir]/php -f shell/indexer.php -- --reindexall</pre></li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Clear the following directories from the command line: 
<pre>[your Magento install dir]/var/cache /var/full_page_cache /var/locks</pre></li>
<li style="list-style-type:lower-alpha">Enable cron and make sure the Magento cron job is set up.</li>
<li style="list-style-type:lower-alpha">Verify the upgraded system is now identical to the production system.<br />
If not, fix issues, retest, and upgrade again.</li></ol>
</li>
<li><em>Test the upgrade thoroughly</em>, including:
<ul><li>Verify all extensions, themes, and customizations work.</li>
<li>Place orders using all webstores and all payment methods.</li></ol>
</li></ol>
<p>Step-by-step instructions for your upgrade start <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">here</a>.</p>

<h3 id="ee11302-upgrade-113">Upgrading From EE 1.13.0.1</h3>
<p>Following is a high-level roadmap to upgrade to EE 1.13.0.2 or later from EE 1.13.0.1. This upgrade involves tasks not required for other Magento upgrades; these new tasks are indicated in the roadmap.</p>
<ol><li>Install Magento in a different directory:
<ul><li><em>Recommended</em>. Set up a new system (that is, another host) on which to install Magento.<br />
The system should be identical to, if not better than, your current system. The new system must meet the <a href="/guides/m1x/system-requirements.html" target="_blank">Magento system requirements</a>.</li>
<li>Install Magento in a new, empty root installation directory on the same server.</li>
<div class="msg-box important"><img src="/common/images/m1x/icon-important.png" alt="important" align="left" width="40"><span><strong>Important</strong>: <em>Do not</em> upgrade Magento in the same directory on the same server because post-upgrade errors are likely to occur.</span></div></li></ul>
</li>
<li>In your current production environment:
<ol><li style="list-style-type:lower-alpha">Back up your Magento database.</li>
<li style="list-style-type:lower-alpha">Archive the file system.<br />
This includes the <code>media</code> directory and subdirectories; all extensions and customizations; and all custom themes.</li></ol>
</li>
<li>In the development or test environment:
<ol><li style="list-style-type:lower-alpha">Create a new, empty database instance.</li>
<li style="list-style-type:lower-alpha">Import the production database tables into the development database instance.</li>
<li style="list-style-type:lower-alpha">Copy your production <code>media</code> directory, extensions, themes, and other customizations to the development system.</li>
<li style="list-style-type:lower-alpha">Copy <code>local.xml</code> to <code>[your Magento install dir]/app/etc</code> and edit it if necessary to reference the production database instance.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Stop all cron jobs.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Run the URL redirect script to create 301 redirects: 
<pre>[your Magento install dir]/php -f shell/url_migration_from_1_13_0_0_to_1_13_0_2.php</pre></li>
<li style="list-style-type:lower-alpha">In a web browser, go to your new base URL.</li>
<li style="list-style-type:lower-alpha">Wait for upgrade scripts to run.</li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Run a full reindex from the command line: 
<pre>[your Magento install dir]/php -f shell/indexer.php -- --reindexall</pre></li>
<img src="/common/images/m1x/new.png" style="position:absolute;margin:1px 0 0 -75px;" /><li style="list-style-type:lower-alpha">Clear the following directories from the command line: 
<pre>[your Magento install dir]/var/cache /var/full_page_cache /var/locks</pre></li>
<li style="list-style-type:lower-alpha">Enable cron and make sure the Magento cron job is set up.</li>
<li style="list-style-type:lower-alpha">Verify the upgraded system is now identical to the production system.<br />
If not, fix issues, retest, and upgrade again.</li></ol>
</li>
<li><em>Test the upgrade thoroughly</em>, including:
<ul><li>Verify all extensions, themes, and customizations work.</li>
<li>Place orders using all webstores and all payment methods.</li></ol>
</li></ol>
<p><strong>Important</strong>: </p>
<ul><li>Only after upgrade is tested and all errors fixed should you consider using it as your production system.</li>
<li><em>Back up</em> your system frequently during the upgrade process so you can roll back to a previous state in the event of errors or issues.</li>
<li>To avoid unnecessary downtime and potential issues, <em>never</em> upgrade Magento in a live environment!</li></ul>
<p>Step-by-step instructions for your upgrade start <a href="/guides/m1x/install/installing_upgrade_details.html" target="_blank">here</a>.</p>